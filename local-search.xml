<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>汉枫HF2211使用mqtt协议，获取modbus温湿度设备数据展示到界面上</title>
    <link href="/2023/02/14/modbus/mqtt%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2023/02/14/modbus/mqtt%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="在汉枫官网下载IOTSerive软件"><a href="#在汉枫官网下载IOTSerive软件" class="headerlink" title="在汉枫官网下载IOTSerive软件"></a>在汉枫官网下载IOTSerive软件</h1><p>  HF2211有两种版本，一种是485&#x2F;232转wifi信号和485&#x2F;232转4g信号，区别就是转4g信号需要流量卡，这里我使用的是转wifi信号，具体配置wifi信号方法参考汉枫官网<a href="http://www.hi-flying.com/">http://www.hi-flying.com/</a>, 下图是已经配置好的设置。<br>  <img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/iotseriver.png" alt="配置好wifi信号"></p><h1 id="接线方式"><a href="#接线方式" class="headerlink" title="接线方式"></a>接线方式</h1><ul><li>这里我们将演示获取温湿度至客户端<br>  串口服务器A接线传感器A，B接线传感器B，电源+，-相接，如图：<br>  <img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/IMG20230226142123.jpg" alt="接线方式"></li></ul><h1 id="使用node-js搭建mqtt服务器"><a href="#使用node-js搭建mqtt服务器" class="headerlink" title="使用node.js搭建mqtt服务器"></a>使用node.js搭建mqtt服务器</h1><ul><li>使用mosca搭建mqtt服务器，1883是mqtt端口，1884是是客户端可以使用websocket<figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> mosca = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mosca&#x27;</span>); <br><span class="hljs-comment">//构建自带服务器  1883 为mqtt 1884 为前端websocket通讯端口  前端无法直接使用mqtt</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">MqttServer</span> = <span class="hljs-keyword">new</span> mosca.<span class="hljs-title class_">Server</span>(&#123;<br>    <span class="hljs-attr">port</span>: <span class="hljs-number">1883</span>,<br>    <span class="hljs-attr">http</span>: &#123;<br>        <span class="hljs-attr">port</span>: <span class="hljs-number">1884</span>,<br>        <span class="hljs-attr">bundle</span>: <span class="hljs-literal">true</span>,<br>        <span class="hljs-attr">static</span>: <span class="hljs-string">&#x27;./&#x27;</span><br>    &#125;,<br>    <span class="hljs-attr">user</span>:<span class="hljs-string">&#x27;123456&#x27;</span>,<br>    password :<span class="hljs-string">&#x27;123456&#x27;</span><br>&#125;)<br><span class="hljs-comment">//对服务器端口进行配置， 在此端口进行监听</span><br><span class="hljs-title class_">MqttServer</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;clientConnected&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">client</span>) &#123;<br>    <span class="hljs-comment">//监听连接</span><br>    <span class="hljs-keyword">if</span>(client.<span class="hljs-property">id</span> === <span class="hljs-string">&#x27;reality&#x27;</span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;汉枫串口服务器连接成功.......&#x27;</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;本地mqtt连接成功.......&#x27;</span>);<br>    &#125;<br>&#125;);<br><br><span class="hljs-title class_">MqttServer</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;ready&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//当服务开启时</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Mosca server is running, waitting connent...&#x27;</span>);<br>&#125;);<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title class_">MqttServer</span><br></code></pre></div></td></tr></table></figure></li></ul><h1 id="导入脚本"><a href="#导入脚本" class="headerlink" title="导入脚本"></a>导入脚本</h1><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%AF%BC%E5%85%A5%E6%B1%89%E6%9E%AB%E8%84%9A%E6%9C%AC.png" alt="导入脚本"></p><ul><li>此脚本的含义是连接传感器串口”01 04 00 00 00 02 71 CB”，10秒发布一次数据<figure class="highlight c++"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs c++">FLASHMAGIC=<span class="hljs-number">3</span><br><span class="hljs-built_in">FLASH</span>(NUM)HFScriptFunction=<span class="hljs-number">1</span><br><span class="hljs-built_in">FLASH</span>(NUM)qryIntv=<span class="hljs-number">1000</span><br><span class="hljs-built_in">FLASH</span>(NUM)upIntv=<span class="hljs-number">10</span><br><span class="hljs-built_in">FLASH</span>(NUM)upMetd=<span class="hljs-number">0</span><br><span class="hljs-built_in">FLASH</span>(NUM)upJson=<span class="hljs-number">1</span><br><span class="hljs-built_in">FLASH</span>(STRSTR)jsonName=<span class="hljs-string">&quot;testname1&quot;</span><br><span class="hljs-built_in">FLASH</span>(STRHEX)cmd1=<span class="hljs-string">&quot;01 04 00 00 00 02 71 CB&quot;</span><br></code></pre></div></td></tr></table></figure></li></ul><h1 id="在IOTSerive软件上设置mqtt协议"><a href="#在IOTSerive软件上设置mqtt协议" class="headerlink" title="在IOTSerive软件上设置mqtt协议"></a>在IOTSerive软件上设置mqtt协议</h1><ul><li>需要注意的是这里的服务器地址，如果是本机地址，不能使用127.0.0.1这个ip,要使用真实的本机ip地址。<br><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E8%AE%BE%E7%BD%AEmqtt%E5%8D%8F%E8%AE%AE.png" alt="设置mqtt协议"></li></ul><h1 id="node-js后台接受到串口服务器的发布，就可以存储或者发布到客户端"><a href="#node-js后台接受到串口服务器的发布，就可以存储或者发布到客户端" class="headerlink" title="node.js后台接受到串口服务器的发布，就可以存储或者发布到客户端"></a>node.js后台接受到串口服务器的发布，就可以存储或者发布到客户端</h1><ul><li>注意这里的数据是寄存器地址格式需要做格式化处理，uartDataFormat是我做格式化处理的函数<figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;reality/up&#x27;</span>:<br>       client1.<span class="hljs-title function_">publish</span>(<span class="hljs-string">&quot;temperature&quot;</span>, <span class="hljs-title function_">uartDataFormat</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(packet.<span class="hljs-property">payload</span>.<span class="hljs-title function_">toString</span>()).<span class="hljs-property">value</span>, <span class="hljs-number">6</span>).<span class="hljs-title function_">toString</span>(), &#123; <span class="hljs-attr">qos</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">retain</span>: <span class="hljs-literal">true</span> &#125;);<br>       client1.<span class="hljs-title function_">publish</span>(<span class="hljs-string">&quot;humidity&quot;</span>, <span class="hljs-title function_">uartDataFormat</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(packet.<span class="hljs-property">payload</span>.<span class="hljs-title function_">toString</span>()).<span class="hljs-property">value</span>, <span class="hljs-number">10</span>).<span class="hljs-title function_">toString</span>(), &#123; <span class="hljs-attr">qos</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">retain</span>: <span class="hljs-literal">true</span> &#125;);<br></code></pre></div></td></tr></table></figure></li></ul><h1 id="前端通过订阅mqtt的发布获取到数据"><a href="#前端通过订阅mqtt的发布获取到数据" class="headerlink" title="前端通过订阅mqtt的发布获取到数据"></a>前端通过订阅mqtt的发布获取到数据</h1><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// 连接mqtt并订阅</span><br>client.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;connect&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  client.<span class="hljs-title function_">subscribe</span>([ <span class="hljs-string">&#x27;temperature&#x27;</span> <span class="hljs-string">&#x27;humidity&#x27;</span>], &#123;<br>    <span class="hljs-attr">qos</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">retain</span>: <span class="hljs-literal">true</span><br>  &#125;, <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (!error) &#123;<br>      <span class="hljs-title class_">Notification</span>(&#123;<br>        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;MQTT 订阅成功&#x27;</span>,<br>        <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>        <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;success&#x27;</span><br>      &#125;)<br>      <span class="hljs-comment">// onMqttMessage()</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-title class_">Notification</span>.<span class="hljs-title function_">error</span>(&#123;<br>        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;MQTT 订阅失败&#x27;</span>,<br>        <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;&#x27;</span><br>      &#125;)<br>    &#125;<br>  &#125;)<br>&#125;)<br></code></pre></div></td></tr></table></figure><h1 id="最终展示"><a href="#最终展示" class="headerlink" title="最终展示"></a>最终展示</h1><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%89%8D%E7%AB%AF%E5%B1%95%E7%A4%BA%E7%95%8C%E9%9D%A2%E5%9B%BE.png" alt="数据获取成功"></p>]]></content>
    
    
    <categories>
      
      <category>modbus</category>
      
    </categories>
    
    
    <tags>
      
      <tag>modbus</tag>
      
      <tag>mqtt</tag>
      
      <tag>硬件数据</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>【硬件数据模拟】 使用Modbus Slave软件模拟数据</title>
    <link href="/2023/02/11/modbus/modbus%E6%A8%A1%E6%8B%9F/"/>
    <url>/2023/02/11/modbus/modbus%E6%A8%A1%E6%8B%9F/</url>
    
    <content type="html"><![CDATA[<h1 id="下载Modbus-Slave软件"><a href="#下载Modbus-Slave软件" class="headerlink" title="下载Modbus Slave软件"></a>下载Modbus Slave软件</h1><p> 下载完成之后，单击Connection-&gt;Connect,弹出注册窗口。这个软件有一个月的试用，或者是在网上找该软件的破解方式。弹出窗口如图所示：<br> <img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/modbusSalve.png" alt="点击连接"></p><h1 id="设置参数"><a href="#设置参数" class="headerlink" title="设置参数"></a>设置参数</h1><p>  ip设置为本机地址，端口设置为502，波特率设置为9600，协议设置为Modbbus Tcp&#x2F;Ip,串口设置为COM1。</p><h1 id="连接Modbus-Slave"><a href="#连接Modbus-Slave" class="headerlink" title="连接Modbus Slave"></a>连接Modbus Slave</h1><ul><li>Modbus还有一个客户端，modbus poll专门用来测试modbus连接，但是这里我展示用node.js获取的Modbus Slave模拟数据。</li><li>引入modbus-serial包， 使用npm i modbus-serial下载安装，新建modbus-port.js文件，代码如下<figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// create an empty modbus client</span><br><span class="hljs-keyword">var</span> <span class="hljs-title class_">ModbusRTU</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;modbus-serial&quot;</span>)<br><span class="hljs-keyword">var</span> <span class="hljs-title class_">ModbusRTUClient</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModbusRTU</span>();<br><br><span class="hljs-comment">// open connection to a tcp line</span><br><span class="hljs-comment">// 创建Modbus TCP连接，IP是127.0.0.1,端口502</span><br><span class="hljs-title class_">ModbusRTUClient</span>.<span class="hljs-title function_">connectTCP</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>, &#123; <span class="hljs-attr">port</span>: <span class="hljs-number">502</span> &#125;);<br><br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title class_">ModbusRTUClient</span><br></code></pre></div></td></tr></table></figure>新建一个publish.js发布收到的模拟数据<figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">const</span> moment = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;moment&#x27;</span>);<br><span class="hljs-keyword">const</span> mqtt = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mqtt&#x27;</span>);<br><span class="hljs-keyword">const</span> <span class="hljs-title class_">MqttServer</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./server&#x27;</span>); <span class="hljs-comment">// 这里是我创建的mqtt服务器</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">ModbusRTUClient</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./modbus-port.js&#x27;</span>);<br><span class="hljs-keyword">const</span> client1 = mqtt.<span class="hljs-title function_">connect</span>(<span class="hljs-string">&#x27;mqtt://127.0.0.1:1883&#x27;</span>); <span class="hljs-comment">// 这里是我创建的mqtt服务器</span><br><br><span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-title class_">ModbusRTUClient</span>.<span class="hljs-title function_">readHoldingRegisters</span>(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, data</span>)&#123;<br>    <span class="hljs-comment">// 获取当前时间</span><br>    <span class="hljs-comment">//moment.locale(&#x27;zh-cn&#x27;);</span><br>    <span class="hljs-keyword">let</span> value =  data.<span class="hljs-property">data</span>[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">let</span> humidity = data.<span class="hljs-property">data</span>[<span class="hljs-number">1</span>];<br>    client1.<span class="hljs-title function_">publish</span>(<span class="hljs-string">&quot;temperature&quot;</span>, value.<span class="hljs-title function_">toString</span>(), &#123; <span class="hljs-attr">qos</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">retain</span>: <span class="hljs-literal">true</span> &#125;); <span class="hljs-comment">// 使用mqtt服务发布</span><br>    client1.<span class="hljs-title function_">publish</span>(<span class="hljs-string">&quot;humidity&quot;</span>, humidity.<span class="hljs-title function_">toString</span>(), &#123; <span class="hljs-attr">qos</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">retain</span>: <span class="hljs-literal">true</span> &#125;);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;----------------------------------------------------------------------&quot;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;数据时间是：&quot;</span> + <span class="hljs-title function_">moment</span>().<span class="hljs-title function_">format</span>(<span class="hljs-string">&#x27;YYYY年MM月DD日 HH时mm分ss秒&#x27;</span>));<br>&#125;);<br>&#125;, <span class="hljs-number">2000</span>);<br></code></pre></div></td></tr></table></figure></li></ul><h1 id="这个软件还有很多用处，请参考其他文献使用……"><a href="#这个软件还有很多用处，请参考其他文献使用……" class="headerlink" title="这个软件还有很多用处，请参考其他文献使用……"></a>这个软件还有很多用处，请参考其他文献使用……</h1>]]></content>
    
    
    <categories>
      
      <category>modbus</category>
      
    </categories>
    
    
    <tags>
      
      <tag>modbus</tag>
      
      <tag>mqtt</tag>
      
      <tag>硬件数据</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo的fluid主题添加相册功能及自定义页面</title>
    <link href="/2022/07/14/hexo%E9%85%8D%E7%BD%AE/hexo%E7%9B%B8%E5%86%8C%E5%AE%9E%E7%8E%B0/"/>
    <url>/2022/07/14/hexo%E9%85%8D%E7%BD%AE/hexo%E7%9B%B8%E5%86%8C%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<p class="note note-warning">在阅读本博客之前，我默认你已经配置好你的hexo博客。如还未配置请参考hexo配置文档:<a href="https://hexo.bootcss.com/" style="color:#428bca;">https://hexo.bootcss.com</a>，我的博客主题是fluid，fluid用户参考手册：<a href="https://hexo.fluid-dev.com/docs" style="color:#428bca;">https://hexo.fluid-dev.com/docs</a></p><h1 id="创建相册页面"><a href="#创建相册页面" class="headerlink" title="创建相册页面"></a>创建相册页面</h1><p>新建相册页 hexo new page photos,编辑 &#x2F;source&#x2F;photos&#x2F;index.md，输入以下内容：</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">---<br><span class="hljs-attr">title</span>: 相册<br><span class="hljs-attr">subtitle</span>: 用一张小小的照片，记录下身边的美好瞬间<br><span class="hljs-attr">date</span>: <span class="hljs-number">2022</span>-<span class="hljs-number">4</span>-<span class="hljs-number">30</span> <span class="hljs-number">19</span>:<span class="hljs-number">04</span>:<span class="hljs-number">03</span><br><span class="hljs-attr">layout</span>: photo<br><span class="hljs-attr">comment</span>:      <span class="hljs-comment">//评论插件，删除，如想要填入评论插件，开启你的评论插件</span><br>---<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="language-css"><span class="language-xml"><span class="hljs-selector-class">.ImageGrid</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span></span><br><span class="language-css"><span class="language-xml">  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">1040px</span>;</span></span><br><span class="language-css"><span class="language-xml">  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;</span></span><br><span class="language-css"><span class="language-xml">  <span class="hljs-attribute">text-align</span>: center;</span></span><br><span class="language-css"><span class="language-xml">&#125;</span></span><br><span class="language-css"><span class="language-xml"><span class="hljs-selector-class">.card</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">  <span class="hljs-attribute">overflow</span>: hidden;</span></span><br><span class="language-css"><span class="language-xml">  <span class="hljs-attribute">transition</span>: .<span class="hljs-number">3s</span> ease-in-out;</span></span><br><span class="language-css"><span class="language-xml">  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;</span></span><br><span class="language-css"><span class="language-xml">  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#efefef</span>;</span></span><br><span class="language-css"><span class="language-xml">  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1.4px</span>;</span></span><br><span class="language-css"><span class="language-xml">&#125;</span></span><br><span class="language-css"><span class="language-xml"><span class="hljs-selector-class">.ImageInCard</span> <span class="hljs-selector-tag">img</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;</span></span><br><span class="language-css"><span class="language-xml">  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;</span></span><br><span class="language-css"><span class="language-xml">  <span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;</span></span><br><span class="language-css"><span class="language-xml">  <span class="hljs-attribute">height</span>:<span class="hljs-number">100%</span>;</span></span><br><span class="language-css"><span class="language-xml">&#125;</span></span><br><span class="language-css"><span class="language-xml"><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">prefers-color-scheme</span>: dark) &#123;</span></span><br><span class="language-css"><span class="language-xml">  <span class="hljs-selector-class">.card</span> &#123;<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#333</span>;&#125;</span></span><br><span class="language-css"><span class="language-xml">&#125;</span></span><br><span class="language-css"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;imageTab&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ImageGrid&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></code></pre></div></td></tr></table></figure><h1 id="Github-picgo搭建图床"><a href="#Github-picgo搭建图床" class="headerlink" title="Github+picgo搭建图床"></a>Github+picgo搭建图床</h1><p class="note note-danger">我的相册是采用GitHub+jsDelivr加速来加载图片，这样有利于更快加载图片，当然你可以选择跳过这一步，将你的图片放到你的博客中。或者搭建其他图床。<p><h2 id="下载picgo"><a href="#下载picgo" class="headerlink" title="下载picgo"></a>下载picgo</h2><p>百度搜索picgo下载picgo</p><p>picgo下载网址：<a href="https://molunerfinn.com/PicGo/">https://molunerfinn.com/PicGo/</a></p><p><img src="http://imghe.xyz/img/picgo.png" alt="picgo安装完成"></p><h2 id="创建github仓库"><a href="#创建github仓库" class="headerlink" title="创建github仓库"></a>创建github仓库</h2><p>   创建一个公共的仓库，用来存放你的图片。</p><h2 id="在picgo中设置图床"><a href="#在picgo中设置图床" class="headerlink" title="在picgo中设置图床"></a>在picgo中设置图床</h2><p>在picgo中选择github图床，如果你的图床仓库为其他的，请依据的你选择。以下是github图床设置<br>仓库名选择你创建的仓库，分支名为main，存储路径按照你相册文件名存放。设置自定义域名，我的域名中加入了cdn.jsdelivr这个会加速我们的图片加载速度。token设置在你创建的github仓库中点击setting找到personal access token将创建好的token复制进token设置中<br><img src="http://imghe.xyz/img/%E5%9B%BE%E5%BA%8A%E8%AE%BE%E7%BD%AE1.png" alt="picgo图床设置"></p><p>至此我们的图床设置完毕，点击上传图片之后，图片就可以保存到githu仓库中，在picgo中选择相册，即可查看图片链接来进行访问</p><h1 id="处理图片json文件"><a href="#处理图片json文件" class="headerlink" title="处理图片json文件"></a>处理图片json文件</h1> <p class="note note-primary">这一步是为了将相册所有的图片信息目录及大小保存到json文件中，访问通过固定域名+json文件中的图片路径即可访问<p><h2 id="在blog目录下创建相册文件"><a href="#在blog目录下创建相册文件" class="headerlink" title="在blog目录下创建相册文件"></a>在blog目录下创建相册文件</h2><p>   创建imagescreate文件夹，结构如下图所示：<br><img src="http://imghe.xyz/img/12shd.png" alt="相册文件结构"></p><h2 id="创建phototool-js文件处理图片"><a href="#创建phototool-js文件处理图片" class="headerlink" title="创建phototool.js文件处理图片"></a>创建phototool.js文件处理图片</h2><p> 内容代码如下：<br> <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"> <span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs-extra&#x27;</span>);<br><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><span class="hljs-keyword">const</span> imageSize = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;image-size&#x27;</span>);<br><br><span class="hljs-keyword">const</span> rootPath=<span class="hljs-string">&quot;imagescreate/&quot;</span>   <span class="hljs-comment">//相册相对路径</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PhotoExtension</span> &#123;<br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">size</span> = <span class="hljs-number">64</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">offset</span> = [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>];<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Photo</span> &#123;<br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirName</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileName</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">iconID</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">extension</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PhotoExtension</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PhotoGroup</span> &#123;<br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span> = [];<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">createPlotIconsData</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">let</span> allPlots = [];<br>    <span class="hljs-keyword">let</span> allPlotGroups = [];<br><br>    <span class="hljs-keyword">const</span> plotJsonFile = path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">&#x27;./photosInfo.json&#x27;</span>);<br>    <span class="hljs-keyword">const</span> plotGroupJsonFile = path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">&#x27;./photos.json&#x27;</span>);<br><br>    <span class="hljs-keyword">if</span> (fs.<span class="hljs-title function_">existsSync</span>(plotJsonFile)) &#123;<br>        allPlots = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(fs.<span class="hljs-title function_">readFileSync</span>(plotJsonFile));<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (fs.<span class="hljs-title function_">existsSync</span>(plotGroupJsonFile)) &#123;<br>        allPlotGroups = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(fs.<span class="hljs-title function_">readFileSync</span>(plotGroupJsonFile));<br>    &#125;<br><br>    fs.<span class="hljs-title function_">readdirSync</span>(__dirname).<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">dirName</span>) &#123;<br>        <span class="hljs-keyword">const</span> stats = fs.<span class="hljs-title function_">statSync</span>(path.<span class="hljs-title function_">join</span>(__dirname, dirName));<br>        <span class="hljs-keyword">const</span> isDir = stats.<span class="hljs-title function_">isDirectory</span>();<br>        <span class="hljs-keyword">if</span> (isDir) &#123;<br>            <span class="hljs-keyword">const</span> subfiles = fs.<span class="hljs-title function_">readdirSync</span>(path.<span class="hljs-title function_">join</span>(__dirname, dirName));<br>            subfiles.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">subfileName</span>) &#123;<br>                <span class="hljs-comment">// 如果已经存在 则不再处理</span><br>                <span class="hljs-comment">// if (allPlots.find(o =&gt; o.fileName === subfileName &amp;&amp; o.dirName === dirName)) &#123;</span><br>                <span class="hljs-comment">//     return;</span><br>                <span class="hljs-comment">// &#125;</span><br><br>                <span class="hljs-comment">// 新增标</span><br>                <span class="hljs-keyword">const</span> plot = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Photo</span>();<br>                plot.<span class="hljs-property">dirName</span> = dirName;<br>                plot.<span class="hljs-property">fileName</span> = subfileName;<br>                <span class="hljs-keyword">const</span> imageInfo = <span class="hljs-title function_">imageSize</span>(rootPath+dirName + <span class="hljs-string">&quot;/&quot;</span> + subfileName);<br>                plot.<span class="hljs-property">iconID</span> = imageInfo.<span class="hljs-property">width</span> + <span class="hljs-string">&#x27;.&#x27;</span> + imageInfo.<span class="hljs-property">height</span> + <span class="hljs-string">&#x27; &#x27;</span> + subfileName;<br>                allPlots.<span class="hljs-title function_">push</span>(plot);<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`RD: createPlotIconsData -&gt; new plot`</span>, plot);<br><br>                <span class="hljs-comment">// 为新增标添加分组 暂时以它所处的文件夹为分组</span><br>                <span class="hljs-keyword">let</span> group = allPlotGroups.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">o</span> =&gt;</span> o.<span class="hljs-property">name</span> === dirName);<br>                <span class="hljs-keyword">if</span> (!group) &#123;<br>                    group = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PhotoGroup</span>();<br>                    group.<span class="hljs-property">name</span> = dirName;<br>                    allPlotGroups.<span class="hljs-title function_">push</span>(group);<br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`RD: createPlotIconsData -&gt; new group`</span>, group);<br>                &#125;<br>                group.<span class="hljs-property">children</span>.<span class="hljs-title function_">push</span>(plot.<span class="hljs-property">iconID</span>);<br>            &#125;);<br>        &#125;<br>    &#125;);<br><br>    fs.<span class="hljs-title function_">writeJSONSync</span>(plotJsonFile, allPlots);<br>    fs.<span class="hljs-title function_">writeJSONSync</span>(plotGroupJsonFile, allPlotGroups);<br>&#125;<br><br><span class="hljs-title function_">createPlotIconsData</span>();<br></code></pre></div></td></tr></table></figure></p><h2 id="生成json文件"><a href="#生成json文件" class="headerlink" title="生成json文件"></a>生成json文件</h2><ul><li>运行npm i -S image-size 导入获取文件大小第三方包</li><li>运行node imagescreate&#x2F;phototool.js生成json文件<br> 找到photos.json,将其复制到source&#x2F;photos目录下。内容示例： <figure class="highlight json"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs json"> <span class="hljs-punctuation">[</span><br>  <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;美食&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;children&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-string">&quot;1036.584 foot1.jpg&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;1036.584 foot1.jpg&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;3000.4000 IMG20190906183445.jpg&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;4000.3000 IMG20210306173452.jpg&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;4000.3000 IMG20210624124705.jpg&quot;</span><br>    <span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;风景&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;children&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-string">&quot;1036.584 foot1.jpg&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;1036.584 foot1.jpg&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;3000.4000 IMG20190906183445.jpg&quot;</span><br>    <span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><br>   <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;生活&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;children&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-string">&quot;2401.1600 1619402831098.jpeg&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;1440.1080 1637328153132.jpeg&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;1440.1080 1637581717468.jpeg&quot;</span><br>    <span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">]</span><br></code></pre></div></td></tr></table></figure><h1 id="编写相册js文件"><a href="#编写相册js文件" class="headerlink" title="编写相册js文件"></a>编写相册js文件</h1> 在 &#x2F;source&#x2F;js&#x2F; 目录下创建 photoWall.js：<figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> imgDataPath = <span class="hljs-string">&quot;/photos/photos.json&quot;</span>; <span class="hljs-comment">//图片名称高宽信息json文件路径   //填入你的路径，注意修改</span><br><span class="hljs-keyword">var</span> imgPath = <span class="hljs-string">&quot;http://imghe.xyz/&quot;</span>; <span class="hljs-comment">//图片访问路径   //填入你的路径，注意修改</span><br><span class="hljs-keyword">var</span> imgMaxNum = <span class="hljs-number">50</span>; <span class="hljs-comment">//图片显示数量</span><br><br><span class="hljs-keyword">var</span> windowWidth =<br>  <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> ||<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">clientWidth</span> ||<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">clientWidth</span>;<br><span class="hljs-keyword">if</span> (windowWidth &lt; <span class="hljs-number">768</span>) &#123;<br>  <span class="hljs-keyword">var</span> imageWidth = <span class="hljs-number">145</span>; <span class="hljs-comment">//图片显示宽度(手机端)</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>  <span class="hljs-keyword">var</span> imageWidth = <span class="hljs-number">250</span>; <span class="hljs-comment">//图片显示宽度</span><br>&#125;<br><br><span class="hljs-keyword">const</span> photo = &#123;<br>  <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>,<br>  <span class="hljs-attr">offset</span>: imgMaxNum,<br>  <span class="hljs-attr">init</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> that = <span class="hljs-variable language_">this</span>;<br>    $.<span class="hljs-title function_">getJSON</span>(imgDataPath, <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>      that.<span class="hljs-title function_">render</span>(that.<span class="hljs-property">page</span>, data);<br>      <span class="hljs-comment">//that.scroll(data);</span><br>      that.<span class="hljs-title function_">eventListen</span>(data);<br>    &#125;);<br>  &#125;,<br>  <span class="hljs-title function_">constructHtml</span>(<span class="hljs-params">options</span>) &#123;<br>    <span class="hljs-keyword">const</span> &#123;<br>      imageWidth,<br>      imageX,<br>      imageY,<br>      name,<br>      imgPath,<br>      imgName,<br>      imgNameWithPattern,<br>    &#125; = options;<br>    <span class="hljs-keyword">const</span> htmlEle = <span class="hljs-string">`&lt;div class=&quot;card lozad&quot; style=&quot;width:<span class="hljs-subst">$&#123;imageWidth&#125;</span>px&quot;&gt;</span><br><span class="hljs-string">                  &lt;div class=&quot;ImageInCard&quot; style=&quot;height:<span class="hljs-subst">$&#123;</span></span><br><span class="hljs-subst"><span class="hljs-string">                    (imageWidth * imageY) / imageX</span></span><br><span class="hljs-subst"><span class="hljs-string">                  &#125;</span>px&quot;&gt;</span><br><span class="hljs-string">                    &lt;a data-fancybox=&quot;gallery&quot; href=&quot;<span class="hljs-subst">$&#123;imgPath&#125;</span><span class="hljs-subst">$&#123;name&#125;</span>/<span class="hljs-subst">$&#123;imgNameWithPattern&#125;</span>&quot;</span><br><span class="hljs-string">                          data-caption=&quot;<span class="hljs-subst">$&#123;imgName&#125;</span>&quot; title=&quot;<span class="hljs-subst">$&#123;imgName&#125;</span>&quot;&gt;</span><br><span class="hljs-string">                            &lt;img  class=&quot;lazyload&quot; data-src=&quot;<span class="hljs-subst">$&#123;imgPath&#125;</span><span class="hljs-subst">$&#123;name&#125;</span>/<span class="hljs-subst">$&#123;imgNameWithPattern&#125;</span>&quot;</span><br><span class="hljs-string">                            src=&quot;data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==&quot;</span><br><span class="hljs-string">                            onload=&quot;lzld(this)&quot;</span><br><span class="hljs-string">                            lazyload=&quot;auto&quot;&gt;</span><br><span class="hljs-string">                        &lt;/a&gt;</span><br><span class="hljs-string">                  &lt;/div&gt;</span><br><span class="hljs-string">                &lt;/div&gt;`</span>;<br>    <span class="hljs-keyword">return</span> htmlEle;<br>  &#125;,<br>  <span class="hljs-attr">render</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">page, data = []</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = data;<br>    <span class="hljs-keyword">if</span> (!data.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">var</span> html,<br>      imgNameWithPattern,<br>      imgName,<br>      imageSize,<br>      imageX,<br>      imageY,<br>      li = <span class="hljs-string">&quot;&quot;</span>;<br><br>    <span class="hljs-keyword">let</span> liHtml = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">let</span> contentHtml = <span class="hljs-string">&quot;&quot;</span>;<br><br>    data.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">const</span> activeClass = index === <span class="hljs-number">0</span> ? <span class="hljs-string">&quot;active&quot;</span> : <span class="hljs-string">&quot;&quot;</span>;<br>      liHtml += <span class="hljs-string">`&lt;li class=&quot;nav-item&quot; role=&quot;presentation&quot;&gt;</span><br><span class="hljs-string">          &lt;a class=&quot;nav-link <span class="hljs-subst">$&#123;activeClass&#125;</span> photo-tab&quot; id=&quot;home-tab&quot; photo-uuid=&quot;<span class="hljs-subst">$&#123;item.name&#125;</span>&quot; data-toggle=&quot;tab&quot; href=&quot;#<span class="hljs-subst">$&#123;item.name&#125;</span>&quot;  role=&quot;tab&quot; aria-controls=&quot;<span class="hljs-subst">$&#123;item.name&#125;</span>&quot; aria-selected=&quot;true&quot;&gt;<span class="hljs-subst">$&#123;item.name&#125;</span>&lt;/a&gt;</span><br><span class="hljs-string">        &lt;/li&gt;`</span>;<br>    &#125;);<br>    <span class="hljs-keyword">const</span> [initData = &#123;&#125;] = data;<br>    <span class="hljs-keyword">const</span> &#123; children = [],name &#125; = initData;<br>    children.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> &#123;<br>      imgNameWithPattern = item.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot; &quot;</span>)[<span class="hljs-number">1</span>];<br>      imgName = imgNameWithPattern.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;.&quot;</span>)[<span class="hljs-number">0</span>];<br>      imageSize = item.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot; &quot;</span>)[<span class="hljs-number">0</span>];<br>      imageX = imageSize.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;.&quot;</span>)[<span class="hljs-number">0</span>];<br>      imageY = imageSize.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;.&quot;</span>)[<span class="hljs-number">1</span>];<br>      <span class="hljs-keyword">let</span> imgOptions = &#123;<br>        imageWidth,<br>        imageX,<br>        imageY,<br>        name,<br>        imgName,<br>        imgPath,<br>        imgNameWithPattern,<br>      &#125;;<br>      li += <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">constructHtml</span>(imgOptions);<br>    &#125;);<br>    contentHtml += <span class="hljs-string">` &lt;div class=&quot;tab-pane fade show active&quot;  role=&quot;tabpanel&quot; aria-labelledby=&quot;home-tab&quot;&gt;<span class="hljs-subst">$&#123;li&#125;</span>&lt;/div&gt;`</span>;<br><br>    <span class="hljs-keyword">const</span> ulHtml = <span class="hljs-string">`&lt;ul class=&quot;nav nav-tabs&quot; id=&quot;myTab&quot; role=&quot;tablist&quot;&gt;<span class="hljs-subst">$&#123;liHtml&#125;</span>&lt;/ul&gt;`</span>;<br>    <span class="hljs-keyword">const</span> tabContent = <span class="hljs-string">`&lt;div class=&quot;tab-content&quot; id=&quot;myTabContent&quot;&gt;<span class="hljs-subst">$&#123;contentHtml&#125;</span>&lt;/div&gt;`</span>;<br><br>    $(<span class="hljs-string">&quot;#imageTab&quot;</span>).<span class="hljs-title function_">append</span>(ulHtml);<br>    $(<span class="hljs-string">&quot;.ImageGrid&quot;</span>).<span class="hljs-title function_">append</span>(tabContent);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">minigrid</span>();<br>  &#125;,<br>  <span class="hljs-attr">eventListen</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>    <span class="hljs-keyword">let</span> self = <span class="hljs-variable language_">this</span>;<br>    <span class="hljs-keyword">var</span> html,<br>      imgNameWithPattern,<br>      imgName,<br>      imageSize,<br>      imageX,<br>      imageY,<br>      li = <span class="hljs-string">&quot;&quot;</span>;<br>    $(<span class="hljs-string">&#x27;a[data-toggle=&quot;tab&quot;]&#x27;</span>).<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;shown.bs.tab&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) &#123;<br>      $(<span class="hljs-string">&quot;.ImageGrid&quot;</span>).<span class="hljs-title function_">empty</span>();<br>      <span class="hljs-keyword">const</span> selectId = $(e.<span class="hljs-property">target</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&quot;photo-uuid&quot;</span>);<br>      <span class="hljs-keyword">const</span> selectedData = data.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> data.<span class="hljs-property">name</span> === selectId) || &#123;&#125;;<br>      <span class="hljs-keyword">const</span> &#123; children,name &#125; = selectedData;<br>      <span class="hljs-keyword">let</span> li = <span class="hljs-string">&quot;&quot;</span>;<br>      children.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> &#123;<br>        imgNameWithPattern = item.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot; &quot;</span>)[<span class="hljs-number">1</span>];<br>        imgName = imgNameWithPattern.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;.&quot;</span>)[<span class="hljs-number">0</span>];<br>        imageSize = item.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot; &quot;</span>)[<span class="hljs-number">0</span>];<br>        imageX = imageSize.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;.&quot;</span>)[<span class="hljs-number">0</span>];<br>        imageY = imageSize.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;.&quot;</span>)[<span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">let</span> imgOptions = &#123;<br>          imageWidth,<br>          imageX,<br>          imageY,<br>          name,<br>          imgName,<br>          imgPath,<br>          imgNameWithPattern,<br>        &#125;;<br>        li += self.<span class="hljs-title function_">constructHtml</span>(imgOptions);<br>      &#125;);<br>      $(<span class="hljs-string">&quot;.ImageGrid&quot;</span>).<span class="hljs-title function_">append</span>(li);<br>      self.<span class="hljs-title function_">minigrid</span>();<br>    &#125;);<br>  &#125;,<br>  <span class="hljs-attr">minigrid</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> grid = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Minigrid</span>(&#123;<br>      <span class="hljs-attr">container</span>: <span class="hljs-string">&quot;.ImageGrid&quot;</span>,<br>      <span class="hljs-attr">item</span>: <span class="hljs-string">&quot;.card&quot;</span>,<br>      <span class="hljs-attr">gutter</span>: <span class="hljs-number">12</span>,<br>    &#125;);<br>    grid.<span class="hljs-title function_">mount</span>();<br>    $(<span class="hljs-variable language_">window</span>).<span class="hljs-title function_">resize</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      grid.<span class="hljs-title function_">mount</span>();<br>    &#125;);<br>  &#125;,<br>&#125;;<br>photo.<span class="hljs-title function_">init</span>();<br></code></pre></div></td></tr></table></figure>然后使用注册器将需要的js,css注入,在scripts&#x2F;injector.js(如没有,则创建)中输入以下内容:<figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> js = hexo.<span class="hljs-property">extend</span>.<span class="hljs-property">helper</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;js&#x27;</span>).<span class="hljs-title function_">bind</span>(hexo);<br><span class="hljs-keyword">const</span> css = hexo.<span class="hljs-property">extend</span>.<span class="hljs-property">helper</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;css&#x27;</span>).<span class="hljs-title function_">bind</span>(hexo);<br><br><br>hexo.<span class="hljs-property">extend</span>.<span class="hljs-property">injector</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;head_end&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">css</span>(<span class="hljs-string">&#x27;https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css&#x27;</span>);<br>&#125;, <span class="hljs-string">&#x27;photo&#x27;</span>);<br>hexo.<span class="hljs-property">extend</span>.<span class="hljs-property">injector</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;head_end&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">js</span>(<span class="hljs-string">&#x27;https://cdn.jsdelivr.net/npm/jquery@3/dist/&#x27;</span>);<br>  &#125;, <span class="hljs-string">&#x27;photo&#x27;</span>);<br>hexo.<span class="hljs-property">extend</span>.<span class="hljs-property">injector</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;head_end&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>     <span class="hljs-keyword">return</span> <span class="hljs-title function_">js</span>(<span class="hljs-string">&#x27;https://cdn.bootcdn.net/ajax/libs/lazyloadjs/3.2.2/lazyload.js&#x27;</span>);<br>&#125;, <span class="hljs-string">&#x27;photo&#x27;</span>);<br>hexo.<span class="hljs-property">extend</span>.<span class="hljs-property">injector</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;head_end&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>   <span class="hljs-keyword">return</span> <span class="hljs-title function_">js</span>(<span class="hljs-string">&#x27;https://cdn.jsdelivr.net/npm/minigrid@3.1.1/dist/minigrid.min.js&#x27;</span>);<br>&#125;, <span class="hljs-string">&#x27;photo&#x27;</span>);<br>hexo.<span class="hljs-property">extend</span>.<span class="hljs-property">injector</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">&#x27;body_end&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">js</span>(<span class="hljs-string">&#x27;/js/photoWall.js&#x27;</span>);  <br>&#125;,<span class="hljs-string">&quot;photo&quot;</span>);<br></code></pre></div></td></tr></table></figure>至此博客相册功能已经完成</li></ul><h1 id="页面自定义"><a href="#页面自定义" class="headerlink" title="页面自定义"></a>页面自定义</h1><p> hexo框架基本具备了博客搭建的基本功能，通常情况我们修改配置就可以了，但是为了使页面更美观，我们通常情况下会自定义页面，你可以自己编写css、js等，通过主题配置引入，具体方法参见主题文档。也可以使用注入器来自定义页面，参考文档：<a href="https://hexo.io/zh-cn/api/injector.html">https://hexo.io/zh-cn/api/injector.html</a></p>]]></content>
    
    
    <categories>
      
      <category>hexo配置</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo配置</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vue+websocket+Echarts的电商项目</title>
    <link href="/2022/06/18/echarts/echarts%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE/"/>
    <url>/2022/06/18/echarts/echarts%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p class="note note-warning">此项目根据黑马程序员视频教程编写。在此致谢黑马程序员，黑马程序员B站链接：<a href="https://space.bilibili.com/37974444?spm_id_from=333.337.0.0" style="color:#428bca;">点击进入>>></a><br>此项目在线地址：<a href="http://echarts.starhe.xyz/#/" style="color:#428bca;">http://echarts.starhe.xyz</a><br>github仓库：<a href="https://github.com/hzx17/echarts/tree/master/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E9%A1%B9%E7%9B%AE" style="color:#428bca;">https://github.com/hzx17/echarts/</a></p><h1 id="项目介绍"><a href="#项目介绍" class="headerlink" title="项目介绍"></a>项目介绍</h1><p>  在生活以图表的形式更能给人直观的感受。此项目基于vue2，利用websocket与echarts来开发的。<br><img src="http://imghe.xyz/img/echarts%E7%94%B5%E5%95%86.png" alt="项目截图"></p><h1 id="后端项目开发"><a href="#后端项目开发" class="headerlink" title="后端项目开发"></a>后端项目开发</h1><ul><li>后端项目基于koa2框架开发</li></ul><h2 id="koa2框架介绍"><a href="#koa2框架介绍" class="headerlink" title="koa2框架介绍"></a>koa2框架介绍</h2><ul><li>基于Node.js平台的web开发框架</li><li>由express原班人马打造的，express异步是通过回调函数来实现的</li><li>koa异步处理是通过Generator+yieid实现的</li><li>koa2是通过async与await语法糖来实现的（node版本需要在7.6以上）</li><li>支持洋葱模型的中间件</li></ul><h2 id="后台项目结构"><a href="#后台项目结构" class="headerlink" title="后台项目结构"></a>后台项目结构</h2><div class="hljs code-wrapper"><pre><code class="hljs">   - app.js --运行文件   - data/  --向前端返回的json数据   - middleware/ -- 中间件      - koa_response_data.js       - koa_response_duration.js      - koa_response_header.js   - utils/ --处理函数      - file_utils.js   - service --存放websocket</code></pre></div><h2 id="代码编写"><a href="#代码编写" class="headerlink" title="代码编写"></a>代码编写</h2><p>在最开始时，我们并未引入websocket，而是前端通过axios请求来向后台请求数据，我们将最基本的接口与前端页面编写完成，再来通过websocket来对项目进行websocket改造。接口实现通过前端发来的请求名，来查询data文件下的json文件。具体实现过程比较简单，可以查看我的github仓库中middleware中中间件代码的编写。</p><h1 id="前端项目页面的基本开发"><a href="#前端项目页面的基本开发" class="headerlink" title="前端项目页面的基本开发"></a>前端项目页面的基本开发</h1><ul><li>我们前台项目由六个页面组成，我们首先进行单独页面的开发，再将六个页面整合到一个页面。</li></ul><h2 id="切换主题的实现"><a href="#切换主题的实现" class="headerlink" title="切换主题的实现"></a>切换主题的实现</h2><p>在echarts官网中下载chalk与vintage两个主题，当然你也可以下载更多的主题来进行切换选择，将主题名存入vuex中theme，注册echarts图表时，传入的主题名为vuex中theme，当切换主题时，就完成了主题切换，当然点击切换主题时，要通过监视属性来监视vuex中theme的改变。将原有的图表销毁，重新调用创建图表的方法。</p><h1 id="利用websocket改造项目"><a href="#利用websocket改造项目" class="headerlink" title="利用websocket改造项目"></a>利用websocket改造项目</h1><h2 id="后台项目"><a href="#后台项目" class="headerlink" title="后台项目"></a>后台项目</h2><ul><li>创建sevice文件，其下创建一个web_socket_serive.js来监听客户端的请求，代码如下  <figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// webSocket使用步骤：</span><br><span class="hljs-comment">//    1.引入ws包</span><br><span class="hljs-comment">//    2.创建对象</span><br><span class="hljs-comment">//    3.监听事件 </span><br><span class="hljs-comment">//         - 连接事件</span><br><span class="hljs-comment">//         - 接收数据事件</span><br><span class="hljs-comment">//    4.发送数据</span><br><span class="hljs-keyword">const</span> path =<span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>)<br><span class="hljs-keyword">const</span> fileUtils=<span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;../utils/file_utils.js&#x27;</span>)<br><span class="hljs-keyword">const</span> webSocket=<span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;ws&#x27;</span>) <span class="hljs-comment">// 引入webSocket</span><br><span class="hljs-comment">// 创建webSocket服务器对象，绑定的端口号时9998</span><br><span class="hljs-keyword">const</span> wss = <span class="hljs-keyword">new</span> webSocket.<span class="hljs-title class_">Server</span>(&#123;<br>  <span class="hljs-attr">port</span>:<span class="hljs-number">9998</span><br>&#125;)<br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>.<span class="hljs-property">listen</span> = <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-comment">// 监听客户端连接事件</span><br>  wss.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;connection&#x27;</span>,<span class="hljs-function"><span class="hljs-params">client</span> =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;客户端连接成功...&#x27;</span>)<br>    <span class="hljs-comment">// msg:由客户端发送个服务端的数据</span><br>    client.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;message&#x27;</span>, <span class="hljs-keyword">async</span> msg =&gt; &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;客户端发送了数据：&#x27;</span>+msg)<br>      <span class="hljs-keyword">let</span> payload = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(msg)  <span class="hljs-comment">// 将前端发送而来的数据接收</span><br>      <span class="hljs-keyword">const</span> action = payload.<span class="hljs-property">action</span><br>      <span class="hljs-keyword">if</span> (action === <span class="hljs-string">&#x27;getData&#x27;</span>) &#123;<br>        <span class="hljs-keyword">let</span> filePath = <span class="hljs-string">&#x27;../data/&#x27;</span> +payload.<span class="hljs-property">chartName</span> + <span class="hljs-string">&#x27;.json&#x27;</span>     <span class="hljs-comment">// 选择的图表路径</span><br>        <span class="hljs-keyword">const</span> ret = <span class="hljs-keyword">await</span> fileUtils.<span class="hljs-title function_">getFileJsonData</span>(filePath)<br>        payload.<span class="hljs-property">data</span> = ret  <span class="hljs-comment">// 增加一个data字段，这个字段就是要返回的json文件内容</span><br>        client.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(payload))<br>      &#125;<span class="hljs-keyword">else</span> &#123; <br>        <span class="hljs-comment">// 原封不动的将所接收到的数据发送到所连接到的客户端</span><br>        wss.<span class="hljs-property">clients</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">client</span> =&gt;</span> &#123;<br>          client.<span class="hljs-title function_">send</span>(msg)<br>        &#125;)<br>      &#125;<br>    &#125;)<br>  &#125;)<br>&#125;<br></code></pre></div></td></tr></table></figure></li><li>在app.js中开启websocket监听</li></ul><h2 id="前台项目"><a href="#前台项目" class="headerlink" title="前台项目"></a>前台项目</h2><ul><li>创建一个utils文件，其下创建一个socket_service.js来连接websocket<figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SocketService</span> &#123;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">  * 单类</span><br><span class="hljs-comment">  * */</span><br>  <span class="hljs-keyword">static</span> instance = <span class="hljs-literal">null</span><br>  <span class="hljs-keyword">static</span> get <span class="hljs-title class_">Instance</span> () &#123;<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SocketService</span>()<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span><br>  &#125;<br><br>  ws = <span class="hljs-literal">null</span> <span class="hljs-comment">// 和服务器连接的Socket对象</span><br>  connected = <span class="hljs-literal">false</span> <span class="hljs-comment">// 标识是否连接成功</span><br>  sendRetry = <span class="hljs-number">0</span> <span class="hljs-comment">// 记录尝试发送数据次数</span><br>  connectRetry = <span class="hljs-number">0</span> <span class="hljs-comment">// 记录尝试重连次数</span><br>  <span class="hljs-comment">// 存储回调函数</span><br>  callBackMapping = &#123;&#125;<br>  <span class="hljs-comment">/* 连接客户端的方法 */</span><br>  connect () &#123;<br>    <span class="hljs-comment">// 连接服务器</span><br>    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">WebSocket</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;你的浏览器不支持WebSocket&#x27;</span>)<br>    &#125;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">ws</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-string">&#x27;ws://43.138.103.76:9998&#x27;</span>)<br><br>    <span class="hljs-comment">// 连接成功的事件</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">ws</span>.<span class="hljs-property">onopen</span> = <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;连接服务器成功...&#x27;</span>)<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">connected</span> = <span class="hljs-literal">true</span><br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectRetry</span> = <span class="hljs-number">0</span><br>    &#125;<br>    <span class="hljs-comment">// 连接失败的事件</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">ws</span>.<span class="hljs-property">onclose</span> = <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;连接服务器失败了&#x27;</span>)<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">connected</span> = <span class="hljs-literal">false</span><br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">connectRetry</span>++<br>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">connectRetry</span> &lt; <span class="hljs-number">5</span>) &#123;<br>        <span class="hljs-comment">// 重连尝试</span><br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">connect</span>()<br>        &#125;, <span class="hljs-number">1000</span>)<br>      &#125;<br>    &#125;<br>    <span class="hljs-comment">// 得到服务端发送过来的数据</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">ws</span>.<span class="hljs-property">onmessage</span> = <span class="hljs-function"><span class="hljs-params">msg</span> =&gt;</span> &#123;<br>      <span class="hljs-comment">// console.log(&#x27;从服务器端接收到了数据...&#x27; + msg.data)</span><br>      <span class="hljs-keyword">const</span> recvData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(msg.<span class="hljs-property">data</span>)<br>      <span class="hljs-keyword">const</span> socketType = recvData.<span class="hljs-property">socketType</span><br>      <span class="hljs-comment">// 判断回调函数是否存在</span><br>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">callBackMapping</span>[socketType]) &#123;<br>        <span class="hljs-keyword">const</span> action = recvData.<span class="hljs-property">action</span><br>        <span class="hljs-keyword">if</span> (action === <span class="hljs-string">&#x27;getData&#x27;</span>) &#123;<br>          <span class="hljs-keyword">const</span> realData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(recvData.<span class="hljs-property">data</span>)<br>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">callBackMapping</span>[socketType].<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, realData)<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (action === <span class="hljs-string">&#x27;fullScreen&#x27;</span>) &#123;<br>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">callBackMapping</span>[socketType].<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, recvData)<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (action === <span class="hljs-string">&#x27;themeChange&#x27;</span>) &#123;<br>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">callBackMapping</span>[socketType].<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>)<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 回调函数的注册</span><br>  registerCallBack (socketType, callBack) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callBackMapping</span>[socketType] = callBack<br>  &#125;<br><br>  <span class="hljs-comment">// 取消回调函数</span><br>  unRegisterCallBack (socketType, callBack) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callBackMapping</span>[socketType] = <span class="hljs-literal">null</span><br>  &#125;<br><br>  <span class="hljs-comment">// 发送数据的方法</span><br>  send (data) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">connected</span>) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">ws</span>.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data))<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">sendRetry</span>++<br>      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">ws</span>.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data))<br>      &#125;, <span class="hljs-variable language_">this</span>.<span class="hljs-property">sendRetry</span> * <span class="hljs-number">300</span>)<br>    &#125;<br>  &#125;<br>&#125;<br><br></code></pre></div></td></tr></table></figure></li><li>在vue的created生命周期内调用this.$socket.registerCallBack(‘rankData’, this.getData)将获取数据的函数作为回调函数，this.getData就成为callBackMapping存储函数，在调用发送数据的方法数据就会存储到callBackMapping ，也就是this.getData</li></ul><h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><p>echarts的基本使用：<a href="http://starhe.xyz/2022/06/11/echarts/echarts基本图表的使用/" style="color:#428bca;">http://starhe.xyz/2022/06/11/echarts/echarts基本图表的使用/</a><br>利用宝塔面板上线项目：<a href="http://starhe.xyz/2022/06/17/宝塔面板/利用宝塔面板上线项目/" style="color:#428bca;">http://starhe.xyz/2022/06/17/宝塔面板/利用宝塔面板上线项目/</a></p>]]></content>
    
    
    <categories>
      
      <category>Echarts</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Echarts</tag>
      
      <tag>项目</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>利用宝塔面板上线项目</title>
    <link href="/2022/06/17/%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF/%E5%88%A9%E7%94%A8%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF%E4%B8%8A%E7%BA%BF%E9%A1%B9%E7%9B%AE/"/>
    <url>/2022/06/17/%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF/%E5%88%A9%E7%94%A8%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF%E4%B8%8A%E7%BA%BF%E9%A1%B9%E7%9B%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><p>利用宝塔面板上线项目，我们要一个服务器与已经备案的域名。</p><h1 id="宝塔面板连接服务器"><a href="#宝塔面板连接服务器" class="headerlink" title="宝塔面板连接服务器"></a>宝塔面板连接服务器</h1><p>我连接服务器是通过xshell7软件连接的，点击新建会话<br><img src="http://imghe.xyz/img/xshell7%E4%BC%9A%E8%AF%9D.png" alt="新建会话"><br>打开宝塔面板官网：<a href="https://bt.cn/">https://bt.cn/</a><br><img src="http://imghe.xyz/img/btbtbt.png" alt="宝塔面板"><br>我的服务器创建的是linux实例，所以选择下载第一个，在选择下载时一定要查看，自己的服务器实例。<br><img src="http://imghe.xyz/img/btlinux.png" alt="下载"><br>在Xshell终端输入下载命令<br><img src="http://imghe.xyz//img/xhelldos.png" alt="xhell终端"><br>当生成外网面板及内网面板时，就代表面板安装成功。我们将其保存在txt文本中，方便以后访问<br><img src="http://imghe.xyz/img/bttxt.png" alt="保存"><br>访问面板首页，安装软件，开放8888端口</p><h1 id="静态网站"><a href="#静态网站" class="headerlink" title="静态网站"></a>静态网站</h1><p>点击网站》添加站点<br><img src="http://imghe.xyz/img/%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0.png" alt="添加站点"></p><h1 id="部署node项目"><a href="#部署node项目" class="headerlink" title="部署node项目"></a>部署node项目</h1><p>在宝塔面板中的软件商店搜索PM2软件并安装。数据库等等依据个人项目进行设置。选择添加项目<br><img src="http://imghe.xyz/img/nodew.png" alt="添加站点"><br>选择模块》点击一键添加模块<br><img src="http://imghe.xyz/img/nodee.png" alt="添加站点"></p><p class="note note-warning">备案的域名一定要去做域名解析，项目部署完成以后一定要在开放其端口<a>]]></content>
    
    
    <categories>
      
      <category>宝塔面板</category>
      
    </categories>
    
    
    <tags>
      
      <tag>宝塔面板</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>一文搞定Echarts种7种基本图表</title>
    <link href="/2022/06/11/echarts/echarts%E5%9F%BA%E6%9C%AC%E5%9B%BE%E8%A1%A8%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/06/11/echarts/echarts%E5%9F%BA%E6%9C%AC%E5%9B%BE%E8%A1%A8%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h1><h2 id="数据可视化概念和作用"><a href="#数据可视化概念和作用" class="headerlink" title="数据可视化概念和作用"></a>数据可视化概念和作用</h2><ol><li>将数据以图表的形式呈现</li><li>更有效的传递数据中的信息</li></ol><h2 id="常见的可视化工具有"><a href="#常见的可视化工具有" class="headerlink" title="常见的可视化工具有"></a>常见的可视化工具有</h2><ul><li>报表类</li><li>BI类</li><li>编程类</li></ul><h2 id="ECharts介绍"><a href="#ECharts介绍" class="headerlink" title="ECharts介绍"></a>ECharts介绍</h2><p>   ECharts是一个javascript实现的开源可视化库，兼容性强，底层依靠矢量图形库ZRender，提供直观，交互丰富，可高度定制的数据可视化图表。<br>   ECharts 能够做出各种各样漂亮的图表，它能满足绝大多数可视化图表的实现.它的兼容性强, 使用方便, 功能强大, 是实现数据可视化的最佳选择之一, 更多特点和介绍可以查阅官网地址：<a href="https://echarts.apache.org/zh/index.html">https://echarts.apache.org/zh/index.html</a></p><h1 id="ECharts中常用的图表"><a href="#ECharts中常用的图表" class="headerlink" title="ECharts中常用的图表"></a>ECharts中常用的图表</h1><ul><li>柱状图<br>   <img src="http://imghe.xyz//img/echarts%E6%9F%B1%E7%8A%B6%E5%9B%BE.png" alt="柱状图"></li><li>折线图<br>   <img src="http://imghe.xyz//img/echarts%E6%8A%98%E7%BA%BF%E5%9B%BE.png" alt="折线图"></li><li>散点图<br>   <img src="http://imghe.xyz//img/echarts%E6%95%A3%E7%82%B9%E5%9B%BE.png" alt="散点图"></li><li>饼图<br>   <img src="http://imghe.xyz//img/echarts%E9%A5%BC%E5%9B%BE.png" alt="饼图"></li><li>地图<br>   <img src="http://imghe.xyz//img/echarts%E5%9C%B0%E5%9B%BE.png" alt="地图"></li><li>雷达图<br>   <img src="http://imghe.xyz//img/echarts%E9%9B%B7%E8%BE%BE%E5%9B%BE.png" alt="雷达图"></li><li>仪表盘<br>   <img src="http://imghe.xyz//img/echarts%E4%BB%AA%E8%A1%A8%E7%9B%98.png" alt="仪表盘"></li></ul><h2 id="柱状图的基本实现"><a href="#柱状图的基本实现" class="headerlink" title="柱状图的基本实现"></a>柱状图的基本实现</h2><p>  将series配置项type设置为‘bar’</p><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 引入echarts.min.js --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../lib/echarts.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 创建echarts容器 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 600px; height: 400px;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// 创建echarts实例</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> mEchart=echarts.<span class="hljs-title function_">init</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;div&#x27;</span>))</span><br><span class="language-javascript">    <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">     * 创建x轴与y轴数据</span></span><br><span class="hljs-comment"><span class="language-javascript">     */</span></span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> xDataArr = [<span class="hljs-string">&#x27;张三&#x27;</span>, <span class="hljs-string">&#x27;李四&#x27;</span>, <span class="hljs-string">&#x27;王五&#x27;</span>, <span class="hljs-string">&#x27;闰土&#x27;</span>, <span class="hljs-string">&#x27;小明&#x27;</span>, <span class="hljs-string">&#x27;茅台&#x27;</span>, <span class="hljs-string">&#x27;二妞&#x27;</span>, <span class="hljs-string">&#x27;大强&#x27;</span>];</span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> yDataArr = [<span class="hljs-number">88</span>, <span class="hljs-number">92</span>, <span class="hljs-number">63</span>, <span class="hljs-number">77</span>, <span class="hljs-number">94</span>, <span class="hljs-number">80</span>, <span class="hljs-number">72</span>, <span class="hljs-number">86</span>];</span><br><span class="language-javascript">    <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">     * 准备配置项</span></span><br><span class="hljs-comment"><span class="language-javascript">     */</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> option=&#123;</span><br><span class="language-javascript">      <span class="hljs-attr">xAxis</span>:&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;category&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:xDataArr</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-attr">yAxis</span>:&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;value&#x27;</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-attr">series</span>:&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;成绩&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;bar&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">barWidth</span>: <span class="hljs-string">&#x27;30%&#x27;</span>, <span class="hljs-comment">// 柱的宽度</span></span><br><span class="language-javascript">        <span class="hljs-attr">label</span>: &#123; <span class="hljs-comment">// 柱状图上的文字设置</span></span><br><span class="language-javascript">            <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 是否显示</span></span><br><span class="language-javascript">            <span class="hljs-attr">rotate</span>: <span class="hljs-number">60</span>, <span class="hljs-comment">// 旋转角度</span></span><br><span class="language-javascript">            <span class="hljs-attr">position</span>: <span class="hljs-string">&#x27;top&#x27;</span> <span class="hljs-comment">// 显示位置</span></span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">markPoint</span>:&#123;</span><br><span class="language-javascript">          <span class="hljs-attr">data</span>:[</span><br><span class="language-javascript">            &#123;<span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;min&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;最小值&#x27;</span>&#125;,</span><br><span class="language-javascript">            &#123;<span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;max&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;最大值&#x27;</span>&#125;</span><br><span class="language-javascript">          ]</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">markLine</span>:&#123;</span><br><span class="language-javascript">          <span class="hljs-attr">data</span>:[</span><br><span class="language-javascript">            &#123;       <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;平均线&#x27;</span>,</span><br><span class="language-javascript">              <span class="hljs-comment">// 支持 &#x27;average&#x27;, &#x27;min&#x27;, &#x27;max&#x27;</span></span><br><span class="language-javascript">             <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;average&#x27;</span>&#125;</span><br><span class="language-javascript">          ]</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:yDataArr</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    mEchart.<span class="hljs-title function_">setOption</span>(option);</span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></div></td></tr></table></figure><h2 id="折线图的实现"><a href="#折线图的实现" class="headerlink" title="折线图的实现"></a>折线图的实现</h2><ul><li>与柱状图类似将type设置为‘line’就行了</li><li>常见配置：markPoint,markLine,markArea(标注区间),smooth(是否为平滑曲线),lineStyle(线条样式),areaStyle(线与x轴的样式，填充风格),…..堆叠图（stack），在x与y轴设置 scale: true（忽略多余值）<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;lib/echarts.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 600px;height: 400px&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//1. ECharts最基本的代码结构</span></span><br><span class="language-javascript">    <span class="hljs-comment">//2. x轴数据:[&#x27;1月&#x27;, &#x27;2月&#x27;, &#x27;3月&#x27;, &#x27;4月&#x27;, &#x27;5月&#x27;, &#x27;6月&#x27;, &#x27;7月&#x27;, &#x27;8月&#x27;, &#x27;9月&#x27;, &#x27;10月&#x27;, &#x27;11月&#x27;, &#x27;12月&#x27;]</span></span><br><span class="language-javascript">    <span class="hljs-comment">//3. y轴数据:[3000, 2800, 900, 1000, 800, 700, 1400, 1300, 900, 1000, 800, 600]</span></span><br><span class="language-javascript">    <span class="hljs-comment">//4. 将type的值设置为line</span></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> mCharts = echarts.<span class="hljs-title function_">init</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;div&#x27;</span>))</span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> xDataArr = [<span class="hljs-string">&#x27;1月&#x27;</span>, <span class="hljs-string">&#x27;2月&#x27;</span>, <span class="hljs-string">&#x27;3月&#x27;</span>, <span class="hljs-string">&#x27;4月&#x27;</span>, <span class="hljs-string">&#x27;5月&#x27;</span>, <span class="hljs-string">&#x27;6月&#x27;</span>, <span class="hljs-string">&#x27;7月&#x27;</span>, <span class="hljs-string">&#x27;8月&#x27;</span>, <span class="hljs-string">&#x27;9月&#x27;</span>, <span class="hljs-string">&#x27;10月&#x27;</span>, <span class="hljs-string">&#x27;11月&#x27;</span>, <span class="hljs-string">&#x27;12月&#x27;</span>]</span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> yDataArr = [<span class="hljs-number">3000</span>, <span class="hljs-number">2800</span>, <span class="hljs-number">900</span>, <span class="hljs-number">1000</span>, <span class="hljs-number">800</span>, <span class="hljs-number">700</span>, <span class="hljs-number">1400</span>, <span class="hljs-number">1300</span>, <span class="hljs-number">900</span>, <span class="hljs-number">1000</span>, <span class="hljs-number">800</span>, <span class="hljs-number">600</span>]</span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> option = &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">xAxis</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;category&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>: xDataArr</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-attr">yAxis</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;value&#x27;</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-attr">series</span>: [</span><br><span class="language-javascript">        &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;康师傅&#x27;</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">data</span>: yDataArr,</span><br><span class="language-javascript">          <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;line&#x27;</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">markPoint</span>: &#123; <span class="hljs-comment">// 标记点</span></span><br><span class="language-javascript">            <span class="hljs-attr">data</span>: [</span><br><span class="language-javascript">              &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;max&#x27;</span></span><br><span class="language-javascript">              &#125;,</span><br><span class="language-javascript">              &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;min&#x27;</span></span><br><span class="language-javascript">              &#125;</span><br><span class="language-javascript">            ]</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">          <span class="hljs-attr">markLine</span>: &#123; <span class="hljs-comment">// 标记线</span></span><br><span class="language-javascript">            <span class="hljs-attr">data</span>: [</span><br><span class="language-javascript">              &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;average&#x27;</span></span><br><span class="language-javascript">              &#125;</span><br><span class="language-javascript">            ]</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">          <span class="hljs-attr">markArea</span>: &#123; <span class="hljs-comment">// 标记区域</span></span><br><span class="language-javascript">            <span class="hljs-attr">data</span>: [</span><br><span class="language-javascript">              [</span><br><span class="language-javascript">                &#123;</span><br><span class="language-javascript">                  <span class="hljs-attr">xAxis</span>: <span class="hljs-string">&#x27;1月&#x27;</span></span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                &#123;</span><br><span class="language-javascript">                  <span class="hljs-attr">xAxis</span>: <span class="hljs-string">&#x27;2月&#x27;</span></span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">              ],</span><br><span class="language-javascript">              [</span><br><span class="language-javascript">                &#123;</span><br><span class="language-javascript">                  <span class="hljs-attr">xAxis</span>: <span class="hljs-string">&#x27;7月&#x27;</span></span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                &#123;</span><br><span class="language-javascript">                  <span class="hljs-attr">xAxis</span>: <span class="hljs-string">&#x27;8月&#x27;</span></span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">              ]</span><br><span class="language-javascript">            ]</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">          <span class="hljs-attr">smooth</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 是否为平滑线</span></span><br><span class="language-javascript">          <span class="hljs-attr">lineStyle</span>: &#123; <span class="hljs-comment">// 线的样式设置</span></span><br><span class="language-javascript">            <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;green&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;solid&#x27;</span> <span class="hljs-comment">// dashed dotted solid</span></span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">          <span class="hljs-attr">areaStyle</span>: &#123; <span class="hljs-comment">// 线和x轴形成的区域设置</span></span><br><span class="language-javascript">            <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;pink&#x27;</span></span><br><span class="language-javascript">          &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      ]</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    mCharts.<span class="hljs-title function_">setOption</span>(option)</span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li></ul><h2 id="散点图基本实现"><a href="#散点图基本实现" class="headerlink" title="散点图基本实现"></a>散点图基本实现</h2><ul><li>散点图的概念：可以帮助我们推断出变量的相关性（例如身高与体重的关系）</li><li>x轴，y轴数据为二维数据</li><li>在series配置项下设置为type：scatter， 注意xAxis与yAxis的type都要设置为value</li><li>常见效果：散点气泡,在series中设置配置项。涟漪动画，在series中设置<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;lib/echarts.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 600px;height:400px&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//1. ECharts最基本的代码结构</span></span><br><span class="language-javascript">    <span class="hljs-comment">//2. x轴和y轴数据 二维数组 [ [身高,体重],...   ]</span></span><br><span class="language-javascript">    <span class="hljs-comment">//3. 将type的值设置为scatter, x轴和y轴的type都是value</span></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> data=[&#123; <span class="hljs-string">&quot;gender&quot;</span>: <span class="hljs-string">&quot;female&quot;</span>, <span class="hljs-string">&quot;height&quot;</span>: <span class="hljs-number">161.2</span>, <span class="hljs-string">&quot;weight&quot;</span>: <span class="hljs-number">51.6</span> &#125;,&#123; <span class="hljs-string">&quot;gender&quot;</span>: <span class="hljs-string">&quot;female&quot;</span>, <span class="hljs-string">&quot;height&quot;</span>: <span class="hljs-number">161.2</span>, <span class="hljs-string">&quot;weight&quot;</span>: <span class="hljs-number">51.6</span> &#125; .................] <span class="hljs-comment">//散点数据补充</span></span><br><span class="language-javascript">   <span class="hljs-keyword">var</span> axisData = []</span><br><span class="language-javascript">    <span class="hljs-keyword">for</span>( <span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;data.<span class="hljs-property">length</span>;i++) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> height = data[i].<span class="hljs-property">height</span></span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> weight = data[i].<span class="hljs-property">weight</span></span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> newArr = [height, weight]</span><br><span class="language-javascript">      axisData.<span class="hljs-title function_">push</span>(newArr)</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(axisData)</span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> mCharts = echarts.<span class="hljs-title function_">init</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;div&quot;</span>))</span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> option = &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">xAxis</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;value&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">scale</span>: <span class="hljs-literal">true</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-attr">yAxis</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;value&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">scale</span>: <span class="hljs-literal">true</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-attr">series</span>: [</span><br><span class="language-javascript">        &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;scatter&#x27;</span>, <span class="hljs-comment">// 指明图表的类型为散点图</span></span><br><span class="language-javascript">          <span class="hljs-attr">data</span>: axisData</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      ]</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    mCharts.<span class="hljs-title function_">setOption</span>(option)</span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></div></td></tr></table></figure><h2 id="饼图的实现"><a href="#饼图的实现" class="headerlink" title="饼图的实现"></a>饼图的实现</h2></li><li>数据准备：一个数组，数组内为对象</li><li>图表类型为 ：type:’pie’   <figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html">   <span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;lib/echarts.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 600px;height:400px&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//1. ECharts最基本的代码结构</span></span><br><span class="language-javascript">    <span class="hljs-comment">//2. 准备数据[&#123;name:???, value:??? &#125;,&#123;&#125;]</span></span><br><span class="language-javascript">    <span class="hljs-comment">//   淘宝: 11231  京东: 22673  唯品会: 6123  1号店: 8989   聚美优品: 6700</span></span><br><span class="language-javascript">    <span class="hljs-comment">//3. 将type的值设置为pie</span></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> mCharts = echarts.<span class="hljs-title function_">init</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;div&quot;</span>))</span><br><span class="language-javascript">    <span class="hljs-comment">// pieData就是需要设置给饼图的数据, 数组,数组中包含一个又一个的对象, 每一个对象中, 需要有name和value</span></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> pieData = [</span><br><span class="language-javascript">      &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;淘宝&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">value</span>: <span class="hljs-number">11231</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;京东&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">value</span>: <span class="hljs-number">22673</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;唯品会&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">value</span>: <span class="hljs-number">6123</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;1号店&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">value</span>: <span class="hljs-number">8989</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;聚美优品&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">value</span>: <span class="hljs-number">6700</span></span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    ]</span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> option = &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">series</span>: [</span><br><span class="language-javascript">        &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;pie&#x27;</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">data</span>: pieData,</span><br><span class="language-javascript">          <span class="hljs-attr">label</span>: &#123; <span class="hljs-comment">// 饼图文字的显示</span></span><br><span class="language-javascript">            <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 显示文字</span></span><br><span class="language-javascript">            <span class="hljs-comment">//formatter: &#x27;hehe&#x27; // 决定文字显示的内容</span></span><br><span class="language-javascript">            <span class="hljs-attr">formatter</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">arg</span>)&#123;</span><br><span class="language-javascript">              <span class="hljs-comment">// console.log(arg)</span></span><br><span class="language-javascript">              <span class="hljs-keyword">return</span> arg.<span class="hljs-property">name</span> + <span class="hljs-string">&#x27;平台&#x27;</span> + arg.<span class="hljs-property">value</span> + <span class="hljs-string">&#x27;元\n&#x27;</span> + arg.<span class="hljs-property">percent</span> + <span class="hljs-string">&#x27;%&#x27;</span></span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">          <span class="hljs-comment">// radius: 20 // 饼图的半径</span></span><br><span class="language-javascript">          <span class="hljs-comment">// radius: &#x27;20%&#x27; // 百分比参照的是宽度和高度中较小的那一部分的一半来进行百分比设置</span></span><br><span class="language-javascript">          <span class="hljs-comment">// radius: [&#x27;50%&#x27;, &#x27;75%&#x27;] // 第0个元素代表的是內圆的半径 第1个元素外圆的半径</span></span><br><span class="language-javascript">          <span class="hljs-attr">roseType</span>: <span class="hljs-string">&#x27;radius&#x27;</span>, <span class="hljs-comment">// 南丁格尔图 饼图的每一个区域的半径是不同的</span></span><br><span class="language-javascript">          <span class="hljs-comment">// selectedMode: &#x27;single&#x27; // 选中的效果,能够将选中的区域偏离圆点一小段距离</span></span><br><span class="language-javascript">          <span class="hljs-attr">selectedMode</span>: <span class="hljs-string">&#x27;multiple&#x27;</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">selectedOffset</span>: <span class="hljs-number">30</span></span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      ]</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    mCharts.<span class="hljs-title function_">setOption</span>(option)</span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li></ul><h2 id="地图的实现"><a href="#地图的实现" class="headerlink" title="地图的实现"></a>地图的实现</h2><ul><li>地图的使用有两种方式：百度地图API，矢量地图</li><li>步骤<ol><li>ECharts最基本的代码结构</li><li>准备中国地图的矢量数据</li><li>使用Ajax获取矢量地图数据</li><li>在Ajax的回调函数中注册地图矢量数据 echarts.registerMap(‘chinaMap’, 矢量地图数据)</li><li>配置geo的type为’map’, map为’chinaMap’</li></ol></li><li>常见效果：<ol><li>显示某个区域</li><li>不同城市空气质量来显示不同颜色</li><li>地图和散点图的结合<figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../lib/echarts.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../lib/jquery.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 600px;height:400px;border: 1px solid #f00&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//1. ECharts最基本的代码结构</span></span><br><span class="language-javascript">    <span class="hljs-comment">//2. 准备中国地图的矢量数据</span></span><br><span class="language-javascript">    <span class="hljs-comment">//3. 使用Ajax获取矢量地图数据</span></span><br><span class="language-javascript">    <span class="hljs-comment">//4. 在Ajax的回调函数中注册地图矢量数据 echarts.registerMap(&#x27;chinaMap&#x27;, 矢量地图数据)</span></span><br><span class="language-javascript">    <span class="hljs-comment">//5. 配置geo的type为&#x27;map&#x27;, map为&#x27;chinaMap&#x27; </span></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> mCharts = echarts.<span class="hljs-title function_">init</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;div&quot;</span>))</span><br><span class="language-javascript">    $.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;json/map/china.json&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">ret</span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-comment">// ret 就是中国的各个省份的矢量地图数据</span></span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ret)</span><br><span class="language-javascript">      echarts.<span class="hljs-title function_">registerMap</span>(<span class="hljs-string">&#x27;chinaMap&#x27;</span>, ret)</span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> option = &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">geo</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;map&#x27;</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">map</span>: <span class="hljs-string">&#x27;chinaMap&#x27;</span>, <span class="hljs-comment">// chinaMap需要和registerMap中的第一个参数保持一致</span></span><br><span class="language-javascript">          <span class="hljs-attr">roam</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 设置允许缩放以及拖动的效果</span></span><br><span class="language-javascript">          <span class="hljs-attr">label</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// 展示标签</span></span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">          <span class="hljs-attr">zoom</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// 设置初始化的缩放比例</span></span><br><span class="language-javascript">          <span class="hljs-attr">center</span>: [<span class="hljs-number">87.617733</span>, <span class="hljs-number">43.792818</span>] <span class="hljs-comment">// 设置地图中心点的坐标</span></span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">      mCharts.<span class="hljs-title function_">setOption</span>(option)</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></div></td></tr></table></figure><h2 id="雷达图的实现"><a href="#雷达图的实现" class="headerlink" title="雷达图的实现"></a>雷达图的实现</h2><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;lib/echarts.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 600px;height:400px&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//1. ECharts最基本的代码结构</span></span><br><span class="language-javascript">    <span class="hljs-comment">//2. 定义各个维度的最大值, 通过radar属性配置</span></span><br><span class="language-javascript">    <span class="hljs-comment">//   易用性,功能,拍照,跑分,续航, 每个维度的最大值都是100</span></span><br><span class="language-javascript">    <span class="hljs-comment">//3. 准备产品数据, 设置给series下的data</span></span><br><span class="language-javascript">    <span class="hljs-comment">//   华为手机1: 80, 90, 80, 82, 90</span></span><br><span class="language-javascript">    <span class="hljs-comment">//   中兴手机1: 70, 82, 75, 70, 78</span></span><br><span class="language-javascript">    <span class="hljs-comment">//4. 将type的值设置为radar</span></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> mCharts = echarts.<span class="hljs-title function_">init</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;div&quot;</span>))</span><br><span class="language-javascript">    <span class="hljs-comment">// 各个维度的最大值</span></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> dataMax = [</span><br><span class="language-javascript">      &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;易用性&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">max</span>: <span class="hljs-number">100</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;功能&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">max</span>: <span class="hljs-number">100</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;拍照&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">max</span>: <span class="hljs-number">100</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;跑分&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">max</span>: <span class="hljs-number">100</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;续航&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">max</span>: <span class="hljs-number">100</span></span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    ]</span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> option = &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">radar</span>: &#123; </span><br><span class="language-javascript">        <span class="hljs-attr">indicator</span>: dataMax, <span class="hljs-comment">// 配置各个维度的最大值</span></span><br><span class="language-javascript">        <span class="hljs-attr">shape</span>: <span class="hljs-string">&#x27;polygon&#x27;</span> <span class="hljs-comment">// 配置雷达图最外层的图形 circle polygon</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-attr">series</span>: [</span><br><span class="language-javascript">        &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;radar&#x27;</span>, <span class="hljs-comment">// radar 此图表时一个雷达图</span></span><br><span class="language-javascript">          <span class="hljs-attr">label</span>: &#123; <span class="hljs-comment">// 设置标签的样式</span></span><br><span class="language-javascript">            <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// 显示数值</span></span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">          <span class="hljs-attr">areaStyle</span>: &#123;&#125;, <span class="hljs-comment">// 将每一个产品的雷达图形成阴影的面积</span></span><br><span class="language-javascript">          <span class="hljs-attr">data</span>: [</span><br><span class="language-javascript">            &#123;</span><br><span class="language-javascript">              <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;华为手机1&#x27;</span>,</span><br><span class="language-javascript">              <span class="hljs-attr">value</span>: [<span class="hljs-number">80</span>, <span class="hljs-number">90</span>, <span class="hljs-number">80</span>, <span class="hljs-number">82</span>, <span class="hljs-number">90</span>]</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            &#123;</span><br><span class="language-javascript">              <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;中兴手机1&#x27;</span>,</span><br><span class="language-javascript">              <span class="hljs-attr">value</span>: [<span class="hljs-number">70</span>, <span class="hljs-number">82</span>, <span class="hljs-number">75</span>, <span class="hljs-number">70</span>, <span class="hljs-number">78</span>]</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">          ]</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      ]</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    mCharts.<span class="hljs-title function_">setOption</span>(option)</span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></div></td></tr></table></figure><h2 id="仪表盘实现"><a href="#仪表盘实现" class="headerlink" title="仪表盘实现"></a>仪表盘实现</h2><figure class="highlight html"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ie=edge&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;lib/echarts.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 600px;height:400px&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//1. ECharts最基本的代码结构</span></span><br><span class="language-javascript">    <span class="hljs-comment">//2. 准备数据, 设置给series下的data</span></span><br><span class="language-javascript">    <span class="hljs-comment">//3. 将type的值设置为gauge</span></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> mCharts = echarts.<span class="hljs-title function_">init</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;div&quot;</span>))</span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> option = &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">series</span>: [</span><br><span class="language-javascript">        &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;gauge&#x27;</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">data</span>: [</span><br><span class="language-javascript">            &#123;</span><br><span class="language-javascript">              <span class="hljs-attr">value</span>: <span class="hljs-number">97</span>,</span><br><span class="language-javascript">              <span class="hljs-attr">itemStyle</span>: &#123; <span class="hljs-comment">// 指针的样式</span></span><br><span class="language-javascript">                <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;pink&#x27;</span> <span class="hljs-comment">// 指针的颜色</span></span><br><span class="language-javascript">              &#125;</span><br><span class="language-javascript">            &#125;, <span class="hljs-comment">// 每一个对象就代表一个指针</span></span><br><span class="language-javascript">            &#123;</span><br><span class="language-javascript">              <span class="hljs-attr">value</span>: <span class="hljs-number">85</span>,</span><br><span class="language-javascript">              <span class="hljs-attr">itemStyle</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;green&#x27;</span></span><br><span class="language-javascript">              &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">          ],</span><br><span class="language-javascript">          <span class="hljs-attr">min</span>: <span class="hljs-number">50</span> <span class="hljs-comment">// min max 控制仪表盘数值范围</span></span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      ]</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    mCharts.<span class="hljs-title function_">setOption</span>(option)</span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></div></td></tr></table></figure></li></ol></li></ul><h1 id="关于"><a href="#关于" class="headerlink" title="关于"></a>关于</h1><p>   echarts更重要的是配置项的配置，在实际开发过程请参考查阅官网地址：<a href="https://echarts.apache.org/zh/index.html">https://echarts.apache.org/zh/index.html</a></p>]]></content>
    
    
    <categories>
      
      <category>Echarts</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Echarts</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>javascript数据结构-搜索排序算法</title>
    <link href="/2022/05/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95/"/>
    <url>/2022/05/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%90%9C%E7%B4%A2%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p class="note note-warning">本博客参考于洛伊安妮·格罗纳编著的javascript数据结构与算法第三版及codeWay老师视频或其他博客资料，在此对此表示感谢!<br>github仓库：<a href="https://github.com/hzx17/DataStructures" style="color:#428bca;">https://github.com/hzx17/</a><p><h1 id="大O表示法"><a href="#大O表示法" class="headerlink" title="大O表示法"></a>大O表示法</h1><h3 id="大O表示法："><a href="#大O表示法：" class="headerlink" title="大O表示法："></a>大O表示法：</h3><p>在计算机中采用粗略的度量来描述计算机算法的效率，这种方法被称为“大O”表示法<br>在数据项个数发生改变时，算法的效率也会跟着改变。所以说算法A比算法B快两倍，这样的比较是没有意义的。<br>因此我们通常使用算法的速度随着数据量的变化会如何变化的方式来表示算法的效率，大O表示法就是方式之一。</p><h3 id="常见的大O表示形式"><a href="#常见的大O表示形式" class="headerlink" title="常见的大O表示形式"></a>常见的大O表示形式</h3><p>|符号       |           名称|<br>|O（1）      |          常数|<br>|O（log(n)） |          对数|<br>|O（n）     |           线性|<br>|O（nlog(n)）|线性和对数乘积|<br>|O（n²）   |           平方|<br>|O（2n）   |           指数|</p><h3 id="不同大O形式的时间复杂度："><a href="#不同大O形式的时间复杂度：" class="headerlink" title="不同大O形式的时间复杂度："></a>不同大O形式的时间复杂度：</h3><p>可以看到效率从大到小分别是：O（1）&gt; O（logn）&gt; O（n）&gt; O（nlog(n)）&gt; O（n²）&gt; O（2n）</p><h3 id="推导大O表示法的三条规则："><a href="#推导大O表示法的三条规则：" class="headerlink" title="推导大O表示法的三条规则："></a>推导大O表示法的三条规则：</h3><p>规则一：用常量1取代运行时间中所有的加法常量。如7 + 8 &#x3D; 15，用1表示运算结果15，大O表示法表示为O（1）；<br>规则二：运算中只保留最高阶项。如N^3 + 3n +1，大O表示法表示为：O（N3）;<br>规则三：若最高阶项的常数不为1，可将其省略。如4N2，大O表示法表示为：O（N2）;</p><h1 id="排序算法"><a href="#排序算法" class="headerlink" title="排序算法"></a>排序算法</h1><p>这里主要介绍几种简单排序和高级排序：</p><p>简单排序：冒泡排序、选择排序、插入排序；<br>高级排序：希尔排序、快速排序；</p><h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><h3 id="冒泡排序的思路"><a href="#冒泡排序的思路" class="headerlink" title="冒泡排序的思路"></a>冒泡排序的思路</h3><ul><li>对未排序的各元素从头到尾依次比较相邻的两个元素大小关系；</li><li>如果左边的人员高，则将两人交换位置。比如1比2矮，不交换位置；</li><li>向右移动一位，继续比较2和3，最后比较 length - 1 和 length - 2这两个数据；</li><li>当到达最右端时，最高的人一定被放在了最右边；</li><li>按照这个思路，从最左端重新开始时，只需要走到倒数第二个位置即可；</li></ul><h3 id="冒泡排序的封装"><a href="#冒泡排序的封装" class="headerlink" title="冒泡排序的封装"></a>冒泡排序的封装</h3><p class="note note-warning">这里均是在ArrayList类中封装的<p><p>ArrayList类</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">/* 封装列表项 */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">ArrayList</span> () &#123;<br>  <span class="hljs-comment">// 属性</span><br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span> = []<br>  <span class="hljs-comment">// 插入数组</span><br>  <span class="hljs-title class_">ArrayList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">insert</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(item)<br>  &#125;<br>  <span class="hljs-comment">// toSring</span><br>  <span class="hljs-title class_">ArrayList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;,&quot;</span>)<br>  &#125;<br>    <span class="hljs-comment">// 将交换两个位置的方法抽取</span><br>  <span class="hljs-title class_">ArrayList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">swap</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">m, n</span>) &#123;<br>    <span class="hljs-comment">// 交换两个位置数据</span><br>    <span class="hljs-keyword">let</span> temp = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[m]<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[m] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[n]<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[n] = temp<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// 冒泡排序</span><br><span class="hljs-title class_">ArrayList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">bubbleSort</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">// 递增排序</span><br>  <span class="hljs-keyword">let</span> count = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span> <span class="hljs-comment">// 内层交换次数</span><br>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = count-<span class="hljs-number">1</span>; i&gt;=<span class="hljs-number">0</span> ;i--  ) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j =<span class="hljs-number">0</span> ; j&lt;i ; j++) &#123;<br>      <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[j] &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[j+<span class="hljs-number">1</span>]) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">swap</span>(j,j+<span class="hljs-number">1</span>)<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toString</span>()<br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h2><h3 id="选择排序思路"><a href="#选择排序思路" class="headerlink" title="选择排序思路"></a>选择排序思路</h3><ul><li>选定第一个索引的位置比如1，然后依次和后面的元素依次进行比较；</li><li>如果后面的元素，小于索引1位置的元素，则交换位置到索引1处；</li><li>经过一轮的比较之后，可以确定一开始指定的索引1位置的元素是最小的；</li><li>随后使用同样的方法除索引1意外逐个比较剩下的元素即可；</li><li>可以看出选择排序，第一轮会选出最小值，第二轮会选出第二小的值，直到完成排序。</li></ul><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// 选择排序</span><br><span class="hljs-title class_">ArrayList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">selectionSort</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">// 将数组长度提取出来</span><br>  <span class="hljs-keyword">let</span> length = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span><br>  <span class="hljs-comment">// 记录最小值下标</span><br>  <span class="hljs-keyword">let</span> minLoc = <span class="hljs-number">0</span><br>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j =<span class="hljs-number">0</span> ;j&lt;length-<span class="hljs-number">1</span>; j++) &#123;<br>    minLoc = j<br>    <span class="hljs-comment">// 内层循环</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = j ; i&lt;=length -<span class="hljs-number">1</span> ;i++) &#123;<br>      <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[minLoc] &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[i]) &#123;<br>        minLoc = i<br>      &#125;<br>    &#125;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">swap</span>(j,minLoc)<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span><br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h2><h3 id="插入排序的思路"><a href="#插入排序的思路" class="headerlink" title="插入排序的思路"></a>插入排序的思路</h3><ul><li>插入排序是简单排序中效率最高的一种排序。</li><li>插入排序思想的核心是局部有序。如图所示，X左边的人称为局部有序；</li><li>首先指定一数据X（从第一个数据开始），并将数据X的左边变成局部有序状态；</li><li>随后将X右移一位，再次达到局部有序之后，继续右移一位，重复前面的操作直至X移至最后一个元素。</li></ul><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// 插入排序</span><br><span class="hljs-title class_">ArrayList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">insertSort</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">// 获取数组长度</span><br>  <span class="hljs-keyword">let</span> length = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span><br>  <span class="hljs-comment">//外层循环</span><br>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;length ; i++) &#123;<br>    <span class="hljs-keyword">let</span> temp = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[i]<br>    <span class="hljs-keyword">let</span> tempLoc = i<br>    <span class="hljs-keyword">while</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[tempLoc-<span class="hljs-number">1</span>] &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[tempLoc] ) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">swap</span>(tempLoc-<span class="hljs-number">1</span>,tempLoc)<br>      <span class="hljs-comment">// 内层循环</span><br>      <span class="hljs-keyword">if</span>(tempLoc &gt;<span class="hljs-number">1</span>)&#123;<br>        tempLoc -=<span class="hljs-number">1</span> <br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toString</span>()<br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="希尔排序"><a href="#希尔排序" class="headerlink" title="希尔排序"></a>希尔排序</h2><p>希尔排序是插入排序的一种高效的改进版，效率比插入排序要高。</p><h3 id="希尔排序的历史背景"><a href="#希尔排序的历史背景" class="headerlink" title="希尔排序的历史背景"></a>希尔排序的历史背景</h3><p>希尔排序按其设计者希尔（Donald Shell）的名字命名，该算法由1959年公布；<br>希尔算法首次突破了计算机界一直认为的算法的时间复杂度都是O（N^2）的大关，为了纪念该算法里程碑式<br>的意义，用Shell来命名该算法；</p><h3 id="插入排序的问题"><a href="#插入排序的问题" class="headerlink" title="插入排序的问题"></a>插入排序的问题</h3><p>假设一个很小的数据项在很靠近右端的位置上，这里本应该是较大的数据项的位置；<br>将这个小数据项移动到左边的正确位置，所有的中间数据项都必须向右移动一位，这样效率非常低；<br>如果通过某种方式，不需要一个个移动所有中间的数据项，就能把较小的数据项移到左边，那么这个算法的执行速度就会有很大的改进。</p><h3 id="希尔排序的实现思路"><a href="#希尔排序的实现思路" class="headerlink" title="希尔排序的实现思路"></a>希尔排序的实现思路</h3><ul><li>希尔排序主要通过对数据进行分组实现快速排序；</li><li>根据设定的增量（gap）将数据分为gap个组（组数等于gap），再在每个分组中进行局部排序；</li><li>假如有数组有10个数据，第1个数据为黑色，增量为5。那么第二个为黑色的数据index&#x3D;5，第3个数据为黑色的数据index &#x3D; 10（不存在）</li><li>所以黑色的数据每组只有2个，10 &#x2F; 2 &#x3D; 5一共可分5组，即组数等于增量gap。</li><li>排序之后，减小增量，继续分组，再次进行局部排序，直到增量gap&#x3D;1为止。随后只需进行微调就可完成数组的排序；</li></ul><h3 id="希尔排序的封装"><a href="#希尔排序的封装" class="headerlink" title="希尔排序的封装"></a>希尔排序的封装</h3><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// 希尔排序</span><br><span class="hljs-title class_">ArrayList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">shellSort</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">// 获取数组长度</span><br>  <span class="hljs-keyword">let</span> length = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span><br>  <span class="hljs-comment">// 初始化增量</span><br>  <span class="hljs-keyword">let</span> gap = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(length / <span class="hljs-number">2</span>)<br>  <span class="hljs-comment">// 使gap减小</span><br>  <span class="hljs-keyword">while</span>(gap &gt;= <span class="hljs-number">1</span>) &#123;<br>    <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">let</span> i= gap; i&lt;length ;i++) &#123;<br>      <span class="hljs-keyword">let</span> temp = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[i]<br>      <span class="hljs-keyword">let</span> j = i<br>      <span class="hljs-keyword">while</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[j-gap] &gt; temp) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[j] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[j-gap]<br>        j -= gap<br>      &#125;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[j] = temp<br>    &#125;<br>    gap = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(gap / <span class="hljs-number">2</span>)<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toString</span>()<br>&#125;<br></code></pre></div></td></tr></table></figure><h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><ul><li><p>快速排序可以说是目前所有排序算法中，最快的一种排序算法。当然，没有任何一种算法是在任意情况下都是最优的。但是，大多数情况下快速排序是比较好的选择。</p></li><li><p>快速排序其实是冒泡排序的升级版；</p></li><li><p>快速排序的核心思想是分而治之，先选出一个数据（比如65），将比其小的数据都放在它的左边，将比它大的数据都放在它的右边。这个数据称为枢纽</p></li></ul><h3 id="快速排序的枢纽："><a href="#快速排序的枢纽：" class="headerlink" title="快速排序的枢纽："></a>快速排序的枢纽：</h3><ul><li>第一种方案：直接选择第一个元素作为枢纽。但是，当第一个元素就是最小值的情况下，效率不高；</li><li>第二种方案：使用随机数。随机数本身十分消耗性能，不推荐；<br>优秀的解决方法：取index为头、中、位的三个数据排序后的中位数；如下图所示，按下标值取出的三个数据为：92，31，0，经排序后变为：0，31，92，取其中的中位数31作为枢纽（当（length-1）&#x2F;2不整除时可向下或向上取整）：</li></ul><h3 id="快速排序的封装"><a href="#快速排序的封装" class="headerlink" title="快速排序的封装"></a>快速排序的封装</h3><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// 快速排序算法</span><br><span class="hljs-title class_">ArrayList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">quickSort</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">quick</span>(<span class="hljs-number">0</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>)<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">toString</span>()<br>&#125;<br><span class="hljs-comment">// 快速排序枢纽查找</span><br><span class="hljs-title class_">ArrayList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">meddlein</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">left,right</span>)&#123;<br>   <span class="hljs-comment">// 取出中位数</span><br>   <span class="hljs-keyword">let</span> center = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>( (left +right) / <span class="hljs-number">2</span>)<br>   <span class="hljs-comment">// 比较大小确定中位数</span><br>   <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[left] &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[center]) &#123;<br>     <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">swap</span>(left,center)<br>   &#125;<br>   <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[center] &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[right]) &#123;<br>     <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">swap</span>(center,right)<br>   &#125;<br>   <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[left] &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[center]) &#123;<br>     <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">swap</span>(left,center)<br>   &#125;<br>   <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">swap</span>(center,right-<span class="hljs-number">1</span>)<br>   <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[right-<span class="hljs-number">1</span>]<br>&#125;<br><span class="hljs-comment">// 快速排序的递归</span><br><span class="hljs-title class_">ArrayList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">quick</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">left,right</span>) &#123;<br>  <span class="hljs-comment">// 结束条件 </span><br>  <span class="hljs-keyword">if</span>(left &gt;= right)  <span class="hljs-keyword">return</span><br>  <span class="hljs-comment">// 获取枢纽数</span><br>  <span class="hljs-keyword">let</span> pivot = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">meddlein</span>(left,right)<br>  <span class="hljs-comment">// 定义变量</span><br>  <span class="hljs-keyword">let</span> i = left<br>  <span class="hljs-keyword">let</span> j = right-<span class="hljs-number">1</span><br>  <span class="hljs-keyword">while</span>(i&lt;j) &#123;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[++i]  &lt; pivot) &#123;&#125;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[--j] &gt;pivot) &#123;&#125;<br>    <span class="hljs-keyword">if</span>(i &lt; j) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">swap</span>(i,j)<br>    &#125;<br>  &#125;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">swap</span>(i,right-<span class="hljs-number">1</span>)<br>  <span class="hljs-comment">// 分而治之</span><br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">quick</span>(left,i-<span class="hljs-number">1</span>)<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">quick</span>(i+<span class="hljs-number">1</span>,right)<br>&#125;<br></code></pre></div></td></tr></table></figure><h1 id="封装测试"><a href="#封装测试" class="headerlink" title="封装测试"></a>封装测试</h1><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">/* 测试排序算法 */</span><br><span class="hljs-keyword">const</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>()<br><br>arr.<span class="hljs-title function_">insert</span>(<span class="hljs-number">66</span>)<br>arr.<span class="hljs-title function_">insert</span>(<span class="hljs-number">88</span>)<br>arr.<span class="hljs-title function_">insert</span>(<span class="hljs-number">17</span>)<br>arr.<span class="hljs-title function_">insert</span>(<span class="hljs-number">2</span>)<br>arr.<span class="hljs-title function_">insert</span>(<span class="hljs-number">25</span>)<br>arr.<span class="hljs-title function_">insert</span>(<span class="hljs-number">68</span>)<br>arr.<span class="hljs-title function_">insert</span>(<span class="hljs-number">102</span>)<br>arr.<span class="hljs-title function_">insert</span>(<span class="hljs-number">5</span>)<br>arr.<span class="hljs-title function_">insert</span>(<span class="hljs-number">56</span>)<br>arr.<span class="hljs-title function_">insert</span>(<span class="hljs-number">33</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">toString</span>())<br><span class="hljs-comment">// console.log(&quot;冒泡排序结果：&quot;+arr.bubbleSort())</span><br><span class="hljs-comment">// console.log(&quot;选择排序算法结果：&quot; +arr.selectionSort())</span><br><span class="hljs-comment">// console.log(&#x27;插入排序算法结果：&#x27;,arr.insertSort())</span><br><span class="hljs-comment">// console.log(&#x27;希尔排序算法结果：&#x27;+arr.shellSort())</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;快速排序算法结果：&#x27;</span>+arr.<span class="hljs-title function_">quickSort</span>())<br></code></pre></div></td></tr></table></figure><h1 id="这五种排序效率"><a href="#这五种排序效率" class="headerlink" title="这五种排序效率"></a>这五种排序效率</h1><h3 id="冒泡排序的效率"><a href="#冒泡排序的效率" class="headerlink" title="冒泡排序的效率"></a>冒泡排序的效率</h3><p>上面所讲的对于7个数据项，比较次数为：6 + 5 + 4 + 3 + 2 + 1;<br>对于N个数据项，比较次数为：(N - 1) + (N - 2) + (N - 3) + … + 1 &#x3D; N * (N - 1) &#x2F; 2；如果两次比较交换一次，那么交换次数为：N * (N - 1) &#x2F; 4；<br>使用大O表示法表示比较次数和交换次数分别为：O（ N * (N - 1) &#x2F; 2）和O（ N * (N - 1) &#x2F; 4），根据大O表示法的三条规则都化简为：O（N^2）;</p><h3 id="选择排序的效率"><a href="#选择排序的效率" class="headerlink" title="选择排序的效率"></a>选择排序的效率</h3><p>选择排序的比较次数为：N * (N - 1) &#x2F; 2，用大O表示法表示为：O（N^2）;<br>选择排序的交换次数为：(N - 1) &#x2F; 2，用大O表示法表示为：O（N）;<br>所以选择排序的效率高于冒泡排序；</p><h3 id="插入排序的效率"><a href="#插入排序的效率" class="headerlink" title="插入排序的效率"></a>插入排序的效率</h3><p>比较次数：第一趟时，需要的最大次数为1；第二次最大为2；以此类推，最后一趟最大为N-1；所以，插入排序的总比较次数为N * (N - 1) &#x2F; 2；但是，实际上每趟发现插入点之前，平均只有全体数据项的一半需要进行比较，所以比较次数为：N * (N - 1) &#x2F; 4；</p><p>交换次数：指定第一个数据为X时交换0次，指定第二个数据为X最多需要交换1次，以此类推，指定第N个数据为X时最多需要交换N - 1次，所以一共需要交换N * (N - 1) &#x2F; 2次，平局次数为N * (N - 1) &#x2F; 2；</p><p>虽然用大O表示法表示插入排序的效率也是O（N^2），但是插入排序整体操作次数更少，因此，在简单排序中，插入排序效率最高；</p><h3 id="希尔排序-1"><a href="#希尔排序-1" class="headerlink" title="希尔排序"></a>希尔排序</h3><p>希尔排序的效率和增量有直接关系，即使使用原稿中的增量效率都高于简单排序。</p><h3 id="快速排序-1"><a href="#快速排序-1" class="headerlink" title="快速排序"></a>快速排序</h3><p> 快速排序最坏情况下的效率：每次选择的枢纽都是最左边或最右边的数据，此时效率等同于冒泡排序，时间复杂度为O（n2）。可根据不同的枢纽选择避免这一情况；<br>快速排序的平均效率：为O（N<em>logN），虽然其他算法效率也可达到O（N</em>logN），但是其中快速排序是最好的。</p>]]></content>
    
    
    <categories>
      
      <category>数据结构</category>
      
    </categories>
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>数据结构</tag>
      
      <tag>搜索排序算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>javascript数据结构-图</title>
    <link href="/2022/05/25/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%9B%BE%E7%BB%93%E6%9E%84%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
    <url>/2022/05/25/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%9B%BE%E7%BB%93%E6%9E%84%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<p class="note note-warning">本博客参考于洛伊安妮·格罗纳编著的javascript数据结构与算法第三版及codeWay老师视频或其他博客资料，在此对此表示感谢!<br>github仓库：<a href="https://github.com/hzx17/DataStructures" style="color:#428bca;">https://github.com/hzx17/</a><p><h1 id="图"><a href="#图" class="headerlink" title="图"></a>图</h1><h3 id="图的概念"><a href="#图的概念" class="headerlink" title="图的概念"></a>图的概念</h3><p>在计算机程序设计中，图也是一种非常常见的数据结构，图论其实是一个非常大的话题，在数学上起源于哥尼斯堡七桥问题。</p><h3 id="什么是图？"><a href="#什么是图？" class="headerlink" title="什么是图？"></a>什么是图？</h3><ul><li><p>图是一种与树有些相似的数据结构。</p><ul><li>实际上，在数学的概念上，树是图的一种。</li><li>我们知道树可以用来模拟很多现实的数据结构，比如：家谱&#x2F;公司组织架构等等。</li></ul></li><li><p>那么图长什么样子呢？或者什么样的数据使用图来模拟更合适呢？</p><ul><li><p>人与人之间的关系网<br><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E4%BA%BA%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB%E7%BD%91.png" alt="人与人之间的关系网"></p></li><li><p>互联网中的网络关系<br><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BD%91%E7%BB%9C%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB.png" alt="互联网中的网络关系"></p></li><li><p>地铁图</p></li><li><p>……</p></li></ul></li><li><p>那么，什么是图呢?</p><ul><li>我们会发现，上面的结点（其实图中叫顶点 Vertex）之间的关系，是不能使用树来表示（几叉树都不可以）。</li><li>这个时候，我们就可以使用<strong>图</strong>来模拟它们。</li></ul></li><li><p>图通常有什么特点呢？</p><ul><li>一组顶点：通常用 V (Vertex) 表示顶点的集合</li><li>一组边：通常用 E (Edge) 表示边的集合</li><li>边是顶点和顶点之间的连线</li><li>边可以是有向的，也可以是无向的。（比如 A — B，通常表示无向。 A –&gt; B，通常表示有向）</li></ul></li></ul><h3 id="图的术语"><a href="#图的术语" class="headerlink" title="图的术语"></a>图的术语</h3><h4 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h4><ul><li><p>我们在学习树的时候，树有很多的其他术语，了解这些术语有助于我们更深层次的理解图。</p></li><li><p>但是图的术语其实非常多，如果你找一本专门讲图的各个方面的书籍，会发现只是术语就可以占据一个章节。</p></li><li><p>这里，这里介绍几个比较常见的术语，某些术语后面用到的时候，再了解，没有用到的，不做赘述。</p></li><li><p>下面这是个抽象出来的图<br><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%9B%BE%E7%9A%84%E6%8A%BD%E8%B1%A1.png" alt="抽象图"></p></li><li><p>顶点</p><ul><li>顶点刚才我们已经介绍过了，表示图中的一个结点。</li><li>比如地铁站中某个站&#x2F;多个村庄中的某个村庄&#x2F;互联网中的某台主机&#x2F;人际关系中的人。</li></ul></li><li><p>边</p><ul><li>边表示顶点和顶点之间的连线。</li><li>比如地铁站中两个站点之间的直接连线, 就是一个边。</li><li>注意：这里的边不要叫做路径，路径有其他的概念，后面会区分。</li></ul></li><li><p>相邻顶点</p><ul><li>由一条边连接在一起的顶点称为相邻顶点。</li><li>比如 <code>0 - 1</code> 是相邻的，<code>0 - 3</code> 是相邻的。<code>0 - 2</code> 是不相邻的。</li></ul></li><li><p>度</p><ul><li>一个顶点的度是相邻顶点的数量</li><li>比如 0 顶点和其他两个顶点相连，0 顶点的度是 2</li><li>比如 1 顶点和其他四个顶点相连，1 顶点的度是 4</li></ul></li><li><p>路径</p><ul><li>路径是顶点 <code>v1</code>，<code>v2</code>…，<code>vn</code> 的一个连续序列, 比如上图中 <code>0 1 5 9</code> 就是一条路径。</li><li>简单路径: 简单路径要求不包含重复的顶点. 比如 <code>0 1 5 9</code> 是一条简单路径。</li><li>回路：第一个顶点和最后一个顶点相同的路径称为回路。比如 <code>0 1 5 6 3 0</code>。</li></ul></li><li><p>无向图</p><ul><li>上面的图就是一张无向图，因为所有的边都没有方向。</li><li>比如 <code>0 - 1</code> 之间有边，那么说明这条边可以保证 <code>0 -&gt; 1</code>，也可以保证 <code>1 -&gt; 0</code>。</li></ul></li><li><p>有向图</p><ul><li>有向图表示的图中的边是有方向的。</li><li>比如 <code>0 -&gt; 1</code>，不能保证一定可以 <code>1 -&gt; 0</code>，要根据方向来定。</li></ul></li></ul><h4 id="无权图和带权图"><a href="#无权图和带权图" class="headerlink" title="无权图和带权图"></a>无权图和带权图</h4><ul><li><p>无权图</p><ul><li>我们上面的图就是一张无权图（边没有携带权重）</li><li>我们上面的图中的边是没有任何意义的，不能收 <code>0 - 1</code> 的边，比 <code>4 - 9</code> 的边更远或者用的时间更长。</li></ul></li><li><p>带权图</p><ul><li>带权图表示边有一定的权重</li><li>这里的权重可以是任意你希望表示的数据：比如距离或者花费的时间或者票价。</li><li>我们来看一张有向和带权的图<br><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%B8%A6%E6%9D%83%E5%9B%BE.png" alt="带权图"></li></ul></li></ul><h3 id="现实建模"><a href="#现实建模" class="headerlink" title="现实建模"></a>现实建模</h3><ul><li><p>对交通流量建模</p><ul><li>顶点可以表示街道的十字路口，边可以表示街道.。</li><li>加权的边可以表示限速或者车道的数量或者街道的距离。</li><li>建模人员可以用这个系统来判定最佳路线以及最可能堵车的街道。</li></ul></li><li><p>对飞机航线建模</p><ul><li>航空公司可以用图来为其飞行系统建模。</li><li>将每个机场看成顶点，将经过两个顶点的每条航线看作一条边。</li><li>加权的边可以表示从一个机场到另一个机场的航班成本，或两个机场间的距离。</li><li>建模人员可以利用这个系统有效的判断从一个城市到另一个城市的最小航行成本。<br>​</li></ul></li></ul><h3 id="图的表示"><a href="#图的表示" class="headerlink" title="图的表示"></a>图的表示</h3><p>我们知道一个图包含很多顶点，另外包含顶点和顶点之间的连线（边），这两个都是非常重要的图信息，因此都需要在程序中体现出来。</p><h4 id="顶点表示"><a href="#顶点表示" class="headerlink" title="顶点表示"></a>顶点表示</h4><ul><li><p>顶点的表示相对简单</p><ul><li>上面的顶点，我们抽象成了 1 2 3 4，也可以抽象成 A B C D。在后面的案例中，我们使用 A B C D。</li><li>那么这些 A B C D 我们可以使用一个数组来存储起来(存储所有的顶点)。</li><li>当然，A B C D 有可能还表示其他含义的数据(比如村庄的名字)，这个时候，可以另外创建一个数组，用于存储对应的其他数据。</li></ul></li><li><p>边的表示略微复杂</p><ul><li>因为边是两个顶点之间的关系，所以表示起来会稍微麻烦一些。</li><li>下面是变常见的表示方式。</li></ul></li></ul><h4 id="邻接矩阵"><a href="#邻接矩阵" class="headerlink" title="邻接矩阵"></a>邻接矩阵</h4><ul><li><p>概述</p><ul><li>邻接矩阵让每个节点和一个整数向关联, 该整数作为数组的下标值.</li><li>我们用一个二维数组来表示顶点之间的连接.</li><li>演示<br><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%82%BB%E6%8E%A5%E7%9F%A9%E9%98%B5.png" alt="邻接矩阵"></li></ul></li><li><p>图片解析</p><ul><li>在二维数组中，0 表示没有连线，1 表示有连线。</li><li>通过二维数组，我们可以很快的找到一个顶点和哪些顶点有连线。（比如 A 顶点, 只需要 遍历第一行即可）</li><li>另外，A - A，B - B（也就是顶点到自己的连线），通常使用 0 表示。</li></ul></li><li><p>邻接矩阵的问题</p><ul><li><p>如果是一个无向图，邻接矩阵展示出来的二维数组，其实是一个对称图。</p><ul><li>也就是 A -&gt; D 是 1 的时候，对称的位置 D -&gt; 1 一定也是 1。</li><li>那么这种情况下会造成空间的浪费，解决办法需自己去研究下。</li></ul></li><li><p>邻接矩阵还有一个比较严重的问题就是如果图是一个稀疏图</p><ul><li>那么矩阵中将存在大量的 0，这意味着我们浪费了计算机存储空间来表示根本不存在的边。</li><li>而且即使只有一个边，我们也必须遍历一行来找出这个边，也浪费很多时间。</li></ul></li></ul></li></ul><h4 id="邻接表"><a href="#邻接表" class="headerlink" title="邻接表"></a>邻接表</h4><ul><li><p>概述</p><ul><li>邻接表由图中每个顶点以及和顶点相邻的顶点列表组成。</li><li>这个列表有很多中方式来存储：数组&#x2F;链表&#x2F;字典(哈希表)都可以。</li><li>演示<br><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%82%BB%E6%8E%A5%E8%A1%A8.png" alt="邻接表"></li></ul></li><li><p>图片解析</p><ul><li>其实图片比较容易理解</li><li>比如我们要表示和 A 顶点有关联的顶点（边），A 和 B&#x2F;C&#x2F;D 有边，那么我们可以通过 A 找到 对应的数组&#x2F;链表&#x2F;字典，再取出其中的内容就可以啦。</li></ul></li><li><p>邻接表的问题</p><ul><li>邻接表计算“出度”是比较简单的（出度：指向别人的数量, 入度: 指向自己的数量）</li><li>邻接表如果需要计算有向图的“入度”，那么是一件非常麻烦的事情。</li><li>它必须构造一个“逆邻接表”，才能有效的计算“入度”。而临街矩阵会非常简单。</li></ul></li></ul><h3 id="图的封装"><a href="#图的封装" class="headerlink" title="图的封装"></a>图的封装</h3><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"> <span class="hljs-comment">/* 封装队列类 */</span><br> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Queue</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-comment">//属性</span><br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>=[];<br>  <span class="hljs-comment">/* 方法 */</span><br>  <span class="hljs-comment">//将元素放入队列中</span><br>  <span class="hljs-title class_">Queue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">enqueue</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>)&#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(element)<br>  &#125;<br>  <span class="hljs-comment">//从队列中删除前端元素</span><br>  <span class="hljs-title class_">Queue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">dequeue</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">shift</span>();<br>&#125;<br>  <span class="hljs-comment">//从队列中查看前端元素</span><br>  <span class="hljs-title class_">Queue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">showqueue</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-number">0</span>]<br>&#125;<br><span class="hljs-comment">//从队列中删除任何位置元素</span><br><span class="hljs-title class_">Queue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">spliceelement</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">index,count</span>)&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">splice</span>(index,count)<br>&#125;<br>  <span class="hljs-comment">//查看队列中元素个数是否为空</span><br>  <span class="hljs-title class_">Queue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">isEmpty</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>==<span class="hljs-number">0</span><br>&#125;<br>  <span class="hljs-comment">//查看队列中的元素个数</span><br>  <span class="hljs-title class_">Queue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">elementnum</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>;<br>  &#125;<br>  <span class="hljs-comment">//toString</span><br>  <span class="hljs-title class_">Queue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">let</span> resultString=<span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>;i++)&#123;<br>        resultString +=<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[i]+<span class="hljs-string">&quot;&quot;</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> resultString<br>&#125;<br>&#125;<br><br><span class="hljs-comment">/* 封装图 */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Graph</span> () &#123;<br>  <span class="hljs-comment">// 属性：顶点</span><br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertexes</span> = [] <span class="hljs-comment">// 顶点</span><br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">edges</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>() <span class="hljs-comment">// 边-字典类</span><br><br>  <span class="hljs-comment">// 往图中添加边</span><br>  <span class="hljs-title class_">Graph</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">addVertexes</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>)&#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertexes</span>.<span class="hljs-title function_">push</span>(v)<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">edges</span>.<span class="hljs-title function_">set</span>(v,[])<br>  &#125;<br>  <span class="hljs-comment">// 往图中添加边</span><br>  <span class="hljs-title class_">Graph</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">addEdges</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">v1,v2</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">edges</span>.<span class="hljs-title function_">get</span>(v1).<span class="hljs-title function_">push</span>(v2)<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">edges</span>.<span class="hljs-title function_">get</span>(v2).<span class="hljs-title function_">push</span>(v1)<br>  &#125;<br>  <span class="hljs-comment">// 图结构的toString方法</span><br>  <span class="hljs-title class_">Graph</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 定义一个字符串，保存最终的结果</span><br>    <span class="hljs-keyword">let</span> resultString = <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-comment">// 遍历边结构</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span> ; i&lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertexes</span>.<span class="hljs-property">length</span> ;i++) &#123;<br>      resultString += <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertexes</span>[i] + <span class="hljs-string">&quot;-&gt;&quot;</span><br>      resultString += <span class="hljs-variable language_">this</span>.<span class="hljs-property">edges</span>.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">vertexes</span>[i]) + <span class="hljs-string">`\n`</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> resultString<br>  &#125;<br>  <span class="hljs-comment">// 初始化颜色</span><br>  <span class="hljs-title class_">Graph</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">initializeColor</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 定义颜色数组</span><br>    <span class="hljs-keyword">let</span> colors= [] <br>    <span class="hljs-keyword">for</span>( <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span> ;i&lt;<span class="hljs-variable language_">this</span>.<span class="hljs-property">vertexes</span>.<span class="hljs-property">length</span> ;i++) &#123;<br>      colors[<span class="hljs-variable language_">this</span>.<span class="hljs-property">vertexes</span>[i]] = <span class="hljs-string">&#x27;white&#x27;</span> <span class="hljs-comment">// 白色标识未处理</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> colors<br>  &#125;<br>  <span class="hljs-comment">//广度优先搜索遍历 - 队列实现</span><br>  <span class="hljs-title class_">Graph</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">breadthFirstSearch</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">initv,handler</span>) &#123;<br>    <span class="hljs-keyword">let</span> colors = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initializeColor</span>() <span class="hljs-comment">// 初始化颜色</span><br>    <span class="hljs-comment">//创建一个队列</span><br>    <span class="hljs-keyword">const</span> queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Queue</span>()<br>    <span class="hljs-comment">// 将顶点加入到队列中</span><br>    queue.<span class="hljs-title function_">enqueue</span>(initv)<br>    <span class="hljs-comment">// 循环取出队列</span><br>    <span class="hljs-keyword">while</span>(!queue.<span class="hljs-title function_">isEmpty</span>()) &#123;<br>      <span class="hljs-comment">// 取出顶点</span><br>      <span class="hljs-keyword">let</span> v= queue.<span class="hljs-title function_">dequeue</span>()<br>      <span class="hljs-comment">// 获取顶点与顶点相邻的其他顶点</span><br>      <span class="hljs-keyword">let</span> vlist = <span class="hljs-variable language_">this</span>.<span class="hljs-property">edges</span>.<span class="hljs-title function_">get</span>(v)<br>      colors[v] = <span class="hljs-string">&quot;gray&quot;</span> <span class="hljs-comment">// 灰色标识为已探测</span><br>      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i&lt;vlist.<span class="hljs-property">length</span> ;i++)&#123;<br>        <span class="hljs-keyword">let</span> e = vlist[i]<br>        <span class="hljs-keyword">if</span>( colors[e] == <span class="hljs-string">&#x27;white&#x27;</span>) &#123;<br>          colors[e] = <span class="hljs-string">&#x27;gray&#x27;</span><br>          queue.<span class="hljs-title function_">enqueue</span>(e)<br>        &#125;<br>      &#125;<br>      <span class="hljs-comment">// 访问原点，处理函数</span><br>      <span class="hljs-title function_">handler</span>(v)<br>      colors[v] = <span class="hljs-string">&#x27;black&#x27;</span><br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 图的深度优先遍历 - 栈或递归实现 -这里我们使用递归来实现</span><br>  <span class="hljs-title class_">Graph</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">depthFristSearch</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">initv,handler</span>) &#123;<br>    <span class="hljs-keyword">let</span> colors = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initializeColor</span>() <span class="hljs-comment">// 初始化颜色</span><br>    <span class="hljs-comment">// 从某个节点开始递归</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reDepthFristSearch</span>(colors,initv,handler)<br>  &#125;<br>  <span class="hljs-comment">// 深度优先遍历递归函数</span><br>  <span class="hljs-title class_">Graph</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">reDepthFristSearch</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">colors,v,handler</span>) &#123;<br>    colors[v] = <span class="hljs-string">&#x27;gray&#x27;</span><br>    <span class="hljs-title function_">handler</span>(v)<br>    <span class="hljs-keyword">let</span> vlist = <span class="hljs-variable language_">this</span>.<span class="hljs-property">edges</span>.<span class="hljs-title function_">get</span>(v)<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i= <span class="hljs-number">0</span>;i&lt;vlist.<span class="hljs-property">length</span> ;i++) &#123;<br>       <span class="hljs-keyword">let</span> e = vlist[i]<br>       <span class="hljs-keyword">if</span>(colors[e] ==<span class="hljs-string">&quot;white&quot;</span>) &#123;<br>         <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reDepthFristSearch</span>(colors,e,handler)<br>         colors[e] = <span class="hljs-string">&#x27;black&#x27;</span><br>       &#125;<br>    &#125;<br>  &#125; <br>&#125; <br></code></pre></div></td></tr></table></figure><h3 id="测试图"><a href="#测试图" class="headerlink" title="测试图"></a>测试图</h3><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">/* 测试代码 */</span><br><span class="hljs-keyword">const</span> graph = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Graph</span>()<br><br><span class="hljs-keyword">let</span> vertexes = [<span class="hljs-string">&quot;A&quot;</span>,<span class="hljs-string">&quot;B&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>,<span class="hljs-string">&quot;D&quot;</span>,<span class="hljs-string">&quot;E&quot;</span>,<span class="hljs-string">&quot;F&quot;</span>,<span class="hljs-string">&quot;G&quot;</span>,<span class="hljs-string">&quot;H&quot;</span>,<span class="hljs-string">&quot;I&quot;</span>]<br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span> ;i &lt; vertexes.<span class="hljs-property">length</span> ; i++)&#123;<br>  graph.<span class="hljs-title function_">addVertexes</span>(vertexes[i])<br>&#125;<br>graph.<span class="hljs-title function_">addEdges</span>(<span class="hljs-string">&quot;A&quot;</span>,<span class="hljs-string">&quot;B&quot;</span>)<br>graph.<span class="hljs-title function_">addEdges</span>(<span class="hljs-string">&quot;A&quot;</span>,<span class="hljs-string">&quot;C&quot;</span>)<br>graph.<span class="hljs-title function_">addEdges</span>(<span class="hljs-string">&quot;A&quot;</span>,<span class="hljs-string">&quot;D&quot;</span>)<br>graph.<span class="hljs-title function_">addEdges</span>(<span class="hljs-string">&quot;C&quot;</span>,<span class="hljs-string">&quot;D&quot;</span>)<br>graph.<span class="hljs-title function_">addEdges</span>(<span class="hljs-string">&quot;D&quot;</span>,<span class="hljs-string">&quot;G&quot;</span>)<br>graph.<span class="hljs-title function_">addEdges</span>(<span class="hljs-string">&quot;D&quot;</span>,<span class="hljs-string">&quot;H&quot;</span>)<br>graph.<span class="hljs-title function_">addEdges</span>(<span class="hljs-string">&quot;B&quot;</span>,<span class="hljs-string">&quot;E&quot;</span>)<br>graph.<span class="hljs-title function_">addEdges</span>(<span class="hljs-string">&quot;B&quot;</span>,<span class="hljs-string">&quot;F&quot;</span>)<br>graph.<span class="hljs-title function_">addEdges</span>(<span class="hljs-string">&quot;E&quot;</span>,<span class="hljs-string">&quot;I&quot;</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(graph.<span class="hljs-title function_">toString</span>())<br><span class="hljs-comment">// console.log(graph)  </span><br><span class="hljs-comment">//广度优先</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;广度优先：&#x27;</span>)<br>graph.<span class="hljs-title function_">breadthFirstSearch</span>(<span class="hljs-string">&quot;A&quot;</span> , <span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(v)<br>&#125;)<br><span class="hljs-comment">// 深度优先</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;深度优先：&#x27;</span>)<br>graph.<span class="hljs-title function_">depthFristSearch</span>(<span class="hljs-string">&quot;A&quot;</span> , <span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(v)<br>&#125;)<br><br></code></pre></div></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>数据结构</category>
      
    </categories>
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>数据结构</tag>
      
      <tag>图</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>javascript数据结构-哈希表</title>
    <link href="/2022/05/20/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%93%88%E5%B8%8C%E8%A1%A8%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
    <url>/2022/05/20/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%93%88%E5%B8%8C%E8%A1%A8%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<p class="note note-warning">本博客参考于洛伊安妮·格罗纳编著的javascript数据结构与算法第三版及codeWay老师视频或其他博客资料，在此对此表示感谢!<br>github仓库：<a href="https://github.com/hzx17/DataStructures" style="color:#428bca;">https://github.com/hzx17/</a><p><h1 id="JavaScript-数据结构与算法（十）哈希表"><a href="#JavaScript-数据结构与算法（十）哈希表" class="headerlink" title="JavaScript 数据结构与算法（十）哈希表"></a>JavaScript 数据结构与算法（十）哈希表</h1><h2 id="认识哈希表"><a href="#认识哈希表" class="headerlink" title="认识哈希表"></a>认识哈希表</h2><p>哈希表是一种非常重要的数据结构，几乎所有的编程语言都直接或者间接应用这种数据结构。</p><p>哈希表通常是基于数组实现的，但是相对于数组，它存在更多优势：</p><ul><li>哈希表可以提供非常快速的 <strong>插入-删除-查找</strong> 操作。</li><li>无论多少数据，插入和删除值都只需接近常量的时间，即 <strong>O(1)</strong> 的时间复杂度。实际上，只需要几个机器指令即可完成。</li><li>哈希表的速度比树还要快，基本可以瞬间查找到想要的元素。</li><li>哈希表相对于树来说编码要简单得多。</li></ul><p>哈希表同样存在不足之处：</p><ul><li>哈希表中的数据是没有顺序的，所以不能以一种固定的方式（比如从小到大 ）来遍历其中的元素(无法查找最大，最小值)。</li><li>通常情况下，哈希表中的 <code>key</code> 是不允许重复的，不能放置相同的 <code>key</code>，用于保存不同的元素。</li></ul><p>哈希表是什么？</p><ul><li>哈希表并不好理解，不像数组、链表和树等可通过图形的形式表示其结构和原理。</li><li>哈希表的结构就是数组，但它<strong>神奇之处在于对下标值的一种变换</strong>，这种变换我们可以称之为<strong>哈希函数</strong>，通过哈希函数可以获取 HashCode。</li></ul><p>通过以下案例了解哈希表：</p><ul><li><p>案例一：公司想要存储 1000 个人的信息，每一个工号对应一个员工的信息。若使用数组，增删数据时比较麻烦；使用链表，获取数据时比较麻烦。有没有一种数据结构，能把某一员工的姓名转换为它对应的工号，再根据工号查找该员工的完整信息呢？没错此时就可以使用哈希表的哈希函数来实现。</p></li><li><p>案例二：存储联系人和对应的电话号码：当要查找张三（比如）的号码时，若使用数组：由于不知道存储张三数据对象的下标值，所以查找起来十分麻烦，使用链表时也同样麻烦。而使用哈希表就能通过哈希函数把张三这个名称转换为它对应的下标值，再通过下标值查找效率就非常高了。</p></li></ul><p>也就是说：哈希表最后还是基于数据来实现的，只不过哈希表能够通过哈希函数把字符串转化为对应的下标值，建立字符串和下标值的映射关系。</p><h3 id="认识哈希化"><a href="#认识哈希化" class="headerlink" title="认识哈希化"></a>认识哈希化</h3><p>为了把字符串转化为对应的下标值，需要有一套编码系统，为了方便理解我们创建这样一套编码系统：比如 a 为 1，b 为 2，c 为 3，以此类推 z 为 26，空格为 27（不考虑大写情况）。</p><p>有了编码系统后，将字母转化为数字也有很多种方案：</p><ul><li>方案一：数字相加。</li></ul><p>例如 cats 转化为数字：<code>3 + 1 + 20 + 19 = 43</code>，那么就把 43 作为 cats 单词的下标值储存在数组中；</p><p>但是这种方式会存在这样的问题：很多的单词按照该方式转化为数字后都是 43，比如 was。而在数组中一个下标值只能储存一个数据，所以该方式不合理。</p><ul><li>方案二：幂的连乘。</li></ul><p>我们平时使用的大于 10 的数字，就是用幂的连乘来表示它的唯一性的。<br>比如： <code>6543 = 6 * 10^3 + 5 * 10^2 + 4 * 10 + 3</code>；这样单词也可以用该种方式来表示：<code>cats = 3 * 27^3 + 1 * 27^2 + 20 * 27 + 17 = 60337</code>。</p><p>虽然该方式可以保证字符的唯一性，但是如果是较长的字符（如 aaaaaaaaaa）所表示的数字就非常大，此时要求很大容量的数组，然而其中却有许多下标值指向的是无效的数据（比如不存在 zxcvvv 这样的单词），造成了数组空间的浪费。</p><p>两种方案总结：</p><ul><li>第一种方案（让数字相加求和）产生的数组下标太少。</li><li>第二种方案（与 27 的幂相乘求和）产生的数组下标又太多。</li></ul><p>现在需要一种压缩方法，把幂的连乘方案系统中得到的<strong>巨大整数范围压缩到可接受的数组范围中</strong>。可以通过<strong>取余</strong>操作来实现。虽然取余操作得到的结构也有可能重复，但是可以通过其他方式解决。</p><h3 id="哈希表的一些概念"><a href="#哈希表的一些概念" class="headerlink" title="哈希表的一些概念"></a>哈希表的一些概念</h3><ul><li><p><strong>哈希化</strong></p><p>将<strong>大数字</strong>转化成<strong>数组范围内下标</strong>的过程，称之为哈希化。</p></li><li><p><strong>哈希函数</strong></p><p>我们通常会将单词转化成大数字，把大数字进行哈希化的代码实现放在一个函数中，该函数就称为哈希函数。</p></li><li><p><strong>哈希表</strong></p><p>对最终数据插入的数组进行整个结构的封装，得到的就是哈希表。</p></li></ul><h3 id="地址的冲突"><a href="#地址的冲突" class="headerlink" title="地址的冲突"></a>地址的冲突</h3><p>在实际中，经过哈希函数哈希化过后得到的下标值可能有重复，这种情况称为冲突，冲突是不可避免的，我们只能解决冲突。</p><p>解决冲突常见的两种方案：链地址法（拉链法）和开放地址法。</p><h4 id="链地址法（拉链法）"><a href="#链地址法（拉链法）" class="headerlink" title="链地址法（拉链法）"></a>链地址法（拉链法）</h4><p>如下图所示，我们将每一个数字都对 10 进行取余操作，则余数的范围 0~9 作为数组的下标值。并且，数组每一个下标值对应的位置存储的不再是一个数字了，而是存储由经过取余操作后得到相同余数的数字组成的数组或链表。</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%93%88%E5%B8%8C%E8%A1%A8%E9%93%BE%E5%9C%B0%E5%9D%80%E6%B3%95.png" alt="链地址法"></p><p>这样可以根据下标值获取到整个数组或链表，之后继续在数组或链表中查找就可以了。而且，产生冲突的元素一般不会太多。</p><p>总结：链地址法解决冲突的办法是每个数组单元中存储的不再是单个数据，而是一条链条，这条链条常使用的数据结构为数组或链表，两种数据结构查找的效率相当（因为链条的元素一般不会太多）。</p><h4 id="开放地址法"><a href="#开放地址法" class="headerlink" title="开放地址法"></a>开放地址法</h4><p>开放地址法的主要工作方式是寻找空白的单元格来放置冲突的数据项。</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%BC%80%E6%94%BE%E5%9C%B0%E5%9D%80%E6%B3%95.png" alt="开放地址法"></p><p>根据探测空白单元格位置方式的不同，可分为三种方法：</p><ul><li>线性探测</li><li>二次探测</li><li>再哈希法</li></ul><h5 id="线性探测"><a href="#线性探测" class="headerlink" title="线性探测"></a>线性探测</h5><ul><li>当插入 13 时：</li></ul><p>经过哈希化（对 10 取余）之后得到的下标值 index&#x3D;3，但是该位置已经放置了数据 33。而线性探测就是从 index 位置+1 开始向后一个一个来查找合适的位置来放置 13，所谓合适的位置指的是空的位置，如上图中 index&#x3D;4 的位置就是合适的位置。</p><ul><li><p>当查询 13 时：</p><ul><li>首先 13 经过哈希化得到 index&#x3D;3，如果 index&#x3D;3 的位置存放的数据与需要查询的数据 13 相同，就直接返回；<br>不相同时，则线性查找，从 index+1 位置开始一个一个位置地查找数据 13。</li><li>查询过程中不会遍历整个哈希表，只要查询到空位置，就停止，因为插入 13 时不会跳过空位置去插入其他位置。</li></ul></li><li><p>当删除 13 时：</p><ul><li>删除操作和上述两种情况类似，但需要注意的是，删除一个数据项时，不能将该位置下标的内容设置为 null，否则会影响到之后其他的查询操作，因为一遇到为 null 的位置就会停止查找。</li><li>通常删除一个位置的数据项时，我们可以将它进行特殊处理（比如设置为-1），这样在查找时遇到-1 就知道要继续查找。</li></ul></li></ul><p>线性探测存在的问题：</p><ul><li><p>线性探测存在一个比较严重的问题，就是聚集。</p></li><li><p>如哈希表中还没插入任何元素时，插入 23、24、25、26、27，这就意味着下标值为 3、4、5、6、7 的位置都放置了数据，这种一连串填充单元就称为聚集。</p></li><li><p>聚集会影响哈希表的性能，无论是插入&#x2F;查询&#x2F;删除都会影响。</p></li><li><p>比如插入 13 时就会发现，连续的单元 3~7 都不允许插入数据，并且在插入的过程中需要经历多次这种情况。二次探测法可以解决该问题。</p></li></ul><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BA%BF%E6%80%A7%E6%8E%A2%E6%B5%8B.png" alt="线性探测"></p><h5 id="二次探测"><a href="#二次探测" class="headerlink" title="二次探测"></a>二次探测</h5><p>上文所说的线性探测存在的问题：</p><ul><li><p>如果之前的数据是连续插入的，那么新插入的一个数据可能需要探测很长的距离；</p><p>二次探测是在线性探测的基础上进行了优化：</p></li><li><p>线性探测：我们可以看成是步长为 1 的探测，比如从下表值 x 开始，那么线性探测就是按照下标值：x+1、x+2、x+3 等依次探测；</p></li><li><p>二次探测：对步长进行了优化，比如从下标值 x 开始探测：x+1^2^、x+2^2^、x+3^3^ 。这样一次性探测比较长的距离，避免了数据聚集带来的影响。</p></li><li><p>二次探测存在的问题：</p><p>当插入数据分布性较大的一组数据时，比如：13-163-63-3-213，这种情况会造成步长不一的一种聚集（虽然这种情况出现的概率较线性探测的聚集要小），同样会影响性能。</p></li></ul><h5 id="再哈希法"><a href="#再哈希法" class="headerlink" title="再哈希法"></a>再哈希法</h5><p>在开放地址法中寻找空白单元格的最好的解决方式为再哈希化。</p><ul><li>二次探测的步长是固定的：1，4，9，16 依次类推。</li><li>现在需要一种方法：产生一种依赖关键字(数据)的探测序列，而不是每个关键字探测步长都一样。</li><li>这样，不同的关键字即使映射到相同的数组下标，也可以使用不同的探测序列。</li><li>再哈希法的做法为：把关键字用另一个哈希函数，再做一次哈希化，用这次哈希化的结果作为该关键字的步长。</li></ul><p>第二次哈希化需要满足以下两点：</p><ul><li>和第一个哈希函数不同，不然哈希化后的结果仍是原来位置；</li><li>不能输出为 0，否则每次探测都是原地踏步的死循环；</li></ul><p>优秀的哈希函数：</p><ul><li>stepSize &#x3D; constant - （key % constant）；</li><li>其中 constant 是质数，且小于数组的容量；</li><li>例如：stepSize &#x3D; 5 - （key % 5），满足需求，并且结果不可能为 0；</li></ul><p>哈希化的效率</p><p>哈希表中执行插入和搜索操作效率是非常高的。</p><ul><li>如果没有发生冲突，那么效率就会更高；</li><li>如果发生冲突，存取时间就依赖后来的探测长度；</li><li>平均探测长度以及平均存取时间，取决于填装因子，随着填装因子变大，探测长度会越来越长。</li></ul><h4 id="装填因子"><a href="#装填因子" class="headerlink" title="装填因子"></a>装填因子</h4><ul><li>装填因子表示当前哈希表中已经包含的数据项和整个哈希表长度的比值；</li><li>装填因子 &#x3D; 总数据项 &#x2F; 哈希表长度；</li><li>开放地址法的装填因子最大为 1，因为只有空白的单元才能放入元素；</li><li>链地址法的装填因子可以大于 1，因为只要愿意，拉链法可以无限延伸下去；</li></ul><h4 id="不同探测方式性能的比较"><a href="#不同探测方式性能的比较" class="headerlink" title="不同探测方式性能的比较"></a>不同探测方式性能的比较</h4><ul><li><p>线性探测</p><p>随着装填因子的增大，平均探测长度呈指数形式增长，性能较差。实际情况中，最好的装填因子取决于存储效率和速度之间的平衡，随着装填因子变小，存储效率下降，而速度上升。</p></li><li><p>二次探测和再哈希化的性能</p><p>二次探测和再哈希法性能相当，它们的性能比线性探测略好。由下图可知，随着装填因子的变大，平均探测长度呈指数形式增长，需要探测的次数也呈指数形式增长，性能不高。</p></li><li><p>链地址法的性能</p><p>随着装填因子的增加，平均探测长度呈线性增长，较为平缓。在开发中使用链地址法较多，比如 Java 中的 HashMap 中使用的就是链地址法。</p></li></ul><h3 id="哈希函数"><a href="#哈希函数" class="headerlink" title="哈希函数"></a>哈希函数</h3><p>哈希表的优势在于它的速度，所以哈希函数不能采用消耗性能较高的复杂算法。提高速度的一个方法是在哈希函数中尽量减少乘法和除法。</p><p>性能高的哈希函数应具备以下两个优点：</p><ul><li>快速的计算；</li><li>均匀的分布；</li></ul><h4 id="快速计算"><a href="#快速计算" class="headerlink" title="快速计算"></a>快速计算</h4><p>霍纳法则：在中国霍纳法则也叫做秦久韶算法，具体算法为：</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9C%8D%E7%BA%B3%E6%B3%95%E5%88%99.png" alt="霍纳法则"></p><p>求多项式的值时，首先计算最内层括号内一次多项式的值，然后由内向外逐层计算一次多项式的值。这种算法把求 n 次多项式 f(x)的值就转化为求 n 个一次多项式的值。</p><ul><li><p>变换之前：</p><ul><li>乘法次数：n(n+1)&#x2F;2 次；</li><li>加法次数：n 次；</li></ul></li><li><p>变换之后：</p><ul><li>乘法次数：n 次；</li><li>加法次数：n 次；</li></ul></li></ul><p>如果使用大 O 表示时间复杂度的话，直接从变换前的 O(N^2)降到了 O(N)。</p><h4 id="均匀分布"><a href="#均匀分布" class="headerlink" title="均匀分布"></a>均匀分布</h4><p>在设计哈希表时，我们已经有办法处理映射到相同下标值的情况：链地址法或者开放地址法。但是，为了提供效率，最好的情况还是让数据在哈希表中均匀分布。因此，我们需要在使用常量的地方，尽量使用质数。比如：哈希表的长度、N 次幂的底数等。</p><p>Java 中的 HashMap 采用的是链地址法，哈希化采用的是公式为：index &#x3D; HashCode(key) &amp; (Length-1) 即将数据化为二进制进行与运算，而不是取余运算。这样计算机直接运算二进制数据，效率更高。但是 JavaScript 在进行较大数据的与运算时会出现问题，所以我们使用 JavaScript 实现哈希化时采用取余运算。</p><h2 id="封装哈希表"><a href="#封装哈希表" class="headerlink" title="封装哈希表"></a>封装哈希表</h2><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">HashTable</span> () &#123;<br>   <span class="hljs-comment">// 属性</span><br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span> = [] <span class="hljs-comment">//存放的数组</span><br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> = <span class="hljs-number">0</span>  <span class="hljs-comment">// 当前存放的长度</span><br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">limit</span> = <span class="hljs-number">7</span>  <span class="hljs-comment">//当前数组的长度</span><br>   <span class="hljs-comment">/* 哈希函数 */</span><br>  <span class="hljs-title class_">HashTable</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hashFun</span> =  <span class="hljs-keyword">function</span> (<span class="hljs-params">str,size</span>) &#123;<br>    <span class="hljs-comment">// 定义哈希值</span><br>    <span class="hljs-keyword">let</span> hashCode = <span class="hljs-number">0</span><br><br>    <span class="hljs-comment">// 使用霍纳算法（秦九韶算法）计算哈希值</span><br>    <span class="hljs-keyword">for</span>( <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>;i&lt;str.<span class="hljs-property">length</span> ;i++ )&#123;<br>      hashCode = <span class="hljs-number">37</span> * hashCode + str.<span class="hljs-title function_">charCodeAt</span>(i)<br>    &#125;<br>    <span class="hljs-comment">// 取余操作</span><br>    <span class="hljs-keyword">let</span> index= hashCode % size<br>    <span class="hljs-comment">// 返回哈希化后的值</span><br>    <span class="hljs-keyword">return</span> index<br>  &#125;<br><br>   <span class="hljs-comment">// 方法</span><br>  <span class="hljs-comment">// 插入或者修改操作方法</span><br>  <span class="hljs-title class_">HashTable</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">put</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">key,value</span>) &#123;<br>    <span class="hljs-comment">// 根据key与value获取对应的index</span><br>    <span class="hljs-keyword">let</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hashFun</span>(key, <span class="hljs-variable language_">this</span>.<span class="hljs-property">limit</span>)<br>    <span class="hljs-comment">// 根据index，取出对应位置下的bucket</span><br>    <span class="hljs-keyword">let</span> bucket = <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>[index]<br>    <span class="hljs-comment">// 判断数组该位置下是否存在元素</span><br>    <span class="hljs-keyword">if</span>(!bucket) &#123;<br>      bucket = []<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>[index] = bucket<br>    &#125;<br>    <span class="hljs-comment">// 判断是否修改数据</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;bucket.<span class="hljs-property">length</span>;i++)&#123;<br>      <span class="hljs-keyword">let</span> tuple = bucket[i]<br>      <span class="hljs-keyword">if</span>(tuple[<span class="hljs-number">0</span>] == key)&#123;<br>        tuple[<span class="hljs-number">1</span>] = value<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>      &#125;<br>    &#125;<br>    <span class="hljs-comment">// 插入操作</span><br>    bucket.<span class="hljs-title function_">push</span>([key,value])<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> +=<span class="hljs-number">1</span><br>    <span class="hljs-keyword">let</span> newPrime = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPrime</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">limit</span>*<span class="hljs-number">2</span>)<br>    <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">limit</span> *<span class="hljs-number">0.75</span>)&#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resize</span>(newPrime)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 获取操作</span><br>  <span class="hljs-title class_">HashTable</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">get</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) &#123;<br>    <span class="hljs-comment">// 计算传入的key的对应位置</span><br>    <span class="hljs-keyword">let</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hashFun</span>(key,<span class="hljs-variable language_">this</span>.<span class="hljs-property">limit</span>)<br>    <span class="hljs-comment">// 根据计算得到的位置，取出bucket</span><br>    <span class="hljs-keyword">let</span> bucket = <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>[index]<br>    <span class="hljs-comment">// 判断取出的bucket</span><br>    <span class="hljs-keyword">if</span>(!bucket) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span><br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;bucket.<span class="hljs-property">length</span>;i++) &#123;<br>        <span class="hljs-keyword">let</span> tuple=bucket[i]<br>        <span class="hljs-keyword">if</span>(tuple[<span class="hljs-number">0</span>]==key) &#123;<br>          <span class="hljs-keyword">return</span> tuple[<span class="hljs-number">1</span>]<br>        &#125;<br>      &#125;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span><br>    &#125;<br>  &#125; <br>  <span class="hljs-comment">/* 判断质数 */</span><br>  <span class="hljs-title class_">HashTable</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">isPrime</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">number</span>) &#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i =<span class="hljs-number">2</span> ; i&lt;=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(number);i++) &#123;<br>      <span class="hljs-keyword">if</span>(number % i==<span class="hljs-number">0</span>)&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> number<br>  &#125;<br>  <span class="hljs-comment">// 获取质数的方法</span><br>  <span class="hljs-title class_">HashTable</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getPrime</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">number</span>) &#123;<br>    <span class="hljs-keyword">if</span>(number&lt;<span class="hljs-number">7</span>)&#123;<br>      number = <span class="hljs-number">7</span><br>    &#125;<br>    <span class="hljs-keyword">while</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isPrime</span>(number))&#123;<br>      number +=<span class="hljs-number">1</span><br>    &#125;<br>   <span class="hljs-keyword">return</span> number<br><br>  &#125;<br>  <span class="hljs-comment">// 删除操作</span><br>  <span class="hljs-title class_">HashTable</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">remove</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) &#123;<br>    <span class="hljs-comment">// 计算传入key所在位置</span><br>    <span class="hljs-keyword">let</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hashFun</span>(key,<span class="hljs-variable language_">this</span>.<span class="hljs-property">limit</span>)<br>    <span class="hljs-comment">// 根据计算的位置，取出</span><br>    <span class="hljs-keyword">let</span> bucket = <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>[index]<br>    <span class="hljs-comment">// 判断是否为空</span><br>    <span class="hljs-keyword">if</span>(!bucket) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>    &#125;<span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span> ;i&lt;bucket.<span class="hljs-property">length</span> ;i++) &#123;<br>        <span class="hljs-keyword">let</span> tuple = bucket[i]<br>        <span class="hljs-keyword">if</span>(tuple[<span class="hljs-number">0</span>] ==key) &#123;<br>          bucket.<span class="hljs-title function_">splice</span>(i,<span class="hljs-number">1</span>)<br>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> -=<span class="hljs-number">1</span><br>          <span class="hljs-comment">// 判断缩小容量</span><br>          <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">limit</span>&gt;<span class="hljs-number">7</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> &lt;<span class="hljs-variable language_">this</span>.<span class="hljs-property">limit</span> *<span class="hljs-number">0.25</span>)&#123;<br>            <span class="hljs-keyword">let</span> newLimit = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPrime</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">limit</span> / <span class="hljs-number">2</span>))<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resize</span>(newLimit)<br>          &#125;<br>          <span class="hljs-keyword">return</span> tuple[<span class="hljs-number">1</span>]<br>        &#125;<br>      &#125;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>  &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 判断是否为空</span><br>  <span class="hljs-title class_">HashTable</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">isEmpty</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> ==<span class="hljs-number">0</span><br>  &#125;<br>  <span class="hljs-comment">// 获取哈希表中的个数</span><br>  <span class="hljs-title class_">HashTable</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">size</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span><br>  &#125;<br>  <span class="hljs-comment">// 哈希表扩容</span><br>  <span class="hljs-title class_">HashTable</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">resize</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">newLimit</span>) &#123;<br>    <span class="hljs-comment">// 保存旧的数组</span><br>    <span class="hljs-keyword">let</span> oldStorage = <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span><br><br>    <span class="hljs-comment">// 重置所有属性</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span> = []<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> = <span class="hljs-number">0</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">limit</span> = newLimit<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>;i&lt;oldStorage.<span class="hljs-property">length</span> ; i++)&#123;<br>      <span class="hljs-keyword">let</span> bucket = oldStorage[i]<br>      <span class="hljs-keyword">if</span>(!bucket) &#123;<br>        <span class="hljs-keyword">continue</span><br>      &#125;<br>     <span class="hljs-comment">// 取出数据</span><br>     <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;bucket.<span class="hljs-property">length</span>;i++)&#123;<br>       <span class="hljs-comment">// 调用哈希函数方法</span><br>       <span class="hljs-keyword">let</span> tuple = bucket[i]<br>       <span class="hljs-keyword">let</span> index = <span class="hljs-keyword">new</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hashFun</span>(tuple[<span class="hljs-number">0</span>],<span class="hljs-variable language_">this</span>.<span class="hljs-property">limit</span>)<br>       <span class="hljs-comment">// 调用添加方法</span><br>       <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">put</span>(tuple[<span class="hljs-number">0</span>],tuple[<span class="hljs-number">1</span>])<br>     &#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><h3 id="测试哈希表"><a href="#测试哈希表" class="headerlink" title="测试哈希表"></a>测试哈希表</h3><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">/* 测试哈希函数 */</span><br><span class="hljs-keyword">const</span> hashtable = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashTable</span>()<br>hashtable.<span class="hljs-title function_">put</span>(<span class="hljs-string">&#x27;nba&#x27;</span>,<span class="hljs-number">18</span>)<br><span class="hljs-comment">// hashtable.put(&#x27;cba&#x27;,19)</span><br><span class="hljs-comment">// hashtable.put(&#x27;cuba&#x27;,20)</span><br>hashtable.<span class="hljs-title function_">put</span>(<span class="hljs-string">&#x27;nbl&#x27;</span>,<span class="hljs-number">21</span>)<br><span class="hljs-comment">// hashtable.put(&#x27;dba&#x27;,22)</span><br>hashtable.<span class="hljs-title function_">put</span>(<span class="hljs-string">&#x27;gba&#x27;</span>,<span class="hljs-number">23</span>)<br><br><span class="hljs-comment">// hashtable.put(&#x27;dba&#x27;,20)</span><br><span class="hljs-comment">// hashtable.put(&#x27;dba&#x27;,80)</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hashtable.<span class="hljs-title function_">remove</span>(<span class="hljs-string">&#x27;nbl&#x27;</span>))<br><br><span class="hljs-comment">// hashtable.resize(17)</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hashtable)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hashtable.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;nba&#x27;</span>))<br></code></pre></div></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>数据结构</category>
      
    </categories>
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>数据结构</tag>
      
      <tag>哈希表</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>javascript数据结构-数（二叉搜索树，红黑树）</title>
    <link href="/2022/05/20/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91%E7%BB%93%E6%9E%84%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
    <url>/2022/05/20/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91%E7%BB%93%E6%9E%84%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<p class="note note-warning">本博客参考于洛伊安妮·格罗纳编著的javascript数据结构与算法第三版及codeWay老师视频或其他博客资料，在此对此表示感谢!<br>github仓库：<a href="https://github.com/hzx17/DataStructures" style="color:#428bca;">https://github.com/hzx17/</a><p><h1 id="树结构"><a href="#树结构" class="headerlink" title="树结构"></a>树结构</h1><h3 id="什么是树？"><a href="#什么是树？" class="headerlink" title="什么是树？"></a>什么是树？</h3><h3 id="真实的树："><a href="#真实的树：" class="headerlink" title="真实的树："></a>真实的树：</h3><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%9C%9F%E5%AE%9E%E7%9A%84%E6%A0%91.png" alt="真实的树"></p><h3 id="树的特点："><a href="#树的特点：" class="headerlink" title="树的特点："></a>树的特点：</h3><ul><li>树一般都有一个根，连接着根的是树干；</li><li>树干会发生分叉，形成许多树枝，树枝会继续分化成更小的树枝；</li><li>树枝的最后是叶子；</li></ul><p>现实生活中很多结构都是树的抽象，模拟的树结构相当于旋转 <code>180°</code> 的树。</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91%E7%9A%84%E6%8A%BD%E8%B1%A1.png" alt="树的抽象"></p><h3 id="树结构对比于数组-x2F-链表-x2F-哈希表有哪些优势呢？"><a href="#树结构对比于数组-x2F-链表-x2F-哈希表有哪些优势呢？" class="headerlink" title="树结构对比于数组&#x2F;链表&#x2F;哈希表有哪些优势呢？"></a>树结构对比于数组&#x2F;链表&#x2F;哈希表有哪些优势呢？</h3><p>数组：</p><ul><li>优点：可以通过下标值访问，效率高；</li><li>缺点：查找数据时需要先对数据进行排序，生成有序数组，才能提高查找效率；并且在插入和删除元素时，需要大量的位移操作；</li></ul><p>链表：</p><ul><li>优点：数据的插入和删除操作效率都很高；</li><li>缺点：查找效率低，需要从头开始依次查找，直到找到目标数据为止；当需要在链表中间位置插入或删除数据时，插入或删除的效率都不高。</li></ul><p>哈希表：</p><ul><li>优点：哈希表的插入&#x2F;查询&#x2F;删除效率都非常高；</li><li>缺点：空间利用率不高，底层使用的数组中很多单元没有被利用；并且哈希表中的元素是无序的，不能按照固定顺序遍历哈希表中的元素；而且不能快速找出哈希表中最大值或最小值这些特殊值。</li></ul><p>树结构：</p><ul><li>优点：树结构综合了上述三种结构的优点，同时也弥补了它们存在的缺点（虽然效率不一定都比它们高），比如树结构中数据都是有序的，查找效率高；空间利用率高；并且可以快速获取最大值和最小值等。</li></ul><p>总的来说：每种数据结构都有自己特定的应用场景。</p><p>树结构：</p><ul><li><p>树（Tree）：由 n（n ≥ 0）个节点构成的有限集合。当 n &#x3D; 0 时，称为空树。</p></li><li><p>对于任意一棵非空树（n &gt; 0），它具备以下性质：</p><ul><li>数中有一个称为根（Root）的特殊节点，用 <strong>r</strong> 表示；</li><li>其余节点可分为 m（m &gt; 0）个互不相交的有限集合 T1，T2，…，Tm，其中每个集合本身又是一棵树，称为原来树的子树（SubTree）。</li></ul></li></ul><h3 id="树的常用术语："><a href="#树的常用术语：" class="headerlink" title="树的常用术语："></a>树的常用术语：</h3><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91%E7%9A%84%E5%B8%B8%E7%94%A8%E6%9C%AF%E8%AF%AD.png" alt="树的常用术语"></p><ul><li>节点的度（Degree）：节点的子树个数，比如节点 B 的度为 2；</li><li>树的度：树的所有节点中最大的度数，如上图树的度为 2；</li><li>叶节点（Leaf）：度为 0 的节点（也称为叶子节点），如上图的 H，I 等；</li><li>父节点（Parent）：度不为 0 的节点称为父节点，如上图节点 B 是节点 D 和 E 的父节点；</li><li>子节点（Child）：若 B 是 D 的父节点，那么 D 就是 B 的子节点；</li><li>兄弟节点（Sibling）：具有同一父节点的各节点彼此是兄弟节点，比如上图的 B 和 C，D 和 E 互为兄弟节点；</li><li>路径和路径长度：路径指的是一个节点到另一节点的通道，路径所包含边的个数称为路径长度，比如 A-&gt;H 的路径长度为 3；</li><li>节点的层次（Level）：规定根节点在 1 层，其他任一节点的层数是其父节点的层数加 1。如 B 和 C 节点的层次为 2；</li><li>树的深度（Depth）：树种所有节点中的最大层次是这棵树的深度，如上图树的深度为 4；</li></ul><h3 id="树结构的表示方式"><a href="#树结构的表示方式" class="headerlink" title="树结构的表示方式"></a>树结构的表示方式</h3><h5 id="最普通的表示方法："><a href="#最普通的表示方法：" class="headerlink" title="最普通的表示方法："></a>最普通的表示方法：</h5><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91%E7%9A%84%E6%9C%80%E6%99%AE%E9%80%9A%E8%A1%A8%E7%A4%BA%E6%96%B9%E5%BC%8F.png" alt="最普通的表示方法"></p><p>如图，树结构的组成方式类似于链表，都是由一个个节点连接构成。不过，根据每个父节点子节点数量的不同，每一个父节点需要的引用数量也不同。比如节点 A 需要 3 个引用，分别指向子节点 B，C，D；B 节点需要 2 个引用，分别指向子节点 E 和 F；K 节点由于没有子节点，所以不需要引用。</p><p>这种方法缺点在于我们无法确定某一结点的引用数。</p><h5 id="儿子-兄弟表示法："><a href="#儿子-兄弟表示法：" class="headerlink" title="儿子-兄弟表示法："></a>儿子-兄弟表示法：</h5><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%84%BF%E5%AD%90%E5%85%84%E5%BC%9F%E8%A1%A8%E7%A4%BA%E6%B3%95.png" alt="儿子-兄弟表示法"></p><p>这种表示方法可以完整地记录每个节点的数据，比如：</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">//节点A</span><br><span class="hljs-title class_">Node</span>&#123;<br>  <span class="hljs-comment">//存储数据</span><br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = data<br>  <span class="hljs-comment">//统一只记录左边的子节点</span><br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">leftChild</span> = B<br>  <span class="hljs-comment">//统一只记录右边的第一个兄弟节点</span><br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">rightSibling</span> = <span class="hljs-literal">null</span><br>&#125;<br><br><span class="hljs-comment">//节点B</span><br><span class="hljs-title class_">Node</span>&#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = data<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">leftChild</span> = E<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">rightSibling</span> = C<br>&#125;<br><br><span class="hljs-comment">//节点F</span><br><span class="hljs-title class_">Node</span>&#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = data<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">leftChild</span> = <span class="hljs-literal">null</span><br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">rightSibling</span> = <span class="hljs-literal">null</span><br>&#125;<br></code></pre></div></td></tr></table></figure><p>这种表示法的优点在于每一个节点中引用的数量都是确定的。</p><h5 id="儿子-兄弟表示法旋转"><a href="#儿子-兄弟表示法旋转" class="headerlink" title="儿子-兄弟表示法旋转"></a>儿子-兄弟表示法旋转</h5><p>儿子-兄弟表示法组成的树结构，将其顺时针旋转 45° 之后：</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91%E6%97%8B%E8%BD%AC45%E5%BA%A6.png" alt="旋转45度"></p><p>这样就成为了一棵二叉树，由此我们可以得出结论：任何树都可以通过二叉树进行模拟。但是这样父节点不是变了吗？其实，父节点的设置只是为了方便指向子节点，在代码实现中谁是父节点并没有关系，只要能正确找到对应节点即可。</p><h1 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h1><h3 id="二叉树的概念"><a href="#二叉树的概念" class="headerlink" title="二叉树的概念"></a>二叉树的概念</h3><p>如果树中的每一个节点最多只能由两个子节点，这样的树就称为二叉树；</p><h3 id="二叉树的组成"><a href="#二叉树的组成" class="headerlink" title="二叉树的组成"></a>二叉树的组成</h3><ul><li>二叉树可以为空，也就是没有节点；</li><li>若二叉树不为空，则它由根节点和称为其左子树 TL 和右子树 TR 的两个不相交的二叉树组成；</li></ul><h3 id="二叉树的五种形态"><a href="#二叉树的五种形态" class="headerlink" title="二叉树的五种形态"></a>二叉树的五种形态</h3><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E4%BA%8C%E5%8F%89%E6%A0%91%E5%BD%A2%E6%80%81.png" alt="二叉树五种形态"></p><p>上图分别表示：空的二叉树、只有一个节点的二叉树、只有左子树 TL 的二叉树、只有右子树 TR 的二叉树和有左右两个子树的二叉树。</p><h3 id="二叉树的特性"><a href="#二叉树的特性" class="headerlink" title="二叉树的特性"></a>二叉树的特性</h3><ul><li>一个二叉树的第 i 层的最大节点树为：2^(i-1)^，i &gt;&#x3D; 1；</li><li>深度为 k 的二叉树的最大节点总数为：2^k^ - 1 ，k &gt;&#x3D; 1；</li><li>对任何非空二叉树，若 n<del>0</del> 表示叶子节点的个数，n<del>2</del>表示度为 2 的非叶子节点个数，那么两者满足关系：n<del>0</del> &#x3D; n<del>2</del> + 1</li></ul><h3 id="特殊的二叉树"><a href="#特殊的二叉树" class="headerlink" title="特殊的二叉树"></a>特殊的二叉树</h3><h4 id="完美二叉树"><a href="#完美二叉树" class="headerlink" title="完美二叉树"></a>完美二叉树</h4><p>完美二叉树（Perfect Binary Tree）也成为满二叉树（Full Binary Tree），在二叉树中，除了最下一层的叶子节点外，每层节点都有 2 个子节点，这就构成了完美二叉树。</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91.png" alt="完美二叉树"></p><h4 id="完全二叉树"><a href="#完全二叉树" class="headerlink" title="完全二叉树"></a>完全二叉树</h4><p>完全二叉树（Complete Binary Tree）:</p><ul><li>除了二叉树最后一层外，其他各层的节点数都达到了最大值；</li><li>并且，最后一层的叶子节点从左向右是连续存在，只缺失右侧若干叶子节点；</li><li>完美二叉树是特殊的完全二叉树；</li></ul><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E4%B8%8D%E6%98%AF%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91.png" alt="不是完全二叉树"></p><p>在上图中，由于 H 缺失了右子节点，所以它不是完全二叉树。</p><h3 id="二叉树的数据存储"><a href="#二叉树的数据存储" class="headerlink" title="二叉树的数据存储"></a>二叉树的数据存储</h3><p>常见的二叉树存储方式为数组和链表：</p><h4 id="使用数组"><a href="#使用数组" class="headerlink" title="使用数组"></a>使用数组</h4><ul><li>完全二叉树：按从上到下，从左到右的方式存储数据。</li></ul><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E4%BA%8C%E5%8F%89%E6%A0%91%E5%AD%98%E5%82%A8.png" alt="存储"></p><table><thead><tr><th align="center">节点</th><th align="center">A</th><th align="center">B</th><th align="center">C</th><th align="center">D</th><th align="center">E</th><th align="center">F</th><th align="center">G</th><th align="center">H</th><th align="center">I</th></tr></thead><tbody><tr><td align="center">序号</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td align="center">8</td><td align="center">9</td></tr></tbody></table><p>使用数组存储时，取数据的时候也十分方便：左子节点的序号等于父节点序号 _ 2，右子节点的序号等于父节点序号 _ 2 + 1 。</p><ul><li>非完全二叉树：非完全二叉树需要转换成完全二叉树才能按照上面的方案存储，这样会浪费很大的存储空间。</li></ul><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9D%9E%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91%E5%AD%98%E5%82%A8.png" alt="非完全二叉树"></p><table><thead><tr><th align="center">节点</th><th align="center">A</th><th align="center">B</th><th align="center">C</th><th align="center">^</th><th align="center">^</th><th align="center">F</th><th align="center">^</th><th align="center">^</th><th align="center">^</th><th align="center">^</th><th align="center">^</th><th align="center">^</th><th align="center">M</th></tr></thead><tbody><tr><td align="center">序号</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td align="center">8</td><td align="center">9</td><td align="center">10</td><td align="center">11</td><td align="center">12</td><td align="center">13</td></tr></tbody></table><h4 id="使用链表"><a href="#使用链表" class="headerlink" title="使用链表"></a>使用链表</h4><p>二叉树最常见的存储方式为链表：每一个节点封装成一个 Node，Node 中包含存储的数据、左节点的引用和右节点的引用。</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E4%BD%BF%E7%94%A8%E9%93%BE%E8%A1%A8%E5%AD%98%E5%82%A8.png" alt="使用链表储存"></p><h1 id="二叉搜索树"><a href="#二叉搜索树" class="headerlink" title="二叉搜索树"></a>二叉搜索树</h1><p>二叉搜索树（BST，Binary Search Tree），也称为二叉排序树和二叉查找树。</p><p>二叉搜索树是一棵二叉树，可以为空。</p><p>如果不为空，则满足以下性质：</p><ul><li>条件 1：非空左子树的所有键值小于其根节点的键值。比如三中节点 6 的所有非空左子树的键值都小于 6；</li><li>条件 2：非空右子树的所有键值大于其根节点的键值；比如三中节点 6 的所有非空右子树的键值都大于 6；</li><li>条件 3：左、右子树本身也都是二叉搜索树；</li></ul><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91.png" alt="二叉搜索树规则"></p><p>如上图所示，树二和树三符合 3 个条件属于二叉树，树一不满足条件 3 所以不是二叉树。</p><p>总结：二叉搜索树的特点主要是较小的值总是保存在左节点上，相对较大的值总是保存在右节点上。这种特点使得二叉搜索树的查询效率非常高，这也就是二叉搜索树中“搜索”的来源。</p><h2 id="二叉搜索树应用举例"><a href="#二叉搜索树应用举例" class="headerlink" title="二叉搜索树应用举例"></a>二叉搜索树应用举例</h2><p>下面是一个二叉搜索树：</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E4%B8%BE%E4%BE%8B.png" alt="二叉搜索树举例"></p><p>若想在其中查找数据 10，只需要查找 4 次，查找效率非常高。</p><ul><li>第 1 次：将 10 与根节点 9 进行比较，由于 10 &gt; 9，所以 10 下一步与根节点 9 的右子节点 13 比较；</li><li>第 2 次：由于 10 &lt; 13，所以 10 下一步与父节点 13 的左子节点 11 比较；</li><li>第 3 次：由于 10 &lt; 11，所以 10 下一步与父节点 11 的左子节点 10 比较；</li><li>第 4 次：由于 10 &#x3D; 10，最终查找到数据 10 。</li></ul><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E6%9F%A5%E6%89%BE.png" alt="查找"></p><p>同样是 15 个数据，在排序好的数组中查询数据 10，需要查询 10 次：</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E6%9F%A5%E6%89%BE2.png" alt="image"></p><p>其实：如果是排序好的数组，可以通过二分查找：第一次找 9，第二次找 13，第三次找 15…。我们发现如果把每次二分的数据拿出来以树的形式表示的话就是二叉搜索树。这就是数组二分法查找效率之所以高的原因。</p><h2 id="二叉搜索树的封装"><a href="#二叉搜索树的封装" class="headerlink" title="二叉搜索树的封装"></a>二叉搜索树的封装</h2><p>二叉搜索树有四个最基本的属性：指向节点的根（root），节点中的键（key）、左指针（right）、右指针（right）。</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E5%B0%81%E8%A3%85.png" alt="封装"></p><p>所以，二叉搜索树中除了定义 root 属性外，还应定义一个节点内部类，里面包含每个节点中的 left、right 和 key 三个属性。</p><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// 节点类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">key</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span> = key;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> = <span class="hljs-literal">null</span>;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">right</span> = <span class="hljs-literal">null</span>;<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><h3 id="二叉搜索树的常见操作："><a href="#二叉搜索树的常见操作：" class="headerlink" title="二叉搜索树的常见操作："></a>二叉搜索树的常见操作：</h3><ul><li><code>insert(key)</code> 向树中插入一个新的键。</li><li><code>search(key)</code> 在树中查找一个键，如果节点存在，则返回 true；如果不存在，则返回 <code>false</code>。</li><li><code>preOrderTraverse</code> 通过先序遍历方式遍历所有节点。</li><li><code>inOrderTraverse</code> 通过中序遍历方式遍历所有节点。</li><li><code>postOrderTraverse</code> 通过后序遍历方式遍历所有节点。</li><li><code>min</code> 返回树中最小的值&#x2F;键。</li><li><code>max</code> 返回树中最大的值&#x2F;键。</li><li><code>remove(key)</code> 从树中移除某个键。</li></ul><h3 id="遍历数据"><a href="#遍历数据" class="headerlink" title="遍历数据"></a>遍历数据</h3><p>这里所说的树的遍历不仅仅针对二叉搜索树，而是适用于所有的二叉树。由于树结构不是线性结构，所以遍历方式有多种选择，常见的三种二叉树遍历方式为：</p><ul><li>先序遍历；</li><li>中序遍历；</li><li>后序遍历；</li></ul><p>还有层序遍历，使用较少。</p><h4 id="先序遍历"><a href="#先序遍历" class="headerlink" title="先序遍历"></a>先序遍历</h4><p>先序遍历的过程为：</p><p>首先，遍历根节点；<br>然后，遍历其左子树；<br>最后，遍历其右子树；<br><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%85%88%E5%BA%8F%E9%81%8D%E5%8E%86.png" alt="先序遍历"></p><h4 id="中序遍历"><a href="#中序遍历" class="headerlink" title="中序遍历"></a>中序遍历</h4><p>实现思路：与先序遍历原理相同，只不过是遍历的顺序不一样了。</p><p>首先，遍历其左子树；<br>然后，遍历根（父）节点；<br>最后，遍历其右子树；</p><p>中序遍历的结果为排序好的</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86.png" alt="中序遍历"></p><h4 id="后序遍历"><a href="#后序遍历" class="headerlink" title="后序遍历"></a>后序遍历</h4><p>实现思路：与先序遍历原理相同，只不过是遍历的顺序不一样了。</p><p>首先，遍历其左子树；<br>然后，遍历其右子树；<br>最后，遍历根（父）节点；</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86.png" alt="后序遍历"></p><h3 id="封装二叉搜索树"><a href="#封装二叉搜索树" class="headerlink" title="封装二叉搜索树"></a>封装二叉搜索树</h3><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">BinarySearchTree</span> () &#123;<br>  <span class="hljs-comment">/* 内部类 */</span><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">Node</span> (key) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> = <span class="hljs-literal">null</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span> = key<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">right</span>  = <span class="hljs-literal">null</span><br>  &#125;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> = <span class="hljs-literal">null</span><br>  <span class="hljs-comment">// this.previousOrderTraveralResults = &quot;&quot;  // 我这里将先序遍历的结果保存在这里</span><br>  <span class="hljs-comment">// this.middleOrderTraveralResults = &quot;&quot;  // 我这里将中序遍历的结果保存在这里</span><br>  <span class="hljs-title class_">BinarySearchTree</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">insert</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) &#123;<br>    <span class="hljs-comment">//  先根据key创建新的节点</span><br>    <span class="hljs-keyword">let</span> newNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(key)<br>    <span class="hljs-comment">// 判断根节点是否有值</span><br>    <span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> = newNode<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-comment">// 与根节点比较</span><br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">insertNode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>,newNode)<br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">// 删除节点</span><br>  <span class="hljs-title class_">BinarySearchTree</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">remove</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) &#123;<br>    <span class="hljs-keyword">let</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> <span class="hljs-comment">//保存当前节点</span><br>    <span class="hljs-keyword">let</span> parent = <span class="hljs-literal">null</span> <span class="hljs-comment">// 保存当前节点的父节点</span><br>    <span class="hljs-keyword">let</span> isLeftChild = <span class="hljs-literal">false</span> <span class="hljs-comment">// 是否为当前节点的左节点</span><br>    <span class="hljs-comment">// 1.寻找要删除的节点</span><br>    <span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>)&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>    &#125;<br>    <span class="hljs-keyword">while</span>(current.<span class="hljs-property">key</span> !==key)&#123;<br>      parent =current<br>      <span class="hljs-keyword">if</span>(current.<span class="hljs-property">key</span> &lt; key) &#123;<br>        current = current.<span class="hljs-property">right</span><br>        isLeftChild = <span class="hljs-literal">false</span><br>      &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(current.<span class="hljs-property">key</span> &gt;key) &#123;<br>        current = current.<span class="hljs-property">left</span><br>        isLeftChild = <span class="hljs-literal">true</span><br>      &#125;<br>      <span class="hljs-keyword">if</span>(current ==<span class="hljs-literal">null</span>)&#123;<br>        <span class="hljs-comment">// 2.有两种情况，未找到和找到</span><br>        <span class="hljs-comment">// 未找到就返回false</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>      &#125;<br>    &#125;<br>    <span class="hljs-comment">// 3.找到删除的节点，又分为三种情况 </span><br>    <span class="hljs-comment">// 3.1 要删除的节点为叶节点</span><br>    <span class="hljs-keyword">if</span>(current.<span class="hljs-property">left</span> ==<span class="hljs-literal">null</span> &amp;&amp; current.<span class="hljs-property">right</span> ==<span class="hljs-literal">null</span>) &#123;<br>      <span class="hljs-keyword">if</span>(current == <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> =<span class="hljs-literal">null</span><br>      &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(isLeftChild)&#123; <span class="hljs-comment">//如果为左节点</span><br>        parent.<span class="hljs-property">left</span> = <span class="hljs-literal">null</span><br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>       parent.<span class="hljs-property">right</span> = <span class="hljs-literal">null</span><br>      &#125;<br>    &#125;<br>    <span class="hljs-comment">// 3.2 要删除的节点为只有一个叶节点的上一级</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (current.<span class="hljs-property">left</span> == <span class="hljs-literal">null</span>&amp;&amp; current.<span class="hljs-property">right</span> !==<span class="hljs-literal">null</span>) &#123;<br>      <span class="hljs-keyword">if</span>(isLeftChild)&#123;<br>        parent.<span class="hljs-property">left</span> = current.<span class="hljs-property">right</span><br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">key</span> == key) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> = current.<span class="hljs-property">right</span><br>      &#125;<br>      <span class="hljs-keyword">else</span> &#123;<br>        parent.<span class="hljs-property">right</span> = current.<span class="hljs-property">right</span><br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (current.<span class="hljs-property">left</span> !== <span class="hljs-literal">null</span>&amp;&amp; current.<span class="hljs-property">right</span> ==<span class="hljs-literal">null</span>) &#123;<br>      <span class="hljs-keyword">if</span>(isLeftChild)&#123;<br>        parent.<span class="hljs-property">left</span>= current.<span class="hljs-property">left</span><br>      &#125;<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">key</span> == key) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> = current.<span class="hljs-property">left</span><br>      &#125;<br>      <span class="hljs-keyword">else</span> &#123;<br>        parent.<span class="hljs-property">right</span> = current.<span class="hljs-property">left</span><br>      &#125;<br>    &#125;<br>    <span class="hljs-comment">// 3.3 要删除的节点有两个子节点</span><br>    <span class="hljs-keyword">if</span>(current.<span class="hljs-property">left</span> !== <span class="hljs-literal">null</span> &amp;&amp; current.<span class="hljs-property">right</span> !==<span class="hljs-literal">null</span>) &#123;<br>      <span class="hljs-comment">// 调用查找后继节点的函数</span><br>      <span class="hljs-keyword">let</span> successor = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getSuccessor</span>(current)<br>      <span class="hljs-keyword">if</span>(current == <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>)&#123; <span class="hljs-comment">//判断是否为根节点</span><br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> = successor<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isLeftChild)&#123;<br>        parent.<span class="hljs-property">left</span> = successor<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        parent.<span class="hljs-property">right</span> = successor<br>      &#125;<br>      successor.<span class="hljs-property">left</span> = current.<span class="hljs-property">left</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> key<br>  &#125;<br>  <span class="hljs-comment">// 当删除二叉搜索树节点左右都有子节点时，寻找替代节点</span><br>  <span class="hljs-title class_">BinarySearchTree</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getSuccessor</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">delNode</span>) &#123;<br>     <span class="hljs-comment">//定义变量找到删除节点的后继</span><br>    <span class="hljs-keyword">let</span> successor = delNode <span class="hljs-comment">// 返回的节点</span><br>    <span class="hljs-keyword">let</span> current = delNode.<span class="hljs-property">right</span> <span class="hljs-comment">// 当前所在的节点</span><br>    <span class="hljs-keyword">let</span> successorParent = delNode <span class="hljs-comment">// 当前所在节点的父节点</span><br>    <span class="hljs-comment">// 寻找后继，从该节点的左侧，应当寻找最大值，右侧应当寻找最小值</span><br>    <span class="hljs-comment">// 这里我们寻找最大值</span><br>    <span class="hljs-keyword">while</span>(current !==<span class="hljs-literal">null</span>) &#123;<br>      successorParent = successor<br>      successor = current<br>      current = current.<span class="hljs-property">left</span><br>    &#125;<br>    <span class="hljs-keyword">if</span>(successor !== delNode.<span class="hljs-property">right</span>) &#123; <span class="hljs-comment">// 如果判断找到的后续节点是否为删除的节点</span><br>      successorParent.<span class="hljs-property">left</span> = successor.<span class="hljs-property">right</span><br>      successor.<span class="hljs-property">right</span> = delNode.<span class="hljs-property">right</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> successor<br>  &#125;<br>  <span class="hljs-comment">// 二叉搜索树搜索指定key</span><br>  <span class="hljs-title class_">BinarySearchTree</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">serach</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>    <span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>)&#123; <span class="hljs-comment">//不存在节点</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>    &#125;<br>    <span class="hljs-keyword">let</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> <span class="hljs-comment">// 将跟节点取出</span><br>    <span class="hljs-keyword">while</span>(current) &#123;<br>      <span class="hljs-keyword">if</span>(current.<span class="hljs-property">key</span> &gt; data)&#123;<br>        current = current.<span class="hljs-property">left</span><br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (current.<span class="hljs-property">key</span> &lt; data) &#123;<br>        current = current.<span class="hljs-property">right</span><br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(current.<span class="hljs-property">key</span> == data) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>  &#125;<br>  <span class="hljs-comment">//  二叉搜索树的最大值</span><br>  <span class="hljs-title class_">BinarySearchTree</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">minKey</span> =  <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span><br>    &#125; <br>    <span class="hljs-keyword">let</span> current =<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span><br>    <span class="hljs-keyword">while</span>(current)&#123;<br>      <span class="hljs-keyword">if</span>(current.<span class="hljs-property">left</span>)&#123;<br>        current = current.<span class="hljs-property">left</span><br>        <span class="hljs-keyword">continue</span><br>      &#125;<br>      <span class="hljs-keyword">return</span> current.<span class="hljs-property">key</span><br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">//  二叉搜索树的最大值</span><br>  <span class="hljs-title class_">BinarySearchTree</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">maxKey</span> =  <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span><br>    &#125; <br>    <span class="hljs-keyword">let</span> current =<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span><br>    <span class="hljs-keyword">while</span>(current)&#123;<br>      <span class="hljs-keyword">if</span>(current.<span class="hljs-property">right</span>)&#123;<br>        current = current.<span class="hljs-property">right</span><br>        <span class="hljs-keyword">continue</span><br>      &#125;<br>      <span class="hljs-keyword">return</span> current.<span class="hljs-property">key</span><br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">// 搜索二叉树先序遍历</span><br>  <span class="hljs-title class_">BinarySearchTree</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">previousOrderTraveral</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">handler</span>) &#123;<br>    <span class="hljs-comment">// 采用递归的方法</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">previousOrderTraveralNode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>,handler)<br>  &#125;<br>  <span class="hljs-comment">// 搜索二叉树中序遍历</span><br>  <span class="hljs-title class_">BinarySearchTree</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">middleOrderTraveral</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">handler</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">middleOrderTraveralNode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>,handler)<br>  &#125;<br>  <span class="hljs-comment">// 搜索二叉树后序遍历</span><br>  <span class="hljs-title class_">BinarySearchTree</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">backOrderTraveral</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">handler</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">backOrderTraveralNode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>,handler)<br>  &#125;<br>    <span class="hljs-comment">// 对外给用户暴露的方法，插入递归方法</span><br>  <span class="hljs-title class_">BinarySearchTree</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">insertNode</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">node,newNode</span>) &#123;<br>    <span class="hljs-keyword">if</span> (newNode.<span class="hljs-property">key</span> &lt; node.<span class="hljs-property">key</span>)&#123; <span class="hljs-comment">// 向左查找</span><br>      <span class="hljs-keyword">if</span>(!node.<span class="hljs-property">left</span>) &#123;<br>        node.<span class="hljs-property">left</span> = newNode<br>      &#125;<span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">insertNode</span>(node.<span class="hljs-property">left</span>,newNode)<br>      &#125;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (newNode.<span class="hljs-property">key</span> &gt; node.<span class="hljs-property">key</span>)&#123;<span class="hljs-comment">// 向右查找</span><br>      <span class="hljs-keyword">if</span>(!node.<span class="hljs-property">right</span>) &#123;<br>        node.<span class="hljs-property">right</span> = newNode<br>      &#125;<span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">insertNode</span>(node.<span class="hljs-property">right</span>,newNode)<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">// 先序遍历递归</span><br>  <span class="hljs-title class_">BinarySearchTree</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">previousOrderTraveralNode</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">node,handler</span>) &#123;<br>    <span class="hljs-keyword">if</span>(node) &#123;<br>      <span class="hljs-title function_">handler</span>(node.<span class="hljs-property">key</span>)<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">previousOrderTraveralNode</span>(node.<span class="hljs-property">left</span>,handler)<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">previousOrderTraveralNode</span>(node.<span class="hljs-property">right</span>,handler)<br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">// 中序遍历递归 </span><br>  <span class="hljs-title class_">BinarySearchTree</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">middleOrderTraveralNode</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">node ,handler</span>) &#123;<br>    <span class="hljs-keyword">if</span>(node) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">middleOrderTraveralNode</span>(node.<span class="hljs-property">left</span>,handler) <br>      <span class="hljs-title function_">handler</span>(node.<span class="hljs-property">key</span>)<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">middleOrderTraveralNode</span>(node.<span class="hljs-property">right</span>,handler)<br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">// 后序遍历递归</span><br>  <span class="hljs-title class_">BinarySearchTree</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">backOrderTraveralNode</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">node ,handler</span>) &#123;<br>    <span class="hljs-keyword">if</span>(node) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">backOrderTraveralNode</span>(node.<span class="hljs-property">left</span>,handler) <br>      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">backOrderTraveralNode</span>(node.<span class="hljs-property">right</span>,handler)<br>      <span class="hljs-title function_">handler</span>(node.<span class="hljs-property">key</span>)<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><h3 id="测试二叉搜索树"><a href="#测试二叉搜索树" class="headerlink" title="测试二叉搜索树"></a>测试二叉搜索树</h3><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">/*  测试二叉搜索树 */</span><br><span class="hljs-keyword">const</span> bst = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BinarySearchTree</span> ()<br><span class="hljs-comment">// 插入数据</span><br>bst.<span class="hljs-title function_">insert</span>(<span class="hljs-number">11</span>)<br>bst.<span class="hljs-title function_">insert</span>(<span class="hljs-number">7</span>)<br>bst.<span class="hljs-title function_">insert</span>(<span class="hljs-number">15</span>)<br>bst.<span class="hljs-title function_">insert</span>(<span class="hljs-number">5</span>)<br>bst.<span class="hljs-title function_">insert</span>(<span class="hljs-number">3</span>)<br>bst.<span class="hljs-title function_">insert</span>(<span class="hljs-number">9</span>)<br>bst.<span class="hljs-title function_">insert</span>(<span class="hljs-number">8</span>)<br>bst.<span class="hljs-title function_">insert</span>(<span class="hljs-number">10</span>)<br>bst.<span class="hljs-title function_">insert</span>(<span class="hljs-number">13</span>)<br>bst.<span class="hljs-title function_">insert</span>(<span class="hljs-number">12</span>)<br>bst.<span class="hljs-title function_">insert</span>(<span class="hljs-number">14</span>)<br>bst.<span class="hljs-title function_">insert</span>(<span class="hljs-number">20</span>)<br>bst.<span class="hljs-title function_">insert</span>(<span class="hljs-number">18</span>)<br>bst.<span class="hljs-title function_">insert</span>(<span class="hljs-number">25</span>)<br>bst.<span class="hljs-title function_">insert</span>(<span class="hljs-number">6</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bst.<span class="hljs-title function_">remove</span>(<span class="hljs-number">15</span>)) <span class="hljs-comment">//删除节点</span><br><span class="hljs-keyword">let</span> previousOrderTraveralResults = <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-keyword">let</span> middleOrderTraveralResults = <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-keyword">let</span> backOrderTraveralResults = <span class="hljs-string">&quot;&quot;</span><br>bst.<span class="hljs-title function_">previousOrderTraveral</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>)&#123;<br>  previousOrderTraveralResults += key +<span class="hljs-string">&quot; &quot;</span><br>&#125;)<span class="hljs-comment">// 先序遍历</span><br>bst.<span class="hljs-title function_">middleOrderTraveral</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>)&#123;<br>  middleOrderTraveralResults += key +<span class="hljs-string">&quot; &quot;</span><br>&#125;)<span class="hljs-comment">// 中序遍历</span><br>bst.<span class="hljs-title function_">backOrderTraveral</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>)&#123;<br>  backOrderTraveralResults += key +<span class="hljs-string">&quot; &quot;</span><br>&#125;)<span class="hljs-comment">// 后序遍历</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;先序遍历的结果:&quot;</span>+previousOrderTraveralResults)  <span class="hljs-comment">//先序遍历的结果</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;中序遍历的结果:&quot;</span>+middleOrderTraveralResults)  <span class="hljs-comment">//中序遍历的结果</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;后序遍历的结果:&quot;</span>+backOrderTraveralResults)  <span class="hljs-comment">// 后序遍历的结果</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;最大值:&quot;</span>+bst.<span class="hljs-title function_">maxKey</span>())  <span class="hljs-comment">// 最大值</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;最小值:&quot;</span>+bst.<span class="hljs-title function_">minKey</span>())  <span class="hljs-comment">//最小值</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bst.<span class="hljs-title function_">serach</span>(<span class="hljs-number">25</span>))  <span class="hljs-comment">//搜索节点</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bst) <br></code></pre></div></td></tr></table></figure><h1 id="平衡树"><a href="#平衡树" class="headerlink" title="平衡树"></a>平衡树</h1><h3 id="二叉搜索树的缺陷"><a href="#二叉搜索树的缺陷" class="headerlink" title="二叉搜索树的缺陷"></a>二叉搜索树的缺陷</h3><p>当插入的数据是有序的数据，就会造成二叉搜索树的深度过大。当插入一组有序数据：6 5 4 3 2就会变成深度过大的搜索二叉树，会严重影响二叉搜索树的性能。使其查询效率就会接近链表结构</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%B9%B3%E8%A1%A1%E6%A0%91.png" alt="image"></p><h3 id="非平衡树"><a href="#非平衡树" class="headerlink" title="非平衡树"></a>非平衡树</h3><p>比较好的二叉搜索树，它的数据应该是左右均匀分布的；<br>但是插入连续数据后，二叉搜索树中的数据分布就变得不均匀了，我们称这种树为非平衡树；<br>对于一棵平衡二叉树来说，插入&#x2F;查找等操作的效率是O（logN）；<br>而对于一棵非平衡二叉树来说，相当于编写了一个链表，查找效率变成了O（N）;</p><h3 id="树的平衡性"><a href="#树的平衡性" class="headerlink" title="树的平衡性"></a>树的平衡性</h3><p>为了能以较快的时间O（logN）来操作一棵树，我们需要保证树总是平衡的：</p><p>起码大部分是平衡的，此时的时间复杂度也是接近O（logN）的；<br>这就要求树中每个节点左边的子孙节点的个数，应该尽可能地等于右边的子孙节点的个数；<br>常见的平衡树</p><ul><li>AVL树：是最早的一种平衡树，它通过在每个节点多存储一个额外的数据来保持树的平衡。由于AVL树是平衡树，所以它的时间复杂度也是O（logN）。但是它的整体效率不如红黑树，开发中比较少用。</li><li>红黑树：同样通过一些特性来保持树的平衡，时间复杂度也是O（logN）。进行插入&#x2F;删除等操作时，性能优于AVL树，所以平衡树的应用基本都是红黑树。</li></ul><h1 id="红黑树"><a href="#红黑树" class="headerlink" title="红黑树"></a>红黑树</h1><h3 id="红黑树的五条规则"><a href="#红黑树的五条规则" class="headerlink" title="红黑树的五条规则"></a>红黑树的五条规则</h3><p>红黑树除了符合二叉搜索树的基本规则外，还添加了以下特性：</p><ul><li>规则1：节点是红色或黑色的；</li><li>规则2：根节点是黑色的；</li><li>规则3：每个叶子节点都是黑色的空节点（NIL节点）；</li><li>规则4：每个红色节点的两个子节点都是黑色的（从每个叶子到根的所有路径上不可能有两个连续的红色节点）；</li><li>规则5：从任一节点到其每个叶子节点的所有路径都包含相同数目的黑色节点；</li></ul><h3 id="红黑树的相对平衡"><a href="#红黑树的相对平衡" class="headerlink" title="红黑树的相对平衡"></a>红黑树的相对平衡</h3><p>前面5条规则的约束确保了以下红黑树的关键特性：</p><ul><li><p>从根到叶子节点的最长路径，不会超过最短路径的两倍；</p></li><li><p>结果就是这棵树基本是平衡的；</p></li><li><p>虽然没有做到绝对的平衡，但是可以保证在最坏的情况下，该树依然是高效的；<br>为什么可以做到最长路径不超过最短路径的两倍呢？</p></li><li><p>性质4决定了路径上不能有两个相连的红色节点；</p></li><li><p>所以，最长路径一定是红色节点和黑色节点交替而成的；</p></li><li><p>由于根节点和叶子节点都是黑色的，最短路径可能都是黑色节点，并且最长路径中一定是黑色节点多于红色节点；</p></li><li><p>性质5决定了所有路径上都有相同数目的黑色节点；</p></li><li><p>这就表明了没有路径能多于其他任何路径两倍长。</p></li></ul><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BA%A2%E9%BB%91%E6%A0%91.png" alt="红黑树"></p><h3 id="红黑树的三种变换"><a href="#红黑树的三种变换" class="headerlink" title="红黑树的三种变换"></a>红黑树的三种变换</h3><p>插入一个新节点时，有可能树不再平衡，可以通过三种方式的变换使树保持平衡：</p><ul><li>变色；</li><li>左旋转；</li><li>右旋转；</li></ul><h4 id="变色"><a href="#变色" class="headerlink" title="变色"></a>变色</h4><p>为了重新符合红黑树的规则，需要把红色节点变为黑色，或者把黑色节点变为红色；</p><p>插入的新节点通常都是红色节点：</p><ul><li><p>当插入的节点为红色的时候，大多数情况不违反红黑树的任何规则；</p></li><li><p>而插入黑色节点，必然会导致一条路径上多了一个黑色节点，这是很难调整的；</p></li><li><p>红色节点虽然可能导致红红相连的情况，但是这种情况可以通过颜色调换和旋转来调整；</p></li></ul><h4 id="左旋转"><a href="#左旋转" class="headerlink" title="左旋转"></a>左旋转</h4><p>以节点X为根逆时针旋转二叉搜索树，使得父节点原来的位置被自己的右子节点替代，左子节点的位置被父节点替代；</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%B7%A6%E6%97%8B%E8%BD%AC.png" alt="左旋转"></p><p>详解：</p><p>如上图所示，左旋转之后：</p><p>节点X取代了节点a原来的位置；<br>节点Y取代了节点X原来的位置；<br>节点X的左子树 a 仍然是节点X的左子树（这里X的左子树只有一个节点，有多个节点时同样适用，以下同理）；<br>节点Y的右子树 c 仍然是节点Y的右子树；<br>节点Y的左子树 b 向左平移成为了节点X的右子树；<br>除此之外，二叉搜索树左旋转之后仍为二叉搜索树：</p><h4 id="右旋转"><a href="#右旋转" class="headerlink" title="右旋转"></a>右旋转</h4><p>以节点X为根顺时针旋转二叉搜索树，使得父节点原来的位置被自己的左子节点替代，右子节点的位置被父节点替代；</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%8F%B3%E6%97%8B%E8%BD%AC.png" alt="右旋转"></p><p>详解：</p><p>如上图所示，右旋转之后：</p><p>节点X取代了节点a原来的位置；<br>节点Y取代了节点X原来的位置；<br>节点X的右子树 a 仍然是节点X的右子树（这里X的右子树虽然只有一个节点，但是多个节点时同样适用，以下同理）；<br>节点Y的左子树 b 仍然是节点Y的左子树；<br>节点Y的右子树 c 向右平移成为了节点X的左子树；<br>除此之外，二叉搜索树右旋转之后仍为二叉搜索树：</p><h3 id="红黑树的插入操作"><a href="#红黑树的插入操作" class="headerlink" title="红黑树的插入操作"></a>红黑树的插入操作</h3><p>首先需要明确，在保证满足红黑树5条规则的情况下，新插入的节点必然是红色节点。</p><p>为了方便说明，规定以下四个节点：新插入节点为N（Node），N的父节点为P（Parent），P的兄弟节点为U（Uncle），U的父节点为G（Grandpa）</p><h4 id="情况1"><a href="#情况1" class="headerlink" title="情况1"></a>情况1</h4><p>当插入的新节点N位于树的根上时，没有父节点。</p><p>这种情况下，只需要将红色节点变为黑色节点即可满足规则2 。</p><h4 id="情况2"><a href="#情况2" class="headerlink" title="情况2"></a>情况2</h4><p>新界点N的父节点P为黑色节点，此时不需要任何变化。</p><p>此时既满足规则4也满足规则5。尽管新节点是红色的，但是新节点N有两个黑色节点NIL，所以通向它的路径上黑色节点的个数依然相等，因此满足规则5 。</p><h4 id="情况3"><a href="#情况3" class="headerlink" title="情况3"></a>情况3</h4><p>节点P为红色，节点U也为红色，此时节点G必为黑色，即父红叔红祖黑。</p><p>在这种情况下需要：</p><p>先将父节点P变为黑色；<br>再将叔叔节点U变为黑色；<br>最后将祖父节点G变为红色；<br>即变为父黑叔黑祖红，如下图所示：</p><p>可能出现的问题：</p><p>N的祖父节点G的父节点也可能是红色，这就违反了规则4，此时可以通过递归调整节点颜色；<br>当递归调整到根节点时就需要旋转了，如下图节点A和节点B所示，具体情况后面会介绍；</p><h4 id="情况4"><a href="#情况4" class="headerlink" title="情况4"></a>情况4</h4><p>节点P是红色节点，节点U是黑色节点，并且节点N为节点P的左子节点，此时节点G一定是黑色节点，即父红叔黑祖黑。</p><p>在这种情况下需要：</p><p>先变色：将父节点P变为黑色，将祖父节点G变为红色；<br>后旋转：以祖父节点G为根进行右旋转；</p><h4 id="情况5"><a href="#情况5" class="headerlink" title="情况5"></a>情况5</h4><p>节点P是红色节点，节点U是黑色节点，并且节点N为节点P的右子节点，此时节点G一定是黑色节点，即父红叔黑祖黑。</p><p>在这种情况下需要：</p><p>先以节点P为根进行左旋转；<br>随后将红色节点P和黑色节点B看成一个整体的红色节点N1，将新插入的红色节点N看成红色节点P1。此时整体就转换为了情况4。</p><p>接着可以按照情况4进行处理：</p><p>先变色：将N1节点的父节点P1变为黑色，将祖父节点G变为红色；</p><p>后旋转：以祖父节点G为根进行右旋转，旋转后如图 e 所示；</p><p>最后将节点N1和P1变换回来，完成节点N的插入。</p>]]></content>
    
    
    <categories>
      
      <category>数据结构</category>
      
    </categories>
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>数据结构</tag>
      
      <tag>树，二叉搜索树，红黑树</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>javascript数据结构-Set集合与Map字典</title>
    <link href="/2022/05/19/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9B%86%E5%90%88%E4%B8%8E%E5%AD%97%E5%85%B8%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
    <url>/2022/05/19/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%9B%86%E5%90%88%E4%B8%8E%E5%AD%97%E5%85%B8%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<p class="note note-warning">本博客参考于洛伊安妮·格罗纳编著的javascript数据结构与算法第三版及codeWay老师视频或其他博客资料，在此对此表示感谢!<br>github仓库：<a href="https://github.com/hzx17/DataStructures" style="color:#428bca;">https://github.com/hzx17/</a><p><h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><p>几乎每种编程语言中，都有集合结构。集合比较常见的实现方式是哈希表。</p><h3 id="集合特点"><a href="#集合特点" class="headerlink" title="集合特点"></a>集合特点</h3><ul><li><p>集合通常是由一组<strong>无序的</strong>、<strong>不能重复的</strong>元素构成。</p></li><li><p>数学中常指的集合中的元素是可以重复的，但是计算机中集合的元素不能重复。</p></li><li><p>集合是特殊的数组。</p><ul><li>特殊之处在于里面的元素没有顺序，也不能重复。</li><li>没有顺序意味着不能通过下标值进行访问，不能重复意味着相同的对象在集合中只会存在一份。</li></ul></li></ul><h3 id="封装集合"><a href="#封装集合" class="headerlink" title="封装集合"></a>封装集合</h3><p>ES6 中的 <code>Set</code> 就是一个集合类，这里我们重新封装一个 <code>Set</code> 类，了解集合的底层实现。</p><h3 id="Set集合的封装"><a href="#Set集合的封装" class="headerlink" title="Set集合的封装"></a>Set集合的封装</h3><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Set</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">// 集合属性,使用keys将其取出</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span> = &#123;&#125;<br>  <span class="hljs-comment">// 集合方法</span><br>  <span class="hljs-comment">//添加方法</span><br>  <span class="hljs-title class_">Set</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">add</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) &#123;<br>    <span class="hljs-comment">// 判断当前集合中是否已经包含了该元素</span><br>    <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">hasOwnProperty</span>(value))&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[value] = value<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">// 元素是否存在于集合中</span><br>  <span class="hljs-title class_">Set</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">has</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">hasOwnProperty</span>(value)<br>  &#125;<br>  <span class="hljs-comment">// remove方法</span><br>  <span class="hljs-title class_">Set</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">remove</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>) &#123;<br>    <span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[value])&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>    &#125;<br>    <span class="hljs-comment">// 使用delect操作符，删除元素</span><br>    <span class="hljs-keyword">delete</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[value]<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>  &#125;<br>  <span class="hljs-comment">// 清除</span><br>  <span class="hljs-title class_">Set</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">clear</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span> = &#123;&#125;<br>  &#125;<br>  <span class="hljs-comment">// 获取集合长度</span><br>  <span class="hljs-title class_">Set</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">size</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>).<span class="hljs-property">length</span><br>  &#125;<br>  <span class="hljs-comment">// 获取集合中所有元素</span><br>  <span class="hljs-title class_">Set</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">values</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>)<br>  &#125;<br><br>  <span class="hljs-comment">// 并集操作</span><br>  <span class="hljs-title class_">Set</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">union</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">otherSet</span>) &#123;<br>    <span class="hljs-comment">// this:集合对象A</span><br>    <span class="hljs-comment">// otherSet:集合对象B</span><br>    <span class="hljs-keyword">const</span> unionSet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()<br>    <span class="hljs-comment">//将取出集合中所有元素,并放入集合A集合中</span><br>    <span class="hljs-keyword">let</span> values = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">values</span>()<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span> ;i &lt; values.<span class="hljs-property">length</span> ;i++) &#123;<br>      unionSet.<span class="hljs-title function_">add</span>(values[i])<br>    &#125;<br>    values = otherSet.<span class="hljs-title function_">values</span>()<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>;i&lt;values.<span class="hljs-property">length</span> ;i++) &#123;<br>      unionSet.<span class="hljs-title function_">add</span>(values[i])<br>    &#125;<br>    <span class="hljs-keyword">return</span> unionSet<br>  &#125;<br>  <span class="hljs-comment">//交集操作</span><br>  <span class="hljs-title class_">Set</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">intersection</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">otherSet</span>) &#123;<br>    <span class="hljs-comment">// this: 为集合A</span><br>    <span class="hljs-comment">// otherSet为集合B</span><br>    <span class="hljs-comment">// 创建交集集合</span><br>    <span class="hljs-keyword">const</span> intersectionSet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()<br>    <span class="hljs-keyword">let</span> valuesA = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">values</span>()<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>;i&lt;valuesA.<span class="hljs-property">length</span>;i++) &#123;<br>      <span class="hljs-keyword">if</span>(otherSet.<span class="hljs-title function_">has</span>(valuesA[i]))&#123;<br>        intersectionSet.<span class="hljs-title function_">add</span>(valuesA[i])<br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> intersectionSet<br>  &#125;<br>  <span class="hljs-comment">// 差集操作</span><br>  <span class="hljs-title class_">Set</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">difference</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">otherSet</span>) &#123;<br>    <span class="hljs-comment">// 创建差集集合</span><br>    <span class="hljs-keyword">const</span> differenceSet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()<br>    <span class="hljs-comment">// 将集合A（this)取出</span><br>    <span class="hljs-keyword">let</span> values = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">values</span>()<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i= <span class="hljs-number">0</span>; i&lt;values.<span class="hljs-property">length</span>;i++) &#123;<br>      <span class="hljs-keyword">if</span>(!otherSet.<span class="hljs-title function_">has</span>(values[i]))&#123;<br>        differenceSet.<span class="hljs-title function_">add</span>(values[i])<br>      &#125;<br>    &#125;<br>    <span class="hljs-comment">// 将集合B数据取出</span><br>    values = otherSet.<span class="hljs-title function_">values</span>() <br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i= <span class="hljs-number">0</span>; i&lt;values.<span class="hljs-property">length</span>;i++) &#123;<br>      <span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">has</span>(values[i]))&#123;<br>        differenceSet.<span class="hljs-title function_">add</span>(values[i])<br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> differenceSet<br>  &#125;<br>  <span class="hljs-comment">// 判断一个集合是否属于另外一个集合</span><br>  <span class="hljs-title class_">Set</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sub</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">otherSet</span>) &#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">size</span>() &lt; otherSet.<span class="hljs-title function_">size</span>())&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>    &#125;<br>    <span class="hljs-keyword">let</span> valuesB = otherSet.<span class="hljs-title function_">values</span>()<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i =<span class="hljs-number">0</span>;i&lt;valuesB.<span class="hljs-property">length</span> ;i++) &#123;<br>      <span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">has</span>(valuesB[i]))&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><h3 id="测试Set集合"><a href="#测试Set集合" class="headerlink" title="测试Set集合"></a>测试Set集合</h3><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">/* 测试Set集合类 */</span><br><span class="hljs-comment">// const set = new Set() //集合A</span><br><span class="hljs-comment">// const set1 = new Set() //集合B</span><br><br><span class="hljs-comment">// set1.add(4)</span><br><span class="hljs-comment">// set.add(1)</span><br><span class="hljs-comment">// set.add(2)</span><br><span class="hljs-comment">// // set.add(&quot;2&quot;)</span><br><span class="hljs-comment">// set.add(3)</span><br><span class="hljs-comment">// set.remove(3)</span><br><span class="hljs-comment">// // set.clear()</span><br><span class="hljs-comment">// console.log(set.union(set1).values()) //求并集</span><br><span class="hljs-comment">// console.log(set.values())</span><br><span class="hljs-comment">// console.log(set.size())</span><br><br><span class="hljs-comment">/* 测试交集 */</span><br><span class="hljs-comment">// const setA = new Set()</span><br><span class="hljs-comment">// const setB = new Set()</span><br><br><span class="hljs-comment">// setA.add(&#x27;nba&#x27;)</span><br><span class="hljs-comment">// setA.add(&#x27;nbl&#x27;)</span><br><span class="hljs-comment">// setA.add(&#x27;cba&#x27;)</span><br><br><span class="hljs-comment">// setB.add(&#x27;nba&#x27;)</span><br><span class="hljs-comment">// setB.add(&#x27;cba&#x27;)</span><br><span class="hljs-comment">// setB.add(&#x27;dbba&#x27;)</span><br><span class="hljs-comment">// setB.add(&#x27;cuba&#x27;)</span><br><br><span class="hljs-comment">// console.log(setA.values())</span><br><span class="hljs-comment">// console.log(setB.values())</span><br><span class="hljs-comment">// console.log(setA.intersection(setB))</span><br><span class="hljs-comment">/* 测试差集 */</span><br><span class="hljs-comment">// const setA = new Set()</span><br><span class="hljs-comment">// const setB = new Set()</span><br><br><span class="hljs-comment">// setA.add(&#x27;nba&#x27;)</span><br><span class="hljs-comment">// setA.add(&#x27;nbl&#x27;)</span><br><span class="hljs-comment">// setA.add(&#x27;cba&#x27;)</span><br><br><span class="hljs-comment">// setB.add(&#x27;nba&#x27;)</span><br><span class="hljs-comment">// setB.add(&#x27;cba&#x27;)</span><br><span class="hljs-comment">// setB.add(&#x27;dbba&#x27;)</span><br><span class="hljs-comment">// setB.add(&#x27;cuba&#x27;)</span><br><br><span class="hljs-comment">// console.log(setA.values())</span><br><span class="hljs-comment">// console.log(setB.values())</span><br><span class="hljs-comment">// console.log(setA.difference(setB))</span><br><span class="hljs-comment">/* 测试是否属于子集 */</span><br><span class="hljs-keyword">const</span> setA = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()<br><span class="hljs-keyword">const</span> setB = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()<br><br>setA.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;nba&#x27;</span>)<br>setA.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;nbl&#x27;</span>)<br>setA.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;cba&#x27;</span>)<br><br>setB.<span class="hljs-title function_">add</span>(<span class="hljs-string">&#x27;nba&#x27;</span>)<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(setA.<span class="hljs-title function_">values</span>())<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(setB.<span class="hljs-title function_">values</span>())<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(setA.<span class="hljs-title function_">sub</span>(setB))<br></code></pre></div></td></tr></table></figure><h2 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h2><h3 id="字典特点"><a href="#字典特点" class="headerlink" title="字典特点"></a>字典特点</h3><ul><li>字典存储的是<strong>键值对</strong>，主要特点是<strong>一一对应</strong>。</li><li>比如保存一个人的信息<ul><li>数组形式：<code>[19，&quot;Tom&quot;, 1.65]</code>，可通过下标值取出信息。</li><li>字典形式：<code>&#123;&quot;age&quot;: 19, &quot;name&quot;: &quot;Tom&quot;, &quot;height&quot;: 165&#125;</code>，可以通过 <code>key</code> 取出 <code>value</code>。</li></ul></li><li>此外，在字典中 key 是不能重复且无序的，而 Value 可以重复。</li></ul><h3 id="字典和映射的关系"><a href="#字典和映射的关系" class="headerlink" title="字典和映射的关系"></a>字典和映射的关系</h3><ul><li>有些编程语言中称这种映射关系为<strong>字典</strong>，如 Swift 中的 <code>Dictonary</code>，Python 中的 <code>dict</code>。</li><li>有些编程语言中称这种映射关系为 <strong>Map</strong>，比如 Java 中的 <code>HashMap</code> 和 <code>TreeMap</code> 等。</li></ul><h3 id="在ES6中Map就是一个字典，可以尝试封装"><a href="#在ES6中Map就是一个字典，可以尝试封装" class="headerlink" title="在ES6中Map就是一个字典，可以尝试封装"></a>在ES6中Map就是一个字典，可以尝试封装</h3>]]></content>
    
    
    <categories>
      
      <category>数据结构</category>
      
    </categories>
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>数据结构</tag>
      
      <tag>字典</tag>
      
      <tag>集合</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>javascript数据结构-链表</title>
    <link href="/2022/05/18/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%93%BE%E8%A1%A8%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
    <url>/2022/05/18/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%93%BE%E8%A1%A8%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<p class="note note-warning">本博客参考于洛伊安妮·格罗纳编著的javascript数据结构与算法第三版及codeWay老师视频或其他博客资料，在此对此表示感谢!<br>github仓库：<a href="https://github.com/hzx17/DataStructures" style="color:#428bca;">https://github.com/hzx17/</a><p><h1 id="认识链表"><a href="#认识链表" class="headerlink" title="认识链表"></a>认识链表</h1><h3 id="链表和数组"><a href="#链表和数组" class="headerlink" title="链表和数组"></a>链表和数组</h3><p>链表和数组一样，可以用于存储一系列的元素，但是链表和数组的实现机制完全不同。</p><h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><ul><li><p>存储多个元素，数组（或列表）可能是最常用的数据结构。</p></li><li><p>几乎每一种编程语言都有默认实现数组结构，提供了一个便利的 <code>[]</code> 语法来访问数组元素。</p></li><li><p>数组缺点：</p><p>数组的创建需要申请一段连续的内存空间(一整块内存)，并且大小是固定的，当前数组不能满足容量需求时，需要扩容。 (一般情况下是申请一个更大的数组，比如 2 倍，然后将原数组中的元素复制过去)</p><p>在数组开头或中间位置插入数据的成本很高，需要进行大量元素的位移。</p></li></ul><h4 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h4><ul><li><p>存储多个元素，另外一个选择就是使用链表。</p></li><li><p>不同于数组，链表中的元素在内存中不必是连续的空间。</p></li><li><p>链表的每个元素由一个存储元素本身的节点和一个指向下一个元素的引用(有些语言称为指针)组成。</p></li><li><p>链表优点：</p><p>内存空间不必是连续的，可以充分利用计算机的内存，实现灵活的内存动态管理。</p><p>链表不必在创建时就确定大小，并且大小可以无限延伸下去。</p><p>链表在插入和删除数据时，时间复杂度可以达到 O(1)，相对数组效率高很多。</p></li><li><p>链表缺点：</p><p>访问任何一个位置的元素时，需要从头开始访问。(无法跳过第一个元素访问任何一个元素)</p><p>无法通过下标值直接访问元素，需要从头开始一个个访问，直到找到对应的元素。</p><p>虽然可以轻松地到达下一个节点，但是回到前一个节点是很难的。</p></li></ul><h1 id="单向链表"><a href="#单向链表" class="headerlink" title="单向链表"></a>单向链表</h1><h3 id="单向链表的概念"><a href="#单向链表的概念" class="headerlink" title="单向链表的概念"></a>单向链表的概念</h3><p>单向链表类似于火车，有一个火车头，火车头会连接一个节点，节点上有乘客，并且这个节点会连接下一个节点，以此类推。</p><ul><li><p>链表的火车结构</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%93%BE%E8%A1%A8%E7%81%AB%E8%BD%A6%E5%A4%B4%E7%BB%93%E6%9E%84.png" alt="链表的火车结构"></p></li><li><p>链表的数据结构</p><p>head 属性指向链表的第一个节点。<br>链表中的最后一个节点指向 <code>null</code>。<br>当链表中一个节点也没有的时候，head 直接指向 <code>null</code>。</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%93%BE%E8%A1%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.png" alt="链表的数据结构"></p></li><li><p>给火车加上数据后的结构</p><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%8A%A0%E4%B8%8A%E6%95%B0%E6%8D%AE%E7%9A%84%E7%81%AB%E8%BD%A6.png" alt="给火车加上数据后的结构"></p></li></ul><h3 id="链表中的常见操作"><a href="#链表中的常见操作" class="headerlink" title="链表中的常见操作"></a>链表中的常见操作</h3><ul><li><code>append(element)</code> 向链表尾部添加一个新的项。</li><li><code>insert(position, element)</code> 向链表的特定位置插入一个新的项。</li><li><code>get(position)</code> 获取对应位置的元素。</li><li><code>indexOf(element)</code> 返回元素在链表中的索引。如果链表中没有该元素就返回-1。</li><li><code>update(position, element)</code> 修改某个位置的元素。</li><li><code>removeAt(position)</code> 从链表的特定位置移除一项。</li><li><code>remove(element)</code> 从链表中移除一项。</li><li><code>isEmpty()</code> 如果链表中不包含任何元素，返回 trun，如果链表长度大于 0 则返回 false。</li><li><code>size()</code> 返回链表包含的元素个数，与数组的 length 属性类似。</li><li><code>toString()</code> 由于链表项使用了 Node 类，就需要重写继承自 JavaScript 对象默认的 toString 方法，让其只输出元素的值。</li></ul><h3 id="单向链表的封装"><a href="#单向链表的封装" class="headerlink" title="单向链表的封装"></a>单向链表的封装</h3><ul><li>先创建单向链表类 LinkedList，添加基本属性，再逐步实现单向链表的常用方法。</li></ul><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">LinkedList</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-comment">//内部类：节点类</span><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">Node</span>(<span class="hljs-params">data</span>)&#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>=data;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">next</span>=<span class="hljs-literal">null</span>;<br>    &#125;<br>    <span class="hljs-comment">//属性</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>=<span class="hljs-literal">null</span>;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>=<span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">//追加方法</span><br>    <span class="hljs-title class_">LinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">append</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)&#123;<br>        <span class="hljs-comment">//创建一个新的节点</span><br>        <span class="hljs-keyword">let</span> newNode=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(data);<br>       <span class="hljs-comment">//判断 是否为第一个节点</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>==<span class="hljs-number">0</span>)&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>=newNode;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-comment">//创建一个临时变量，使头部节点指向一个新的临时节点</span><br>            <span class="hljs-keyword">let</span> current=<span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span><br>            <span class="hljs-comment">//判断current的next是否为空，如果不为空，将current的next指向current</span><br>            <span class="hljs-keyword">while</span>(current.<span class="hljs-property">next</span>)&#123;<br>                current=current.<span class="hljs-property">next</span>;<br>            &#125;<br>            current.<span class="hljs-property">next</span>=newNode;<br>        &#125;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>+=<span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-comment">//tostring方法</span><br>    <span class="hljs-title class_">LinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-comment">//定义一个临时变量</span><br>        <span class="hljs-keyword">let</span> current=<span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>;<br>        <span class="hljs-keyword">let</span> result=<span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">while</span>(current)&#123;<br>           result+=current.<span class="hljs-property">data</span>+<span class="hljs-string">&quot;&quot;</span>;<br>           current=current.<span class="hljs-property">next</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <span class="hljs-comment">//指定位置插入节点</span><br>    <span class="hljs-title class_">LinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">insert</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">data,position</span>)&#123;<br>        <span class="hljs-comment">//节点数判断是否小于index</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> &lt; position || position &lt; <span class="hljs-number">0</span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;你插入的位置大于链表的长度&#x27;</span>)<br>        &#125;<br>        <span class="hljs-comment">//创建NOde实例</span><br>        <span class="hljs-keyword">const</span> newNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(data)<br>        <span class="hljs-keyword">if</span>(position === <span class="hljs-number">0</span>) &#123;<br>          <span class="hljs-comment">// 使原来的头部指向新节点的next，然后再将data指向this.head</span><br>          newNode.<span class="hljs-property">next</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span><br>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = newNode<br>        &#125;<span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// 插入位置大于0，即不是头节点</span><br>          <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>  <span class="hljs-comment">// 定义一个初始变量</span><br>          <span class="hljs-keyword">var</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span><br>          <span class="hljs-keyword">var</span> previous = <span class="hljs-literal">null</span> <span class="hljs-comment">// 当前节点的前一个</span><br>          <span class="hljs-keyword">while</span> (index++ &lt; position) &#123;<br>            previous = current<br>            current = current.<span class="hljs-property">next</span><br>          &#125;    <br>          newNode.<span class="hljs-property">next</span> = current<br>          previous.<span class="hljs-property">next</span> = newNode<br>        &#125;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> +=<span class="hljs-number">1</span><br>    &#125;<br>    <span class="hljs-comment">// get方法</span><br>    <span class="hljs-title class_">LinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">get</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">position</span>)&#123;<br>      <span class="hljs-keyword">if</span>( position &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> || position &lt; <span class="hljs-number">0</span>)&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span><br>      &#125;<br>      <span class="hljs-comment">// 获取相应的data</span><br>      <span class="hljs-keyword">let</span> current =<span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span><br>      <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span><br>      <span class="hljs-keyword">while</span>(index++ &lt; position)&#123;<br>        current = current.<span class="hljs-property">next</span><br>      &#125;<br>      <span class="hljs-keyword">return</span> current.<span class="hljs-property">data</span><br>    &#125;<br>    <span class="hljs-comment">// 返回元素所在索引，如果不存在则返回-1</span><br>    <span class="hljs-title class_">LinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">indexOf</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)&#123;<br>      <span class="hljs-keyword">let</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span><br>      <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span><br>      <span class="hljs-keyword">while</span>(current)&#123;<br>        <span class="hljs-keyword">if</span>(current.<span class="hljs-property">data</span> === data)&#123;<br>          <span class="hljs-keyword">return</span> index<br>        &#125;<br>        current = current.<span class="hljs-property">next</span><br>        index +=<span class="hljs-number">1</span><br>      &#125;<br>      <span class="hljs-comment">// 没有找到，返回-1</span><br>      <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>    &#125;<br>    <span class="hljs-comment">// 更改元素</span><br>    <span class="hljs-title class_">LinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">update</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">newData,position</span>) &#123;<br>      <span class="hljs-comment">// 越界判断</span><br>      <span class="hljs-keyword">if</span>( position &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> || position &lt; <span class="hljs-number">0</span>)&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;更改位置不正确&#x27;</span>)<br>      &#125;<br>      <span class="hljs-keyword">let</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> <br>      <span class="hljs-keyword">let</span> index =<span class="hljs-number">0</span><br>      <span class="hljs-keyword">while</span>(index++ &lt; position) &#123;<br>        current = current.<span class="hljs-property">next</span><br>      &#125;<br>      <span class="hljs-comment">// 将获取到的节点，更新</span><br>      current.<span class="hljs-property">data</span> = newData<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>    &#125;<br>    <span class="hljs-comment">// 移出列表中特定位置一项，传入位置索引即可</span><br>    <span class="hljs-title class_">LinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">removeAt</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">position</span>) &#123;<br>      <span class="hljs-comment">// 越界判断</span><br>      <span class="hljs-keyword">if</span>( position &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> || position &lt; <span class="hljs-number">0</span>)&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;移出位置不正确&#x27;</span>)<br>      &#125;<br>      <span class="hljs-keyword">let</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span><br>      <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span><br>      <span class="hljs-keyword">let</span> previous = <span class="hljs-literal">null</span><br>      <span class="hljs-keyword">if</span>(position === <span class="hljs-number">0</span>) &#123;<br>        current =current.<span class="hljs-property">next</span><br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> =current<br>      &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-keyword">while</span>(index++ <span class="language-xml">&lt;position) &#123;</span><br><span class="language-xml">          previous = current</span><br><span class="language-xml">          current = current.next</span><br><span class="language-xml">        &#125;</span><br><span class="language-xml">        previous.next = current.next</span><br><span class="language-xml">      &#125;</span><br><span class="language-xml">      this.length -=1</span><br><span class="language-xml">    &#125;</span><br><span class="language-xml">    // 移出指定元素的一项，传入元素</span><br><span class="language-xml">    LinkedList.prototype.remove = function (element) &#123;</span><br><span class="language-xml">      let current = this.head</span><br><span class="language-xml">      let previous = null</span><br><span class="language-xml">      while(current) &#123;</span><br><span class="language-xml">        if(current===this.head &amp;&amp; current.data === element) &#123;</span><br><span class="language-xml">          this.head = current.next</span><br><span class="language-xml">          this.length -=1</span><br><span class="language-xml">          return true</span><br><span class="language-xml">        &#125;</span><br><span class="language-xml">        else if(current.data === element) &#123;</span><br><span class="language-xml">          previous.next = current.next</span><br><span class="language-xml">          this.length -=1</span><br><span class="language-xml">          return true</span><br><span class="language-xml">        &#125;</span><br><span class="language-xml">        previous = current</span><br><span class="language-xml">        current = current.next</span><br><span class="language-xml">      &#125;</span><br><span class="language-xml">      return console.log(&#x27;未找到要删除的元素&#x27;)</span><br><span class="language-xml">    &#125;</span><br><span class="language-xml">    // 是否为空,为空返回true，有其他元素返回false</span><br><span class="language-xml">    LinkedList.prototype.isEmpty = function () &#123;</span><br><span class="language-xml">      return (this.length ==0)</span><br><span class="language-xml">    &#125;</span><br><span class="language-xml">    // 判断链表的个数，即返回链表的长度</span><br><span class="language-xml">    LinkedList.prototype.size = function () &#123;</span><br><span class="language-xml">      return this.length</span><br><span class="language-xml">    &#125;</span><br><span class="language-xml">&#125;</span><br></code></pre></div></td></tr></table></figure><h3 id="代码测试"><a href="#代码测试" class="headerlink" title="代码测试"></a>代码测试</h3><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">/* 链表测试 */</span><br><span class="hljs-keyword">let</span> linklist=<span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>();<br>linklist.<span class="hljs-title function_">append</span>(<span class="hljs-number">12</span>);<br>linklist.<span class="hljs-title function_">append</span>(<span class="hljs-number">13</span>);<br>linklist.<span class="hljs-title function_">append</span>(<span class="hljs-number">14</span>);<br>linklist.<span class="hljs-title function_">append</span>(<span class="hljs-number">14</span>);<br><span class="hljs-comment">// linklist.insert(&quot;我是插入的&quot;,3)</span><br><span class="hljs-comment">// linklist.update(&quot;我修改了第一个&quot;,0)</span><br><span class="hljs-comment">// linklist.removeAt(0)</span><br>linklist.<span class="hljs-title function_">remove</span>(<span class="hljs-number">12</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(linklist)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>( linklist.<span class="hljs-title function_">indexOf</span>(<span class="hljs-number">15</span>))<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(linklist.<span class="hljs-title function_">get</span>(<span class="hljs-number">1</span>))<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(linklist.<span class="hljs-title function_">toString</span>())<br></code></pre></div></td></tr></table></figure><h1 id="双向链表"><a href="#双向链表" class="headerlink" title="双向链表"></a>双向链表</h1><h2 id="单向链表和双向链表区别"><a href="#单向链表和双向链表区别" class="headerlink" title="单向链表和双向链表区别"></a>单向链表和双向链表区别</h2><h3 id="单向链表-1"><a href="#单向链表-1" class="headerlink" title="单向链表"></a>单向链表</h3><ul><li>只能从头遍历到尾或者从尾遍历到头（一般从头到尾）。</li><li>链表相连的过程是单向的，实现原理是上一个节点中有指向下一个节点的引用。</li><li>单向链表有一个比较明显的缺点：可以轻松到达下一个节点，但回到前一个节点很难，在实际开发中, 经常会遇到需要回到上一个节点的情况。</li></ul><h3 id="双向链表-1"><a href="#双向链表-1" class="headerlink" title="双向链表"></a>双向链表</h3><ul><li>既可以从头遍历到尾，也可以从尾遍历到头。</li><li>链表相连的过程是双向的。实现原理是一个节点既有向前连接的引用，也有一个向后连接的引用。</li><li>双向链表可以有效的解决单向链表存在的问题。</li><li>双向链表缺点：<ul><li>每次在插入或删除某个节点时，都需要处理四个引用，而不是两个，实现起来会困难些。</li><li>相对于单向链表，所占内存空间更大一些。</li><li>但是，相对于双向链表的便利性而言，这些缺点微不足道。</li></ul></li></ul><h2 id="双向链表结构"><a href="#双向链表结构" class="headerlink" title="双向链表结构"></a>双向链表结构</h2><p><img src="http://imghe.xyz/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8%E7%BB%93%E6%9E%84.png" alt="双向链表"></p><ul><li>双向链表不仅有 head 指针指向第一个节点，而且有 tail 指针指向最后一个节点。</li><li>每一个节点由三部分组成：item 储存数据、prev 指向前一个节点、next 指向后一个节点。</li><li>双向链表的第一个节点的 prev 指向 null。</li><li>双向链表的最后一个节点的 next 指向 null。</li></ul><h2 id="双向链表常见的操作"><a href="#双向链表常见的操作" class="headerlink" title="双向链表常见的操作"></a>双向链表常见的操作</h2><ul><li><code>append(element)</code> 向链表尾部追加一个新元素。</li><li><code>insert(position, element)</code> 向链表的指定位置插入一个新元素。</li><li><code>getElement(position)</code> 获取指定位置的元素。</li><li><code>indexOf(element)</code> 返回元素在链表中的索引。如果链表中没有该元素就返回 -1。</li><li><code>update(position, element)</code> 修改指定位置上的元素。</li><li><code>removeAt(position)</code> 从链表中的删除指定位置的元素。</li><li><code>remove(element)</code> 从链表删除指定的元素。</li><li><code>isEmpty()</code> 如果链表中不包含任何元素，返回 <code>trun</code>，如果链表长度大于 0 则返回 <code>false</code>。</li><li><code>size()</code> 返回链表包含的元素个数，与数组的 <code>length</code> 属性类似。</li><li><code>toString()</code> 由于链表项使用了 Node 类，就需要重写继承自 JavaScript 对象默认的 <code>toString</code> 方法，让其只输出元素的值。</li><li><code>forwardString()</code> 返回正向遍历节点字符串形式。</li><li><code>backwordString()</code> 返回反向遍历的节点的字符串形式。</li></ul><h2 id="双向链表的封装"><a href="#双向链表的封装" class="headerlink" title="双向链表的封装"></a>双向链表的封装</h2><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">DoublyLinkedList</span> () &#123;<br>  <span class="hljs-comment">/* 内部类 */</span> <br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">Node</span>(<span class="hljs-params">data</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">prev</span> = <span class="hljs-literal">null</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">next</span> = <span class="hljs-literal">null</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = data<br>  &#125;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = <span class="hljs-literal">null</span><br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = <span class="hljs-literal">null</span><br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> = <span class="hljs-number">0</span><br>  <span class="hljs-comment">//追加方法</span><br>  <span class="hljs-title class_">DoublyLinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">append</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) &#123;<br>    <span class="hljs-comment">// 1、创建双向链表节点</span><br>    <span class="hljs-keyword">const</span> newNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(element);<br>    <span class="hljs-comment">// 2、追加元素</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> === <span class="hljs-literal">null</span>) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = newNode;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = newNode;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-comment">// ！！跟单向链表不同，不用通过循环找到最后一个节点</span><br>      <span class="hljs-comment">// 巧妙之处</span><br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>.<span class="hljs-property">next</span> = newNode;<br>      newNode.<span class="hljs-property">prev</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = newNode;<br>    &#125;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>++;<br>  &#125;<br>  <span class="hljs-comment">// 向指定位置插入一个新的一项</span><br>  <span class="hljs-title class_">DoublyLinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">insert</span> =<span class="hljs-keyword">function</span>(<span class="hljs-params">element,position</span>) &#123;<br>    <span class="hljs-comment">//越界判断</span><br>    <span class="hljs-keyword">if</span>(position&lt;<span class="hljs-number">0</span> || position&gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;插入位置不正确&#x27;</span>)<br>    &#125;<br>    <span class="hljs-comment">//创建新节点</span><br>    <span class="hljs-keyword">const</span> newNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(element)<br>    <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> =newNode<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = newNode<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>      <span class="hljs-keyword">if</span>(position === <span class="hljs-number">0</span>) &#123;     <span class="hljs-comment">//当position===0时</span><br>        newNode.<span class="hljs-property">next</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>  <span class="hljs-comment">//新节点的下一指针指向原来的头节点</span><br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>.<span class="hljs-property">prev</span> = newNode  <span class="hljs-comment">//原来头节点的上一指针指向新节点，这样才形成双向链表</span><br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = newNode<br>      &#125;<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (position === <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>.<span class="hljs-property">next</span> = newNode<br>        newNode.<span class="hljs-property">prev</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span><br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = newNode<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">let</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span><br>        <span class="hljs-keyword">let</span> index =<span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span>(index++ &lt; position) &#123;<br>          current = current.<span class="hljs-property">next</span><br>        &#125;<br>        current.<span class="hljs-property">prev</span>.<span class="hljs-property">next</span> = newNode<br>        newNode.<span class="hljs-property">prev</span> = current.<span class="hljs-property">prev</span><br>        current.<span class="hljs-property">prev</span> = newNode<br>        newNode.<span class="hljs-property">next</span> = current<br>      &#125;<br>    &#125;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> +=<span class="hljs-number">1</span><br>  &#125;<br>  <span class="hljs-comment">// get方法，获取某个位置的数据</span><br>  <span class="hljs-title class_">DoublyLinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">get</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">position</span>) &#123;<br>    <span class="hljs-comment">// 越界判断</span><br>    <span class="hljs-keyword">if</span>(position&gt;=<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> || position &lt;<span class="hljs-number">0</span>)&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;获取位置有误&#x27;</span>)<br>    &#125;<br> <br>    <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> / <span class="hljs-number">2</span> &lt; position) &#123;<br>      <span class="hljs-keyword">let</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span><br>      <span class="hljs-keyword">let</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> -<span class="hljs-number">1</span><br>      <span class="hljs-keyword">while</span>(index-- &gt; position) &#123;<br>        current = current.<span class="hljs-property">prev</span><br>      &#125;<br>      <span class="hljs-keyword">return</span> current.<span class="hljs-property">data</span><br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>      <span class="hljs-keyword">let</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span><br>      <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span><br>      <span class="hljs-keyword">while</span>(index++ &lt; position) &#123;<br>        current = current.<span class="hljs-property">next</span><br>      &#125;<br>      <span class="hljs-keyword">return</span> current.<span class="hljs-property">data</span><br>    &#125;<br>  &#125;<br>  <span class="hljs-comment">// indexOf,参数为元素，如果存在返回元素所在位置，不存在返回-1</span><br>  <span class="hljs-title class_">DoublyLinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">indexOf</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) &#123;<br>    <span class="hljs-keyword">let</span> current =<span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span><br>    <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span>(current) &#123;<br>      <span class="hljs-keyword">if</span>(current.<span class="hljs-property">data</span> === element ) &#123;<br>        <span class="hljs-keyword">return</span> index<br>      &#125;<br>      current = current.<span class="hljs-property">next</span><br>      index +=<span class="hljs-number">1</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>  &#125;<br>  <span class="hljs-comment">// 双向链表更新方法的实现,传入两个参数，元素与位置</span><br>  <span class="hljs-title class_">DoublyLinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">update</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">element,positon</span>) &#123;<br>    <span class="hljs-comment">//越界判断</span><br>    <span class="hljs-keyword">if</span>(positon &gt;=<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> || positon &lt; <span class="hljs-number">0</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;你更改的位置有误&#x27;</span>)<br>    &#125;<br>    <span class="hljs-keyword">let</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span><br>    <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span>(index++ &lt; positon) &#123;<br>      current = current.<span class="hljs-property">next</span><br>    &#125;<br>    current.<span class="hljs-property">data</span> = element<br>  &#125;<br>  <span class="hljs-comment">// 根据传入的位置信息，删除指定元素</span><br>  <span class="hljs-title class_">DoublyLinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">removeAt</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">position</span>) &#123;<br>    <span class="hljs-comment">// 越界判断 </span><br>    <span class="hljs-keyword">if</span>(position &gt;=<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> || position &lt; <span class="hljs-number">0</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;你更改的位置有误&#x27;</span>)<br>    &#125;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> === <span class="hljs-number">1</span>)&#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = <span class="hljs-literal">null</span><br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(position === <span class="hljs-number">0</span>) &#123;<br>       <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>.<span class="hljs-property">next</span>.<span class="hljs-property">prev</span> = <span class="hljs-literal">null</span><br>       <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span>.<span class="hljs-property">next</span><br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (position == <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>.<span class="hljs-property">prev</span>.<span class="hljs-property">next</span> = <span class="hljs-literal">null</span><br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span>.<span class="hljs-property">prev</span><br>    &#125;<span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">let</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span><br>      <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span> <br>      <span class="hljs-keyword">while</span> (index++ &lt; position) &#123;<br>        current = current.<span class="hljs-property">next</span><br>      &#125;<br>       current.<span class="hljs-property">prev</span>.<span class="hljs-property">next</span> = current.<span class="hljs-property">next</span><br>       current.<span class="hljs-property">next</span>.<span class="hljs-property">prev</span> = current.<span class="hljs-property">prev</span><br>    &#125;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> -=<span class="hljs-number">1</span><br>  &#125;<br>  <span class="hljs-comment">// 根据传入的元素，删除指定元素</span><br>  <span class="hljs-title class_">DoublyLinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">remove</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) &#123;<br>    <span class="hljs-comment">// let current = this.head </span><br>    <span class="hljs-comment">// while(current) &#123;</span><br>    <span class="hljs-comment">//  if(current ==this.head &amp;&amp;current.data === element)&#123;</span><br>    <span class="hljs-comment">//     this.head.next.prev = null</span><br>    <span class="hljs-comment">//     this.head = this.head.next</span><br>    <span class="hljs-comment">//     this.length -=1</span><br>    <span class="hljs-comment">//     return true</span><br>    <span class="hljs-comment">//   &#125;else if(current == this.tail &amp;&amp; current.data === element)&#123;</span><br>    <span class="hljs-comment">//     this.tail.prev.next = null</span><br>    <span class="hljs-comment">//     this.tail = this.tail.prev</span><br>    <span class="hljs-comment">//     this.length -=1</span><br>    <span class="hljs-comment">//     return true</span><br>    <span class="hljs-comment">//   &#125;else if(current.data === element)&#123;</span><br>    <span class="hljs-comment">//     current.next.prev = current.prev</span><br>    <span class="hljs-comment">//     current.prev.next = current.next</span><br>    <span class="hljs-comment">//     this.length -=1</span><br>    <span class="hljs-comment">//     return true</span><br>    <span class="hljs-comment">//    &#125;</span><br>    <span class="hljs-comment">//   current = current.next</span><br>    <span class="hljs-comment">// &#125;</span><br>    <span class="hljs-comment">// return console.log(&#x27;未找到元素&#x27;)</span><br>    <span class="hljs-keyword">let</span> index =<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">indexOf</span>(element)<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeAt</span>(index)<br>  &#125;<br>  <span class="hljs-comment">//转换成字符串形式</span><br>  <span class="hljs-title class_">DoublyLinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">backwardString</span>()<br>  &#125;<br>  <span class="hljs-comment">// 向前遍历</span><br>  <span class="hljs-title class_">DoublyLinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">forwardString</span> =<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">let</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tail</span><br>    <span class="hljs-keyword">let</span> resultString = <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-comment">// 依次向前遍历</span><br>    <span class="hljs-keyword">while</span>(current) &#123;<br>      resultString += current.<span class="hljs-property">data</span> + <span class="hljs-string">&quot; &quot;</span><br>      current = current.<span class="hljs-property">prev</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> resultString<br>  &#125;<br>  <span class="hljs-comment">// 向后遍历backwardString</span><br>  <span class="hljs-title class_">DoublyLinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">backwardString</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">let</span> current = <span class="hljs-variable language_">this</span>.<span class="hljs-property">head</span><br>    <span class="hljs-keyword">let</span> resultString = <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-comment">// 依次向后遍历</span><br>    <span class="hljs-keyword">while</span>(current) &#123;<br>      resultString += current.<span class="hljs-property">data</span> + <span class="hljs-string">&#x27; &#x27;</span><br>      current = current.<span class="hljs-property">next</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> resultString<br>  &#125;<br>  <span class="hljs-comment">// size方法，获取链表长度</span><br>  <span class="hljs-title class_">DoublyLinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">size</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span><br>  &#125;<br>  <span class="hljs-comment">//是否为空</span><br>  <span class="hljs-title class_">DoublyLinkedList</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">isEmpty</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>===<span class="hljs-number">0</span>)<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><h3 id="测试双向链表"><a href="#测试双向链表" class="headerlink" title="测试双向链表"></a>测试双向链表</h3><figure class="highlight js"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">/* 测试双向链表 */</span><br><span class="hljs-keyword">const</span> list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DoublyLinkedList</span>()<br>list.<span class="hljs-title function_">append</span>(<span class="hljs-number">1</span>)<br>list.<span class="hljs-title function_">append</span>(<span class="hljs-number">2</span>)<br>list.<span class="hljs-title function_">append</span>(<span class="hljs-number">3</span>)<br>list.<span class="hljs-title function_">insert</span>(<span class="hljs-number">4</span>,<span class="hljs-number">0</span>)<br>list.<span class="hljs-title function_">update</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)<br>list.<span class="hljs-title function_">remove</span>(<span class="hljs-number">3</span>)<br><span class="hljs-comment">// list.removeAt(0)</span><br><span class="hljs-comment">// console.log(list.indexOf(0))</span><br><span class="hljs-comment">// console.log(list.get(0))</span><br><span class="hljs-comment">// console.log(list.isEmpty())</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(list.<span class="hljs-title function_">backwardString</span>())<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(list.<span class="hljs-title function_">forwardString</span>())<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(list)<br></code></pre></div></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>数据结构</category>
      
    </categories>
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>数据结构</tag>
      
      <tag>链表</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>javascript数据结构-栈</title>
    <link href="/2022/05/15/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%88%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
    <url>/2022/05/15/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%88%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<p class="note note-warning">本博客参考于洛伊安妮·格罗纳编著的javascript数据结构与算法第三版及codeWay老师视频或其他博客资料，在此对此表示感谢!<p><h1 id="栈的概述"><a href="#栈的概述" class="headerlink" title="栈的概述"></a>栈的概述</h1><p>栈是一种遵循后进先出(LIFO)原则的有序集合。新添加或待删除的元素都保留在栈的一端，称作栈顶，另一端就叫栈底。<br>在栈里，新元素都靠近栈顶，旧元素都靠近栈底。在现实生活中有很多栈的例子。例如，在图书馆中有一摞书。你想要拿到下面的就只能先拿走上面的书。栈在编程中用作内存中保存变量、方法调用等等，也被用于浏览器历史记录（浏览器返回按钮）<br><img src="http://imghe.xyz/img/%E6%A0%881.jpg" alt="图书馆的书"></p><h1 id="如何创建一个栈"><a href="#如何创建一个栈" class="headerlink" title="如何创建一个栈"></a>如何创建一个栈</h1><p>栈的创建是有两种方式，一种是基于数组，一种是基于链表，这里我们讲基于数组的栈，在链表会在数据结构链表那章博客讲到</p><ul><li>首先我们需要创建一个stack.js文件，在其中声明Stack类或者stack构造函数<figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">stack</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-comment">//定义一个数组</span><br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>=[];<br>&#125;<br></code></pre></div></td></tr></table></figure>这样我们的一个栈就构造好了，之后我们需要添加一些方法，来保存数据或删除，这里的方法有部分本质上就是数组的方法<h1 id="栈顶构造函数的一些方法"><a href="#栈顶构造函数的一些方法" class="headerlink" title="栈顶构造函数的一些方法"></a>栈顶构造函数的一些方法</h1></li></ul><ol><li>添加一个或多个元素到栈顶—push(element(s))<figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//将元素压入栈</span><br><span class="hljs-title function_">push</span>(<span class="hljs-params">element</span>)&#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(element);<br>&#125;<br></code></pre></div></td></tr></table></figure></li><li>移出栈底元素–pop()<figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//将元素从栈中取出</span><br><span class="hljs-title function_">pop</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">pop</span>();<br>&#125;<br></code></pre></div></td></tr></table></figure></li><li>返回（查看）栈顶元素，不对栈顶元素做修改–peek()<figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"> <span class="hljs-comment">//查看栈顶元素</span><br><span class="hljs-title function_">peek</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>];<br>&#125;<br></code></pre></div></td></tr></table></figure></li><li>判断栈中是否具有元素(是否为空)–isEmpty()<figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"> <span class="hljs-comment">//判断栈是否为空</span><br><span class="hljs-title function_">isEmpty</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>==<span class="hljs-number">0</span>);<br>&#125;<br></code></pre></div></td></tr></table></figure></li><li>移出栈里所有元素<figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"> <span class="hljs-comment">//判断栈是否为空</span><br><span class="hljs-title function_">clear</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>=[];<br>&#125;<br></code></pre></div></td></tr></table></figure></li><li>查看栈中的元素个数–size()<figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"> <span class="hljs-comment">//判断栈元素个数</span><br><span class="hljs-title function_">size</span>(<span class="hljs-params"></span>)&#123;<br>   <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>;<br>&#125;<br></code></pre></div></td></tr></table></figure><h1 id="基于栈的方法定义了栈的构造函数"><a href="#基于栈的方法定义了栈的构造函数" class="headerlink" title="基于栈的方法定义了栈的构造函数"></a>基于栈的方法定义了栈的构造函数</h1>一般我们将构造函数的方法放到原型上<figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">/* 创建栈的构造函数 */</span><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">Stack</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-comment">//定义一个数组</span><br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>=[];<br>        <span class="hljs-comment">//将元素压入栈</span><br>        <span class="hljs-title class_">Stack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">push</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>)&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(element);<br>        &#125;<br>        <span class="hljs-comment">//将元素从栈中取出</span><br>        <span class="hljs-title class_">Stack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">pop</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">pop</span>();<br>        &#125;<br>        <span class="hljs-comment">//查看栈顶元素</span><br>        <span class="hljs-title class_">Stack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">peek</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>];<br>        &#125;<br>        <span class="hljs-comment">//判断栈是否为空</span><br>        <span class="hljs-title class_">Stack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">isEmpty</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>==<span class="hljs-number">0</span>);<br>        &#125;<br>         <span class="hljs-comment">//清空栈</span><br>        <span class="hljs-title class_">Stack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">clear</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>=[];<br>        &#125;<br>        <span class="hljs-title class_">Stack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">size</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>;<br>       &#125;<br>        <span class="hljs-comment">//toString方法</span><br>        <span class="hljs-title class_">Stack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">let</span> resultString=<span class="hljs-string">&quot;&quot;</span>;<br>            <span class="hljs-comment">//遍历栈</span><br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>;i++)&#123;<br>                resultString +=<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[i]+<span class="hljs-string">&quot;&quot;</span>;<br>            &#125;<br>            <span class="hljs-keyword">return</span> resultString;<br>        &#125;      <br>    &#125;<br></code></pre></div></td></tr></table></figure><h1 id="Stack构造函数的使用"><a href="#Stack构造函数的使用" class="headerlink" title="Stack构造函数的使用"></a>Stack构造函数的使用</h1><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> stack=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>()<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(stack.<span class="hljs-title function_">isEmpty</span>())  <span class="hljs-comment">//输出为true</span><br>stack.<span class="hljs-title function_">push</span>(<span class="hljs-number">5</span>);<br>stack.<span class="hljs-title function_">push</span>(<span class="hljs-number">8</span>);<br><br><span class="hljs-comment">//调用peek方法，将输出8，因为它是往栈里添加最后一个元素</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(stack.<span class="hljs-title function_">peek</span>()) <span class="hljs-comment">//输出8</span><br><span class="hljs-comment">//再添加一个元素</span><br>stack.<span class="hljs-title function_">push</span>(<span class="hljs-number">11</span>);<br><span class="hljs-comment">//输出元素个数</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(stack.<span class="hljs-title function_">size</span>())  <span class="hljs-comment">//输出3</span><br><span class="hljs-comment">//再添加一个元素</span><br>stack.<span class="hljs-title function_">push</span>(<span class="hljs-number">15</span>)<br></code></pre></div></td></tr></table></figure><img src="http://imghe.xyz/img/IMG_20220515_235954.jpg" alt="执行流程"><h1 id="用栈来解决问题"><a href="#用栈来解决问题" class="headerlink" title="用栈来解决问题"></a>用栈来解决问题</h1></li></ol><ul><li>十进制与转化为二进制用栈来实现<figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">/* 编写十进制转化为二进制的函数 */</span><br> <span class="hljs-keyword">function</span> <span class="hljs-title function_">dec2bin</span>(<span class="hljs-params">decNumber</span>)&#123;   <span class="hljs-comment">//decNumber为传入的十进制数</span><br>      <span class="hljs-comment">/* 创建栈的构造函数 */</span><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">Stack</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-comment">//定义一个数组</span><br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>=[];<br>        <span class="hljs-comment">//将元素压入栈</span><br>        stack.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">push</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>)&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(element);<br>        &#125;<br>        <span class="hljs-comment">//将元素从栈中取出</span><br>        stack.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">pop</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">pop</span>();<br>        &#125;<br>        <span class="hljs-comment">//查看栈顶元素</span><br>        stack.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">peek</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>];<br>        &#125;<br>        <span class="hljs-comment">//判断栈是否为空</span><br>        stack.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">isEmpty</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>==<span class="hljs-number">0</span>);<br>        &#125;<br>        <span class="hljs-comment">//toString方法</span><br>        stack.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-keyword">let</span> resultString=<span class="hljs-string">&quot;&quot;</span>;<br>            <span class="hljs-comment">//遍历栈</span><br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>;i++)&#123;<br>                resultString +=<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[i]+<span class="hljs-string">&quot;&quot;</span>;<br>            &#125;<br>            <span class="hljs-keyword">return</span> resultString;<br>        &#125;<br>        <br>    &#125;<br>      <span class="hljs-comment">//实例化stack类</span><br>      <span class="hljs-keyword">var</span> stack=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>();<br>      <span class="hljs-comment">//如果不为空，取余</span><br>      <span class="hljs-keyword">while</span>(decNumber&gt;<span class="hljs-number">0</span>)&#123;<br>          stack.<span class="hljs-title function_">push</span>(decNumber % <span class="hljs-number">2</span>);<br>          decNumber=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(decNumber/<span class="hljs-number">2</span>);   <br>      &#125;<br>      <span class="hljs-comment">//从栈中取出元素</span><br>      <span class="hljs-keyword">var</span> binaryString=<span class="hljs-string">&quot;&quot;</span>;<br>     <span class="hljs-comment">//循环遍历取出元素</span><br>     <span class="hljs-keyword">while</span>(!stack.<span class="hljs-title function_">isEmpty</span>())&#123; <br>         binaryString+=stack.<span class="hljs-title function_">pop</span>();<br>     &#125;<br>     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(binaryString)<br>     <span class="hljs-keyword">return</span> binaryString;  <br> &#125;<br> <span class="hljs-comment">//调用十进制转化为二进制方法</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">dec2bin</span>(<span class="hljs-number">100</span>))  <span class="hljs-comment">//1100100</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">dec2bin</span>(<span class="hljs-number">12</span>))   <span class="hljs-comment">//1100</span><br></code></pre></div></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>数据结构</category>
      
    </categories>
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>数据结构，栈</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>javascript数据结构-队列</title>
    <link href="/2022/05/15/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
    <url>/2022/05/15/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%98%9F%E5%88%97%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<p class="note note-warning">本博客参考于洛伊安妮·格罗纳编著的javascript数据结构与算法第三版及codeWay老师视频或其他博客资料，在此对此表示感谢!<br>github仓库：<a href="https://github.com/hzx17/DataStructures" style="color:#428bca;">https://github.com/hzx17/</a><p><h1 id="基本队列"><a href="#基本队列" class="headerlink" title="基本队列"></a>基本队列</h1><h2 id="认识队列"><a href="#认识队列" class="headerlink" title="认识队列"></a>认识队列</h2><p>队列（Queue）是一种运算受限的线性表，特点：先进先出。(FIFO：First In First Out)</p><p><strong>受限之处：</strong></p><ul><li>只允许在表的前端（front）进行删除操作。</li><li>只允许在表的后端（rear）进行插入操作。</li></ul><p>生活中类似队列结构的场景：</p><ul><li>排队，比如在电影院，商场，甚至是厕所排队。</li><li>优先排队的人，优先处理。 (买票、结账、WC)。</li></ul><h2 id="基本队列的封装"><a href="#基本队列的封装" class="headerlink" title="基本队列的封装"></a>基本队列的封装</h2><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Queue</span>(<span class="hljs-params"></span>)&#123;<br>      <span class="hljs-comment">//属性</span><br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>=[];<br>      <span class="hljs-comment">/* 方法 */</span><br>      <span class="hljs-comment">//将元素放入队列中</span><br>      <span class="hljs-title class_">Queue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">enqueue</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>)&#123;<br>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(element)<br>      &#125;<br>      <span class="hljs-comment">//从队列中删除前端元素</span><br>      <span class="hljs-title class_">Queue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">dequeue</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>       <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">shift</span>();<br>    &#125;<br>      <span class="hljs-comment">//从队列中查看前端元素</span><br>      <span class="hljs-title class_">Queue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">showqueue</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[<span class="hljs-number">0</span>]<br>    &#125;<br>     <span class="hljs-comment">//从队列中删除任何位置元素</span><br>     <span class="hljs-title class_">Queue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">spliceelement</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">index,count</span>)&#123;<br>       <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">splice</span>(index,count)<br>     &#125;<br>      <span class="hljs-comment">//查看队列中元素个数是否为空</span><br>      <span class="hljs-title class_">Queue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">isEmpty</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>==<span class="hljs-number">0</span><br>    &#125;<br>      <span class="hljs-comment">//查看队列中的元素个数</span><br>      <span class="hljs-title class_">Queue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">elementnum</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>;<br>      &#125;<br>      <span class="hljs-comment">//toString</span><br>      <span class="hljs-title class_">Queue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">let</span> resultString=<span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>;i++)&#123;<br>             resultString +=<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[i]+<span class="hljs-string">&quot;&quot;</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> resultString<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure><h1 id="优先级队列"><a href="#优先级队列" class="headerlink" title="优先级队列"></a>优先级队列</h1><h2 id="优先级队列使用场景"><a href="#优先级队列使用场景" class="headerlink" title="优先级队列使用场景"></a>优先级队列使用场景</h2><p>生活中类似<strong>优先队列</strong>的场景：</p><ul><li>优先排队的人，优先处理。 (买票、结账、WC)。</li><li>排队中，有紧急情况（特殊情况）的人可优先处理。</li></ul><h2 id="优先级队列主要考虑的问题："><a href="#优先级队列主要考虑的问题：" class="headerlink" title="优先级队列主要考虑的问题："></a>优先级队列主要考虑的问题：</h2><ul><li>每个元素不再只是一个数据，还包含优先级。</li><li>在添加元素过程中，根据优先级放入到正确位置。</li></ul><h2 id="优先级队列的封装"><a href="#优先级队列的封装" class="headerlink" title="优先级队列的封装"></a>优先级队列的封装</h2><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">/* 封装优先级队列 */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">PriorityQueue</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-comment">//保存元素和优先级</span><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">QueueElement</span>(<span class="hljs-params">element,priority</span>)&#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>=element;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">priority</span>=priority;<br>    &#125;<br>    <span class="hljs-comment">//封装属性</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>=[];<br>    <span class="hljs-comment">//封装方法</span><br>    <span class="hljs-comment">//实现插入方法</span><br>    <span class="hljs-title class_">PriorityQueue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">enqueue</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">element,priority</span>)&#123;<br>        <span class="hljs-comment">// 1、创建QueueElement对象</span><br>        <span class="hljs-keyword">const</span> queueElement=<span class="hljs-keyword">new</span> <span class="hljs-title class_">QueueElement</span>(element,priority);<br>        <span class="hljs-comment">//2、判断队列是否为空</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>==<span class="hljs-number">0</span>)&#123;<br>           <span class="hljs-comment">//直接将实例化的元素与优先级对象push进来</span><br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(queueElement)<br><br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-comment">//3、for循环遍历比较队列中已有元素的优先级 </span><br>            <span class="hljs-keyword">var</span> added=<span class="hljs-literal">false</span>; <br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>;i++)&#123;<br>                <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[i].<span class="hljs-property">priority</span>&gt;queueElement.<span class="hljs-property">priority</span>)&#123;<br>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">splice</span>(i,<span class="hljs-number">0</span>,queueElement);<br>                    added=<span class="hljs-literal">true</span>;<br>                    <span class="hljs-keyword">break</span>;  <br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(!added)&#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(queueElement)<br>            &#125;<br>        &#125;<br>    &#125;<br>      <span class="hljs-comment">//toString</span><br>    <span class="hljs-title class_">PriorityQueue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">let</span> resultString=<span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>;i++)&#123;<br>             resultString +=<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[i]+<span class="hljs-string">&quot;&quot;</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> resultString<br>    &#125;<br><br>&#125;<br><span class="hljs-comment">//实例化类</span><br><span class="hljs-keyword">var</span> priorityQueue=<span class="hljs-keyword">new</span> <span class="hljs-title class_">PriorityQueue</span>();<br><br><span class="hljs-comment">//向其添加元素</span><br>priorityQueue.<span class="hljs-title function_">enqueue</span>(<span class="hljs-string">&quot;何治兴&quot;</span>,<span class="hljs-number">153</span>);<br>priorityQueue.<span class="hljs-title function_">enqueue</span>(<span class="hljs-string">&quot;李玉成&quot;</span>,<span class="hljs-number">323</span>);<br>priorityQueue.<span class="hljs-title function_">enqueue</span>(<span class="hljs-string">&quot;李阳&quot;</span>,<span class="hljs-number">223</span>);<br>priorityQueue.<span class="hljs-title function_">enqueue</span>(<span class="hljs-string">&quot;zhangsan&quot;</span>,<span class="hljs-number">310</span>);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(priorityQueue)<br></code></pre></div></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>数据结构</category>
      
    </categories>
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>数据结构，队列</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>node基础使用</title>
    <link href="/2022/05/13/node/node%E5%9F%BA%E7%A1%80/"/>
    <url>/2022/05/13/node/node%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>  此文档是之前学习前端记录，后续我将进行格式修改。</p><h1 id="初始node-js"><a href="#初始node-js" class="headerlink" title="初始node.js"></a>初始node.js</h1><div class="hljs code-wrapper"><pre><code class="hljs">   v8解析引擎负责解析执行javascript代码；   内置API是由运行环境提供的特殊接口，只能在所在的运行环境中调用。</code></pre></div><h1 id="什么是node-js"><a href="#什么是node-js" class="headerlink" title="什么是node.js"></a>什么是node.js</h1><div class="hljs code-wrapper"><pre><code class="hljs">  node.js是基于Chrome的V8引擎的javascript的运行环境  注意：      浏览器是javascript的前端运行环境；      node.js是javascript的后端运行环境      node.js无法调用DOM、bom等操作</code></pre></div><h1 id="node-js可以做什么"><a href="#node-js可以做什么" class="headerlink" title="node.js可以做什么"></a>node.js可以做什么</h1><div class="hljs code-wrapper"><pre><code class="hljs">  node.js作为一个javascript的运行环境，仅仅提供了基础的功能和API，然而基于node.js的工具和框架层出不穷。        可以基于Express框架，快速构建WEB应用        可以基于Electron框架，可以构建跨平台桌面应用        可以基于restify框架，快速构建API接口项目        可以读写数据库和操作数据库、创建实用命令行工具辅助前端开发</code></pre></div><h1 id="在node-js环境中执行javascript代码"><a href="#在node-js环境中执行javascript代码" class="headerlink" title="在node.js环境中执行javascript代码"></a>在node.js环境中执行javascript代码</h1><div class="hljs code-wrapper"><pre><code class="hljs">   打开终端，输入node+执行代码文件位置</code></pre></div><h1 id="fs文件系统模块"><a href="#fs文件系统模块" class="headerlink" title="fs文件系统模块"></a>fs文件系统模块</h1><div class="hljs code-wrapper"><pre><code class="hljs">    fs模块是node官方提供用来操作文件的模块。它提供一系列方法和属性，用来满足用户对文件的操作需求      使用步骤：       首先导入fs模块文件            const fs=rquire(&#39;fs&quot;)        读取文件fs.readFile()方法        写入文件fs.readFile()方法</code></pre></div><h1 id="读取文件"><a href="#读取文件" class="headerlink" title="读取文件"></a>读取文件</h1><div class="hljs code-wrapper"><pre><code class="hljs">   读取文件会传入三个参数：    第一个参数为文件所在位置    第二个为读取文件时采用的编码格式，一般默认指定为UTF-8    第三个参数为回调函数，拿到读取失败和成功的结果   err datastr    读取成功err参数就为null，读取失败datastr就为undefind 例如：fs.readFile(&#39;./file.txt&#39;,&#39;utf-8&#39;,(err,datastr)=&gt;&#123;           console.log(err)           console.log(&#39;------------&#39;)           //打印成功读取文件的结果           console.log(datastr)       &#125;)</code></pre></div><h1 id="写入文件"><a href="#写入文件" class="headerlink" title="写入文件"></a>写入文件</h1><div class="hljs code-wrapper"><pre><code class="hljs">   该方法会传入三个参数       第一个参数为要写入文件的位置       第二个参数为要写入的内容       第三个参数为回调函数            回调函数会传入一个参数err            如果文件写入 成功，则err参数的值为null            如果文件写入失败，则err的值等于一个错误对象  例如：    fs.writeFile(&#39;./file.txt&#39;,&#39;我想学习&#39;,(err)=&gt;&#123;         console.log(err)    &#125;)  注意：   这个方法只能用来创建文件，不能用来创建路径   新写入内容会覆盖旧内容</code></pre></div><h1 id="fs文件模块路径"><a href="#fs文件模块路径" class="headerlink" title="fs文件模块路径"></a>fs文件模块路径</h1><div class="hljs code-wrapper"><pre><code class="hljs">  fs文件模块会根据命令终端所在的目录动态拼接出操作文件的完整路径   那么这样就会出现问题：     当我们文件路径以./或者在../的相对路径形式，那么在不同文件下执行命令就会出现路径问题  解决方法：1、使用绝对路径（可移植性差）           2、使用__dirname 来表示当前文件目录 例如用 __dirname+&#39;/file.txt&#39;</code></pre></div><h1 id="path路径模块"><a href="#path路径模块" class="headerlink" title="path路径模块"></a>path路径模块</h1><div class="hljs code-wrapper"><pre><code class="hljs"> path模块是node.js官方提供的、用来处理路径的模块，他提供的一系列模块可以满足用户对路径处理的需求 例如：path.join(),用来拼接成一个完整的路径字符串      path.basename()。用来从路径字符串中将文件名解析出来      path.extname(),获取路径扩展路径 以后文件路径拼接时，就要使用path.join() 例如：const pathStr=path.join(__dirname,&#39;./111&#39;)</code></pre></div><h1 id="获取路径中的名字部分"><a href="#获取路径中的名字部分" class="headerlink" title="获取路径中的名字部分"></a>获取路径中的名字部分</h1><div class="hljs code-wrapper"><pre><code class="hljs">  const pathBasename=path.basename(&#39;/a/b/d/c&#39;)  打印pathBasename为c</code></pre></div><h1 id="什么是http模块"><a href="#什么是http模块" class="headerlink" title="什么是http模块"></a>什么是http模块</h1><div class="hljs code-wrapper"><pre><code class="hljs">在网络节点中，负责消费资源的交=叫客户端，负责对外提供网络资源的电脑叫服务器http模块是node.js官方提供的、用来创建web服务器的模块。通过http模块提供的方法，就能方便的把一台普通的电脑变成一台web服务器，从而向外界提供web资源服务器与普通电脑的区别在于，服务器上安装了web服务器软件，例如apache等，通过这些服务器软件，就能把一台普通的电脑变为一台web服务器在node.js中，不需要第三方服务器软件，我们可以使用node.js提供的http模块</code></pre></div><h1 id="服务器相关概念"><a href="#服务器相关概念" class="headerlink" title="服务器相关概念"></a>服务器相关概念</h1><div class="hljs code-wrapper"><pre><code class="hljs">#ip地址    IP地址具有唯一性；    互联网中每个web服务器，都有自己的IP地址，都可以通过ip地址找到相应的网站#域名和域名服务器    IP地址能够唯一标识在网络中的计算机，但是IP地址是一长串数字，不直观，不便于记忆，于是域名地址解决这一问题    ip地址和域名是一一对应的关系，这份对应关系保存在域名服务器中（DNS）     注意：        单纯使用IP地址，在互联网中的电脑也能够正常使用，互联网中的电脑有了域名的加持，变得更加方便        在开发测试中，127.0.0.1对应的域名是localhost#端口号    在一台电脑中可以运行成千上万个服务器，但是每个服务器对应唯一个端口号，通过端口号可以准确交到指定    服务器处理   </code></pre></div><h1 id="创建最基本的web服务器步骤"><a href="#创建最基本的web服务器步骤" class="headerlink" title="创建最基本的web服务器步骤"></a>创建最基本的web服务器步骤</h1><div class="hljs code-wrapper"><pre><code class="hljs">   第一步导入http模块   第二步创建web服务器实例   第三步为服务器绑定request事件，监听客户端请求   第四步启动服务器     const http=require(&#39;http&#39;)     //创建web服务器实例      const server=http.createServer()     //为服务器绑定request事件，监听客户端请求     server.on(&#39;request&#39;,(req,res)=&gt;&#123;       console.log(&#39;服务器被调用&#39;)     &#125;)    //启动服务器    server.listen(9000,()=&gt;&#123;      console.log(&#39;服务启动成功&#39;)    &#125;)</code></pre></div><h1 id="req对象"><a href="#req对象" class="headerlink" title="req对象"></a>req对象</h1><div class="hljs code-wrapper"><pre><code class="hljs">  只要服务器接收到了客户端的请求，就会通过server.on()为服务器绑定request事件处理函数     req是请求对象，他包含了与客户端相关的属性与数据     req.url是客户端请求的地址     req.method是客户端的method请求类型</code></pre></div><h1 id="res对象"><a href="#res对象" class="headerlink" title="res对象"></a>res对象</h1><div class="hljs code-wrapper"><pre><code class="hljs">  res是应答对象</code></pre></div><h1 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h1><div class="hljs code-wrapper"><pre><code class="hljs"> 模块化是指解决一个复杂问题时，自顶向下逐层把系统划分为若干个模块的过程。对于整个系统来说，模块是可组合、 可分解和更换的单元    好处：      提高了代码的复用性      提高了代码的可维护性      可以实现按需加载</code></pre></div><h1 id="模块的分类"><a href="#模块的分类" class="headerlink" title="模块的分类"></a>模块的分类</h1><div class="hljs code-wrapper"><pre><code class="hljs">内置模块   （内置模块是由node.js官方提供的如fs文件模块、path路径模块、http模块）自定义模块第三方模块   </code></pre></div><h1 id="加载模块"><a href="#加载模块" class="headerlink" title="加载模块"></a>加载模块</h1><div class="hljs code-wrapper"><pre><code class="hljs">   使用require()方法可以加载需要的内置模块、用户自定义模块、第三方模块使用   加载自定义模块时，需要加路径</code></pre></div><h1 id="模块作用域"><a href="#模块作用域" class="headerlink" title="模块作用域"></a>模块作用域</h1><h1 id="向外共享模块作用域的成员"><a href="#向外共享模块作用域的成员" class="headerlink" title="向外共享模块作用域的成员"></a>向外共享模块作用域的成员</h1><div class="hljs code-wrapper"><pre><code class="hljs">  使用require方法导入模块时，导入的结果永远以module.exports指向的对象为准   由于module.exports单词写起来比较复杂，为了简化向外共享成员代码时，node提供   了exports对象。默认情况下，exports和module.exports指向同一个对象，最终指向的结果还是以   module.exports指向的对象为准</code></pre></div><h1 id="module-exports与export使用误区"><a href="#module-exports与export使用误区" class="headerlink" title="module.exports与export使用误区"></a>module.exports与export使用误区</h1><div class="hljs code-wrapper"><pre><code class="hljs">   require方法导入模块时，导入的结果永远以module.exports指向的对象为准</code></pre></div><h1 id="node-js中的模块化规范"><a href="#node-js中的模块化规范" class="headerlink" title="node.js中的模块化规范"></a>node.js中的模块化规范</h1><div class="hljs code-wrapper"><pre><code class="hljs"> node.js遵循了commonJs规范，commonJs规定了模块的特性和各个模块之间相互依赖  commonJs规定：   1.每个模块内部，module变量代表当前模块   2.module变量是一个对象，他的export属性是对外的接口   3.加载某个模块时，其实是加载该模块module.exports的属性，require()方法用于加载模块</code></pre></div><h1 id="node-js中的第三方模块又叫做包"><a href="#node-js中的第三方模块又叫做包" class="headerlink" title="node.js中的第三方模块又叫做包"></a>node.js中的第三方模块又叫做包</h1><div class="hljs code-wrapper"><pre><code class="hljs">     就像电脑与计算机是相同的东西     由于node.js的内置模块仅仅提供了一些底层的API，导致在基于内置模块进行项目开发时，效率很低     包是基于内置模块封装出来的、提供了更高级、更方便的API、极大的提高了开发效率</code></pre></div><h1 id="包管理配置文件"><a href="#包管理配置文件" class="headerlink" title="包管理配置文件"></a>包管理配置文件</h1><div class="hljs code-wrapper"><pre><code class="hljs">    在npm中规定，在项目根目录中，必须提供一个叫做package.json的包管理配置文件，用来记录    与项目有关的一些配置信息，例如：       项目的名称、版本号、描述       项目中用到了那些包       那些包在开发中会用到       那些包在开发和部署时都会用到</code></pre></div><h1 id="创建包管理配置文件"><a href="#创建包管理配置文件" class="headerlink" title="创建包管理配置文件"></a>创建包管理配置文件</h1><div class="hljs code-wrapper"><pre><code class="hljs">  --npm提供了一个快捷命令，可以执行命令在所处目录中，快速创建package.json包管理配置文件      npm init -y  --package.json包管理文件中的dependencies节点表示使用npm i命令装了那些包    devDependencies节点表示某些包只会在开发阶段使用的包，，而在项目上线之后不会用到，则建议将这些包记录到 devDependencies    节点中，如果包在开发和上线之后都需要使用时，建议把这些包记录到dependencies节点中  --安装包npm i    卸载包npm uninstall        安装指定的包，并记录到devDependencies节点中   npm i 包名 --save--dev（简写npm i 包名 -D）</code></pre></div><h1 id="包的分类"><a href="#包的分类" class="headerlink" title="包的分类"></a>包的分类</h1><div class="hljs code-wrapper"><pre><code class="hljs">   包分为项目开发包，全局包        全局包：              只有工具性质的包，才有全局安装的必要性              包会安装到C:\Users\asus\AppData\Roaming\npm\node_modules下              npm i 包名 -g        项目开发包：           开发依赖包           核心依赖包</code></pre></div><h1 id="发布npm包"><a href="#发布npm包" class="headerlink" title="发布npm包"></a>发布npm包</h1><div class="hljs code-wrapper"><pre><code class="hljs">  把终端切换到包的根目录中时，运行npm publish命令。即可发布到npm上（包名不能雷同）  运行npm unpublish 包名 --force命令，即可从npm 删除已发布的包（仅可删除上传72小时以内的包）  删除的包24小时内不能重新上传</code></pre></div><h1 id="模块加载机制"><a href="#模块加载机制" class="headerlink" title="模块加载机制"></a>模块加载机制</h1><div class="hljs code-wrapper"><pre><code class="hljs">  优先从缓存中加载，模块第一次加载之后会被后台缓存，这也意味着多次调用require()不会导致模块代码执行  多次，注意，无论是内置模块、用户自定义模块、还是第三方模块，他们都会优先从缓存中加载，从而提高加载效率    内置模块是node.js官方提供的，所以内置模块的优先级最高  使用自定义模块时，必须加./路径标识符，否则node将会当作内置模块或第三方模块  如果是第三方模块会尝试从node_modules文件夹中寻找，没有找到就会移动到上一层目录中，直至文件根目录  </code></pre></div><h1 id="express"><a href="#express" class="headerlink" title="express"></a>express</h1><div class="hljs code-wrapper"><pre><code class="hljs">  express是基于node.js平台，快速、开放、极简的web开发框架  express的作用与node.js内置模块类似，专门用来创建web服务器  express本质：就是一个npm上的第三方包，提供了快速创建web服务器的便捷方法</code></pre></div><h1 id="express能做什么"><a href="#express能做什么" class="headerlink" title="express能做什么"></a>express能做什么</h1><div class="hljs code-wrapper"><pre><code class="hljs">  使用express，我们可以方便、快速创建web网站服务器或API接口的服务器</code></pre></div><h1 id="express基本使用"><a href="#express基本使用" class="headerlink" title="express基本使用"></a>express基本使用</h1><div class="hljs code-wrapper"><pre><code class="hljs">  //导入express  //创建web服务器实例  //启动web服务器    //导入express    const express=require(&#39;express&#39;)    //创建web服务器实例    const app=express()    //启动web服务器    app.listen(9000,()=&gt;&#123;      console.log(&#39;express搭建的服务器好了&#39;)    &#125;)</code></pre></div><h1 id="监听客户端GET请求，post请求"><a href="#监听客户端GET请求，post请求" class="headerlink" title="监听客户端GET请求，post请求"></a>监听客户端GET请求，post请求</h1><div class="hljs code-wrapper"><pre><code class="hljs"> 调用app.get()方法，使用res.send()发送应答     //监听客户端GET请求      app.get(&#39;/user&#39;,(req,res)=&gt;&#123;        //向客户端发送json对象        res.send(&#123;name:&#39;hezhixing&#39;&#125;)      &#125;)   调用app.post()方法，使用res.send()发送应答        //监听客户端POST请求        app.post(&#39;/user&#39;,(req,res)=&gt;&#123;          res.send(&#39;请求成功&#39;)        &#125;)</code></pre></div><h1 id="一些方法"><a href="#一些方法" class="headerlink" title="一些方法"></a>一些方法</h1><div class="hljs code-wrapper"><pre><code class="hljs"> res.send()应答响应 req.query请求参数 req.params对象，可以访问到url，通过：匹配到动态参数         //注意这里的：id是一个动态的id        app.get(&#39;/user/:id&#39;,(req,res)=&gt;&#123;          console.log(req.params)          res.send(req.params)        &#125;)</code></pre></div><h1 id="express-staic"><a href="#express-staic" class="headerlink" title="express.staic"></a>express.staic</h1><div class="hljs code-wrapper"><pre><code class="hljs">  静态资源，express提供了非常好用的函数，叫做express.static(),通过它，我们可以非常  方便地创建一个静态资源服务器，例如，通过如下代码就可以将public目录下的图片、css文件  js文件对外开放访问：         app.use(express.static(&#39;public&#39;))  注意：express在指定静态目录下查找文件，存放静态文件的目录名不会出现在url中    //导入express    const express=require(&#39;express&#39;)    //创建web服务器实例    const app=express()    //调用express.static()方法，来对外提供那个静态资源    app.use(express.static(&#39;./clock&#39;))    //启动web服务器实例    app.listen(9000,()=&gt;&#123;      console.log(&#39;web服务器启动成功！&#39;)    &#125;)</code></pre></div><h1 id="托管多个静态资源目录"><a href="#托管多个静态资源目录" class="headerlink" title="托管多个静态资源目录"></a>托管多个静态资源目录</h1><div class="hljs code-wrapper"><pre><code class="hljs">  调用多次express.static方法 ,但是该方法会根据顺序查找，    app.use(&#39;file&#39;,express.static(&#39;./files&#39;))    app.use(&#39;clock&#39;,express.static(&#39;./clock&#39;))    加载时，要加访问前缀</code></pre></div><h1 id="express路由"><a href="#express路由" class="headerlink" title="express路由"></a>express路由</h1><div class="hljs code-wrapper"><pre><code class="hljs">   路由广义上来讲，就是映射关系   在express中，路由指的是客户端请求与服务器处理函数之间的映射关系。   Express的路由由三部分组成，分别是请求的类型、请求的url地址、处理函数，格式如下：      app.METHOD(PATH,HANDLER)  例子：         //引入express实例          const express=require(&#39;express&#39;)          //创建expressweb服务          const app=express()          app.get(&#39;/&#39;,(req,res)=&gt;&#123;            console.log(&#39;/路由下被请求&#39;)            res.send(&#39;hello nodejs&#39;)          &#125;)          app.get(&#39;/user&#39;,(req,res)=&gt;&#123;            console.log(&#39;user路由被请求&#39;)            res.send(&#39;我是user路由下的请求&#39;)          &#125;)          //启动web服务器          app.listen(9000,()=&gt;&#123;            console.log(&#39;服务器启动成功&#39;)          &#125;)</code></pre></div><h1 id="路由的匹配过程"><a href="#路由的匹配过程" class="headerlink" title="路由的匹配过程"></a>路由的匹配过程</h1><div class="hljs code-wrapper"><pre><code class="hljs">   每当一个请求到达服务器之后，需要先经过路由的匹配，只有匹配成功之后，才会调用相应的处理函数   在匹配时，按路由的顺序进行匹配，如果请求类型和请求的url地址同时匹配成功，则express就会将这次   的请求，转交给对应的function函数进行处理。   按定义的先后顺序进行匹配，如匹配成功就不会再进行匹配</code></pre></div><h1 id="模块化路由"><a href="#模块化路由" class="headerlink" title="模块化路由"></a>模块化路由</h1><div class="hljs code-wrapper"><pre><code class="hljs"> 为了方便对路由进行模块化管理，exprss不建议将路由直接挂载到app上，而是推荐将路由抽离为单独的模块   将路由抽离为单独的模块     1、创建路由，模块对应的js文件     2、调用express.Router()函数创建路由对象     3、向路由对象上挂载具体的路由     4、使用module.exports向外共享路由对象     5、使用app.use()函数注册路由模块     app.use()作用就是注册全局中间件，还可以在此加入访问前缀</code></pre></div><h1 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h1><div class="hljs code-wrapper"><pre><code class="hljs"> 中间件(middleware), 特指业务流程的中间处理环节 express中间件的调用流程：当请求到达express的服务器之后， 可以调用多个中间件，对这次请求进行预处理</code></pre></div><h1 id="express中间件的格式"><a href="#express中间件的格式" class="headerlink" title="express中间件的格式"></a>express中间件的格式</h1><div class="hljs code-wrapper"><pre><code class="hljs">  express中间件，本质上就是一个function处理函数，express中间件的格式如下：      app.get(path,(req,res,next)=&gt;&#123;        next()      &#125;)        注意:中间件函数的形参列表中，必须包含next函数，而路由处理函数中只包含req,res</code></pre></div><h1 id="next函数的作用"><a href="#next函数的作用" class="headerlink" title="next函数的作用"></a>next函数的作用</h1><div class="hljs code-wrapper"><pre><code class="hljs"> next函数是实现多个中间件连续调用的关键，它表示流转关系转交给下一个中间件或路由,有放行的意思      //引入express模块        const express=require(&#39;express&#39;)        const app=express()        //定义中间件        const mw=(req,res,next)=&gt;&#123;          console.log(&#39;这是一个最简单的中间件函数&#39;)          //把流转关系转交给下一个中间件或路由          next()        &#125;        //注册全局中间件        app.use(mw)        //使用中间件        app.get(&#39;/&#39;,(req,res)=&gt;&#123;          res.send(&#39;HOME page&#39;)        &#125;)        app.get(&#39;/user&#39;,(req,res)=&gt;&#123;          res.send(&#39;User page&#39;)        &#125;)        app.listen(9000,()=&gt;&#123;          console.log(&#39;定义中间件服务器启动&#39;)        &#125;)</code></pre></div><h1 id="中间件的作用"><a href="#中间件的作用" class="headerlink" title="中间件的作用"></a>中间件的作用</h1><div class="hljs code-wrapper"><pre><code class="hljs">   多个中间件之间，共享同一份req和res，基于这样的特性，我们可以在上游的中间件统一为req与res对象添加   自定义的属性或方法。供下游中间件或路由进行使用       例如：可以设置req参数，向下游路由或中间件共享该参数，下游可以使用req来访问中间件的设置         //全局中间件简化格式          app.use((req,res,next)=&gt;&#123;            //为req对象挂载，自定义属性，从而把时间共享传递给后面的所有路由            req.starTime=moment().format(&#39;YYYY-MM-DD HH:mm:ss&#39;)            console.log(&#39;这是定义注册全局中间件&#39;)            next()          &#125;)</code></pre></div><h1 id="定义多个中间件"><a href="#定义多个中间件" class="headerlink" title="定义多个中间件"></a>定义多个中间件</h1><div class="hljs code-wrapper"><pre><code class="hljs">  通过app.use来连续定义多个全局中间件，客户端请求到达服务器以后，会按照中间件定义先后顺序依次进行调用</code></pre></div><h1 id="局部生效的中间件"><a href="#局部生效的中间件" class="headerlink" title="局部生效的中间件"></a>局部生效的中间件</h1><div class="hljs code-wrapper"><pre><code class="hljs">   不使用app.use()注册的中间件，叫做局部生效的中间件        //使用中间件          app.get(&#39;/&#39;,mw,(req,res)=&gt;&#123;            res.send(&#39;HOME page&#39;)          &#125;)</code></pre></div><h1 id="定义多个中间件-1"><a href="#定义多个中间件-1" class="headerlink" title="定义多个中间件"></a>定义多个中间件</h1><div class="hljs code-wrapper"><pre><code class="hljs">    在路由中有两种等价的方式    1、app.get(&#39;/&#39;,mw1,mw2,mw3,handler())    2、app.get(&#39;/&#39;,[mw1,mw2,mw3],handler())</code></pre></div><h1 id="中间件使用的5个注意事项"><a href="#中间件使用的5个注意事项" class="headerlink" title="中间件使用的5个注意事项"></a>中间件使用的5个注意事项</h1><div class="hljs code-wrapper"><pre><code class="hljs">   1、一定要在路由之前注册中间件   2、客户端发送过来的请求，可以连续调用多个中间件来进行处理   3、定义中间件时，不要忘记调用next函数，进行放行   4、调用完next函数后，不要在其编写其他代码   5、连续调用多个中间件时，中间件之间是共享req与res对象</code></pre></div><h1 id="中间件的分类"><a href="#中间件的分类" class="headerlink" title="中间件的分类"></a>中间件的分类</h1><div class="hljs code-wrapper"><pre><code class="hljs"> express官方将中间件分为了五大类：    1、通过app.use()、app.get()、app.post(),绑定到app实例上的中间件，叫做应用级别中间件    2、路由级别中间件：绑定到express.Router()实例上的中间件，他的用法与应用级别中间件没有任何区别       只不过、应用级别中间件是绑定到app实例上的，路由级别中间件是绑定到router上的    3、错误级别中间件:专门用来捕获整个项目中发生的异常错误，从而防止项目异常崩溃的问题       格式：错误级别的中间件的function的处理函数中，必须要有四个形参，分别是（err,req,res,next）         例如：             app.get(&#39;/&#39;,(req,res)=&gt;&#123;               throw new Error(&#39;服务器内部发生了错误&#39;)    //抛出自定义错误               res.send(&#39;hello&#39;)             &#125;)             app.use((err,req,res,next)=&gt;&#123;              //错误级别的中间件               console.log(&#39;发生了错误&#39;,err.message)               res.send(&#39;Error&#39;+err.message)             //将收集的异常错误发送给客户端，防止程序异常崩溃             &#125;)      注意错误级别中间件要注册到路由之后，才能捕获异常错误    4、express内置中间件：4.16.0内置了3个内置中间件          express.static()快速托管静态资源的内置中间件，例如HTML、css等等          express.json()解析json格式的请求体数据（4.16后可用）          express.urlencoded()解析url-encoded格式的请求体数据（4.16后可用）          使用内置中间件方法：app.use(express.json())    5、第三方中间件        非express官方内置的中间件，而是由第三方开发出来的中间件叫做第三方中间件，在项目中，大家可以按需下载并配置         例如在express4.16.0之前的版本，经常使用body-parser这个第三方中间件，来解析请求体数据：              1、运行npm i body-parser安装这个中间件              2、使用require导入这个中间件              3、调用app.use()注册并使用中间件</code></pre></div><h1 id="自定义中间件"><a href="#自定义中间件" class="headerlink" title="自定义中间件"></a>自定义中间件</h1><div class="hljs code-wrapper"><pre><code class="hljs"> 自己手动模拟一个类似于express.urlencoded这样的中间件，来解析POST提交到服务器的表单数据   实现步骤：       1、定义中间件       2、监听req的data请求       3、监听req的end事件       4、使用querystring模块解析请求体数据       5、将解析好的数据对象挂载到req.body</code></pre></div><h1 id="使用express写接口"><a href="#使用express写接口" class="headerlink" title="使用express写接口"></a>使用express写接口</h1><div class="hljs code-wrapper"><pre><code class="hljs">  1、创建基本的服务器  2、创建api路由模块  3、接口编写  4、跨域问题解决：           有：cors、jsonp(这种有缺陷，只支持get请求)</code></pre></div><h1 id="跨域问题解决"><a href="#跨域问题解决" class="headerlink" title="跨域问题解决"></a>跨域问题解决</h1><div class="hljs code-wrapper"><pre><code class="hljs">  1、cors跨域问题：      cors是express的一个第三方中间件，通过安装和配置cors中间件，可以很方便的解决跨域问题  使用步骤有三步：       1.运行npm i cors安装中间件       2.使用const cors=require(&#39;cors&#39;)导入中间件       3.在路由之前调用app.use(cors())</code></pre></div><h1 id="cors"><a href="#cors" class="headerlink" title="cors"></a>cors</h1><div class="hljs code-wrapper"><pre><code class="hljs"> 什么是cors：英文名称（Cross-origin Resource Sharing）跨域资源共享由一系列http响应头组成，  这些http响应头决定浏览器是否阻止前端js代码跨域获取资源  浏览器同源安全策略会默认阻止网页“跨域”获取资源，但是如果接口服务器配置了cors相关的http响应头  就可以解决跨域问题访问限制。 注意：cors主要在服务器端进行配置，客户端浏览器无需做任何额外的配置，即可请求开启了cors的接口      cors在浏览器中有兼容性，只支持  XMLHttpRequest Level2的浏览器才能正常访问</code></pre></div><h1 id="cors响应头"><a href="#cors响应头" class="headerlink" title="cors响应头"></a>cors响应头</h1><div class="hljs code-wrapper"><pre><code class="hljs">   3个相关的响应头部：       Access-Contorl-Allow-Origin 可以控制那些网站的请求                  例如：res.setHeader(&#39;Access-Contorl-Allow-Origin&#39;,&#39;*&#39;)    //允许所有网站的请求       Access-Contorl-Allow-Headers 默认情况下，cors仅支持客户端发送9个请求头            通过这个可以声明额外的请求头：                       res.setHeader(&#39;Access-Contorl-Allow-Headers&#39;,&#39;Content-Type,X-Custom-Header&#39;)       Access-Contorl-Allow-Methods  默认情况下cors仅支持客户端发起get、post、HEAD请求           如果客户端想要通过PUT、DELELT等方式请求服务器的资源，则需要在服务器端设置指明实际需要的http方法                       res.setHeader(&#39;Access-Contorl-Allow-Methods&#39;,&#39;*&#39;)   //允许所有请求方法           </code></pre></div><h1 id="cors请求的分类"><a href="#cors请求的分类" class="headerlink" title="cors请求的分类"></a>cors请求的分类</h1><div class="hljs code-wrapper"><pre><code class="hljs">   在客户端请求cors接口时，根据请求方式和请求头的不同，可以将cors请求分为两大类：        1、简单请求                请求方式属于get、post、head三者之一，同时请求头在9个范围之内        2、预检请求               只要包含一项就是预检请求                   请求方式是get、post、head三者之外                   请求头包含自定义头部字段                   向服务器发送了application/json格式的请求          什么是预检请求：在浏览器与服务器正式通信之前，浏览器会发送一个OPTION的请求进行预检，以获知                        服务器是否允许实际请求，所以这个OPTION的请求称为预检请求。服务器成功响应预检请求后，                        才会发送真正的请求  简单请求与预检请求的区别：         简单请求：客户端与服务器端之间只会发生一次请求         预检请求：客户端与服务器端会发生两次请求，OPTION预检请求成功之后，才会发起真正的请求</code></pre></div><h1 id="jsonp接口"><a href="#jsonp接口" class="headerlink" title="jsonp接口"></a>jsonp接口</h1><div class="hljs code-wrapper"><pre><code class="hljs">   概念：浏览器端通过&lt;script&gt;标签的src属性，请求服务器上的数据，同时服务器返回一个函数的调用。这种请求数据的方式叫做jsonp   特点：JSONP不属于真正的AJAX请求，因为它没有使用XMLHttpRequest对象        JSONP仅支持GET请求，不支持POST、PUT等请求    创建JSONP接口：         如果项目中已经配置了cors跨域资源共享，为了防止冲突，必须要配置cors中间件之前声明JSONP接口，否则JSONP接口会被处理         成开启了CORS的接口    实现jsonp接口的步骤：           1、获取客户端发送过来的回调函数的名字           2、得到通过jsonp形式发送给客户端的数据           3、根据前两步得到的数据，拼接一个函数调用的字符串           4、把上一步拼接得到的字符串，响应给客户端的&lt;script&gt;标签解析                  //配置JSONP接口，必须要在cors之前配置                  app.get(&#39;/api/jsonp&#39;,(req,res)=&gt;&#123;                    //定义JSONP接口具体实现过程                    //1、获取客户端发送过来的回调函数的名字                    const funcName=req.query.callback                    //2、获取通过jsonp格式发送给客户端的数据                    const data=&#123;name:&#39;zs&#39;,age:19&#125;                    //3、根据前两步得到的数据、拼接出一个函数调用的字符串                    const scriptStr=`$&#123;funcName&#125;($&#123;JSON.stringify(data)&#125;)`                    //4、把上一步拼接的字符串，响应给客户端的&lt;script&gt;标签解析执行                    res.send(scriptStr)                  &#125;)                  //jsonp请求                    $(&quot;#jsonp&quot;).on(&#39;click&#39;,function()&#123;                      $.ajax(&#123;                      type:&#39;GET&#39;,                      url:&quot;http://127.0.0.1:9000/api/jsonp&quot;,                      dataType:&#39;JSONP&#39;,                      success:function(res)&#123;                        console.log(res)                      &#125;                    &#125;)                    &#125;)</code></pre></div><h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><h1 id="数据库的基本概念"><a href="#数据库的基本概念" class="headerlink" title="数据库的基本概念"></a>数据库的基本概念</h1><div class="hljs code-wrapper"><pre><code class="hljs">     数据库（database）是用来阻组织、存储和管理数据的仓库     为了方便管理互联网数据，就有了数据库管理系统的概念，简称数据库     传统型数据库中，数据的组织结构分为数据库、数据表、数据行、数据列4大部分组成     之间的关系：             1、在实际的开发过程中，一般情况下，每个项目对应独立的数据库             2、在不同的数据，要存储到数据库的不同表中，例如：用户数据存到users表中，图书信息存到books表中             3、每个表具体要存储那些信息，由字段来决定</code></pre></div><h1 id="安装Mysql"><a href="#安装Mysql" class="headerlink" title="安装Mysql"></a>安装Mysql</h1><div class="hljs code-wrapper"><pre><code class="hljs">  .......</code></pre></div><h1 id="sql增删改查基本使用"><a href="#sql增删改查基本使用" class="headerlink" title="sql增删改查基本使用"></a>sql增删改查基本使用</h1><div class="hljs code-wrapper"><pre><code class="hljs">    1、SQL的SELECT语句：         SELECT语句用于从表中查询数据，执行的结果被存储在一个结构表中，格式如下：              SELECT *FROM 表名称     //查询指定表              SELECT 列名称 FROM 表名称        //从指定表中，查询出指定列的名称的数据   2、SQL的INSERT INTO 语句         INSERT INTO 语句用于向数据表中插入新的数据行，语法格式              INSERT INTO table_name(列1，列2....)VALUES(值1，值2....)    3、SQL中Update语句           Update语句主要运用于修改数据表中的数据，语法格式如下：                  UPDATE 表名称 SET 列名=新值 WHERE 列名称=某值   //修改一列                  UPDATE 表名称 SET 列名=新值, 列名=新值 WHERE 列名称=某值   //修改多个列    4、SQL中DELETE语句           DELETE语句用于删除表中的行，语法格式：                 DELETE FROM 表名称 WHERE 列名称=值    注意：在删除、修改时一定要注意加上WHERE条件</code></pre></div><h1 id="SQL中WHERE子句"><a href="#SQL中WHERE子句" class="headerlink" title="SQL中WHERE子句"></a>SQL中WHERE子句</h1><div class="hljs code-wrapper"><pre><code class="hljs">   WHERE用于限定选择的标准，在SELECT、DELETE、UPDATE语句中均可使用WHERE子句来限定选择的标准         SELECT 列名称 FROM 表名 WHERE 列 运算符 值           //查询语句中的where条件         UPDATE 表名称 SET 列=新值，列=新值 WHERE 列 运算符 值     //更新满足WHERE条件         DELECT FROM 表名称 WHERE 列 运算符 值                    //删除满足WHERE条件的行      其中运算符有=,&lt;,&gt;,&lt;&gt;(不等于),BETWEEN</code></pre></div><h1 id="SQL语句的ADD与OR运算符"><a href="#SQL语句的ADD与OR运算符" class="headerlink" title="SQL语句的ADD与OR运算符"></a>SQL语句的ADD与OR运算符</h1><div class="hljs code-wrapper"><pre><code class="hljs">  AND与OR可以在WHERE子句中把两个多个条件结合起来  AND表示必须同时满足多个条件，相当于javascript中的&amp;&amp;运算符  OR表示只要满足一个条件就可以，相当于javascript中的||运算符</code></pre></div><h1 id="SQL语句中的ORDER-BY子句"><a href="#SQL语句中的ORDER-BY子句" class="headerlink" title="SQL语句中的ORDER BY子句"></a>SQL语句中的ORDER BY子句</h1><div class="hljs code-wrapper"><pre><code class="hljs">  ORDER BY子句用于根据指定的列对结果集进行排序  ORDER BY子句默认按照升序记录进行排序  如果希望降序排列，可以使用DESC关键字     例如：select * from node_user order by id DESC;   ORDER BY子句多重排序：          例如先按照id字段降序排列，再按name升序排序：select * from node_user order by id DESC,name asc;</code></pre></div><h1 id="SQL语句中的count函数与as关键字"><a href="#SQL语句中的count函数与as关键字" class="headerlink" title="SQL语句中的count函数与as关键字"></a>SQL语句中的count函数与as关键字</h1><div class="hljs code-wrapper"><pre><code class="hljs">  count(*)函数用于返回查询结果总数居条数，语法格式：        SELECT COUNT(*) FROM 表名称  可以使用AS关键字来为列设置别名        例如：查询出来的列的名称设置别名 SELECT COUNT(*) AS total FROM node_user WHERE id&gt;2</code></pre></div><h1 id="在项目中操作数据库"><a href="#在项目中操作数据库" class="headerlink" title="在项目中操作数据库"></a>在项目中操作数据库</h1><div class="hljs code-wrapper"><pre><code class="hljs">  1、安装操作数据库的第三方模块mysql  2、通过mysql模块连接到mysql数据库          //建立与mysql数据库的连接关系            const db=mysql.createPool(&#123;              host:&#39;127.0.0.1&#39;,             //数据库地址              port:&#39;3306&#39;,                   //端口              user:&#39;root&#39;,                   //登录数据账号              password:&#39;123456&#39;,             //密码              database:&#39;node_test&#39;           //数据库            &#125;)  3、通过mysql模块执行SQL语句           //查询数据库            db.query(&#39;SELECT * FROM node_user&#39;,(err, results)=&gt;&#123;              if(err) return console.log(&#39;数据库连接失败:&#39;,err.message)              //打印出结果              console.log(results)            &#125;)            //向user表中插入的数据            const user =&#123;id:5,name:&#39;hzx&#39;,password:897&#125;            //将执行的SQL语句，？表示占位符            const sqlStr=&#39;insert into node_user (id,name,password) values(?,?,?) &#39;            //插入数据            db.query(sqlStr,[user.id,user.name,user.password],(err,results)=&gt;&#123;              if(err) return console.log(&#39;数据库连接失败:&#39;,err.message)              //打印插入的结果              if(results.affectedRows ===1)&#123;console.log(&#39;插入成功&#39;)&#125;            &#125;)      注意：插入数据时，插入字段更多时，可以使用该SQL语句：insert into 表名 set ？            修改数据时，修改字段很多时，可以使用update 表名 set ? where id=?</code></pre></div><h1 id="web开发模式"><a href="#web开发模式" class="headerlink" title="web开发模式"></a>web开发模式</h1><div class="hljs code-wrapper"><pre><code class="hljs">     1、基于服务端渲染的开发模式             优点：前端耗时少，因为服务器端负责动态生成html的内容，浏览器只需要渲染页面即可，尤其是移动端，更省电                  有利于SEO，因为服务器端响应的是完整的html内容，所以爬虫更容易获取信息，更有利于SEO             缺点：                   占用服务器端资源                   不利于的前后端分离，开发效率低     2、前后端分离的开发模式             概念：前后端分离的开发模式，依赖于AJAX技术的广泛应用。简而言之，                    就是后端只负责API接口、前端使用AJAX调用接口的开发模式             优点：                  开发体验好                  用户体验好                  减轻了服务器端压力            缺点：                  不利于SEO</code></pre></div><h1 id="身份认证"><a href="#身份认证" class="headerlink" title="身份认证"></a>身份认证</h1><div class="hljs code-wrapper"><pre><code class="hljs">      身份认证又称身份验证、鉴权是指通过一定手段，完成对用户身份的确认。      在web开发中，也涉及用户身份的验证，例如各大网站的手机号验证码登录、邮箱登录、二维码登录等。          1、服务器渲染开发模式推荐使用session认证机制     2、前后端分离推荐使用JWT认证机制</code></pre></div><h1 id="session认证机制"><a href="#session认证机制" class="headerlink" title="session认证机制"></a>session认证机制</h1><div class="hljs code-wrapper"><pre><code class="hljs">     http协议的无状态性：指的是客户端的每次http请求都是独立的，连接多个请求没有直接的关系，服务器不会主动保留http请求的状态     突破http无状态性：cookie</code></pre></div><h1 id="什么是cookie"><a href="#什么是cookie" class="headerlink" title="什么是cookie"></a>什么是cookie</h1><div class="hljs code-wrapper"><pre><code class="hljs">    cookie是存储在用户浏览器中一段不超过4kb的字符串，他是由一个名称、一个值和其他几个用于控制cookie有效期、安全性、使用范围组成    不同域名的cookie是独立存在的，每当客户端发起请求时，会自动把当前域名下所有未过期的cookie一同发送给服务器    cookie特性：          1、自动发送          2、域名独立          3、过期时限          4、4kb限制</code></pre></div><h1 id="cookie在身份认证的作用"><a href="#cookie在身份认证的作用" class="headerlink" title="cookie在身份认证的作用"></a>cookie在身份认证的作用</h1><div class="hljs code-wrapper"><pre><code class="hljs">   客户端在第一次请求服务器的时候，服务器通过响应头的形式，向客户端发送一个身份认证的cookie，客户端会将cookie保存在浏览器中   随后，当客户端浏览器每次请求服务器的时候，浏览器会自动将身份认证相关的cookie、通过请求头形式发送给浏览器，服务器即可验证客户端身份。      cookie不具有安全性，cookie是储存在浏览器中，而浏览器提供了cookie的读写API，因此cookie极易被伪造，不要存放用户隐私及密码</code></pre></div><h1 id="session工作原理"><a href="#session工作原理" class="headerlink" title="session工作原理"></a>session工作原理</h1><div class="hljs code-wrapper"><pre><code class="hljs">     .....</code></pre></div><h1 id="在express中使用session认证"><a href="#在express中使用session认证" class="headerlink" title="在express中使用session认证"></a>在express中使用session认证</h1><div class="hljs code-wrapper"><pre><code class="hljs">          // TODO_01：请配置 Session 中间件          const session=require(&#39;express-session&#39;)          app.use(session(&#123;            secret:&#39;hezhixing&#39;,            resave:false,            saveUninitialized:true,          &#125;))</code></pre></div><h1 id="JWT认证机制"><a href="#JWT认证机制" class="headerlink" title="JWT认证机制"></a>JWT认证机制</h1><div class="hljs code-wrapper"><pre><code class="hljs">     session认证机制需要配合cookie才能使用，由于cookie不支持跨域访问，所以当涉及到前端跨域请求后后端连接     接口的时候，需要做很多额外的配置，才能实现seesion认证     注意：当前端请求后端接口不存在跨域问题时，推荐使用session认证机制           需要跨域请求后端接口时，推荐使用JWT认证机制         JWT(JSON web token)是目前最流行的跨域认证方案</code></pre></div><h1 id="JWT工作原理"><a href="#JWT工作原理" class="headerlink" title="JWT工作原理"></a>JWT工作原理</h1><div class="hljs code-wrapper"><pre><code class="hljs">     ....</code></pre></div><h1 id="JWT组成部分"><a href="#JWT组成部分" class="headerlink" title="JWT组成部分"></a>JWT组成部分</h1><div class="hljs code-wrapper"><pre><code class="hljs">   JWT通常由三部分组成，分别是Header头部、payload有效荷载、signature签名。三者采用英文“.”分割，格式：              Header.payload.signature  payload才是真正的用户信息，他是经过加密之后生成的字符串  header和signature是为了保证token安全</code></pre></div><h1 id="JWT使用方式"><a href="#JWT使用方式" class="headerlink" title="JWT使用方式"></a>JWT使用方式</h1><div class="hljs code-wrapper"><pre><code class="hljs">  客户端收到服务器返回的JWT之后，通常会将它储存在localStorage或sessionStorage中  此后，客户端每次与服务器端通信都要带上这个JWT的字符串，从而进行身份认证。  推荐的做法是将JWT放在http请求头的Authorization字段中，格式：        Authorization：Bearer &lt;token&gt;</code></pre></div><h1 id="生成token的步骤"><a href="#生成token的步骤" class="headerlink" title="生成token的步骤"></a>生成token的步骤</h1><div class="hljs code-wrapper"><pre><code class="hljs">   1、使用npm i express-jwt jsonwebtoken命令下载第三方包   2、引入这两个包            const jsonwebtoken=require(&#39;jsonwebtoken&#39;)            const expressJWT=require(&#39;express-jwt&#39;)   3、定义 secret 密钥，建议将密钥命名为 secretKey                    const secretKey=&#39;hezhixing No1&#39;   4、在登录成功之后，调用jsonwebtoken.sign() 方法生成 JWT 字符串。并通过 token 属性发送给客户端        //该方法会传递三个参数，参数1：用户信息对象，参数2：加密的密钥，参数3：配置对象，可以配置token的有效期        //记住千万不要把密码加密到token中        const jwtStr=jsonwebtoken.sign(&#123;username:userinfo.username&#125;,secretKey,&#123;expiresIn:&#39;30s&#39;&#125;)            res.send(&#123;              status: 200,              message: &#39;登录成功！&#39;,              token: jwtStr // 要发送给客户端的 token 字符串            &#125;)    5、注册将 JWT 字符串解析还原成 JSON 对象的中间件            //配置成功了express-jwt中间件，就可以将解析出来的用户信息，挂载到req.user(req.auth)上            app.use(expressJWT(&#123;algorithms:[&#39;HS256&#39;],secret:secretKey&#125;).unless(&#123;path:[/^\/api\//]&#125;))    6、使用 req.user 获取用户信息，并使用 data 属性将用户信息发送给客户端                  console.log(req.user)                  res.send(&#123;                    status: 200,                    message: &#39;获取用户信息成功！&#39;,                    data: req.user // 要发送给客户端的用户信息                  &#125;)    7、使用全局错误处理中间件，捕获解析 JWT 失败后产生的错误            app.use((err,req,res,next)=&gt;&#123;              //错误级别的中间件              //这次错误是由token解析失败导致的              if(err.name===&#39;UnauthorizedError&#39;)&#123;                return res.send(&#123;                  status:0,                  msg:&#39;无效的token&#39;                &#125;)              &#125;</code></pre></div><h1 id="致谢"><a href="#致谢" class="headerlink" title="致谢"></a>致谢</h1><div class="hljs code-wrapper"><pre><code class="hljs"> 此文档是学习黑马程序员B站视频记录。学习请搜索黑马程序员node课程</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>node</category>
      
    </categories>
    
    
    <tags>
      
      <tag>node基础</tag>
      
      <tag>node</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vue2脚手架</title>
    <link href="/2022/05/12/vue/vue2%E8%84%9A%E6%89%8B%E6%9E%B6/"/>
    <url>/2022/05/12/vue/vue2%E8%84%9A%E6%89%8B%E6%9E%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="关于不同版本的vue："><a href="#关于不同版本的vue：" class="headerlink" title="关于不同版本的vue："></a>关于不同版本的vue：</h2><div class="hljs code-wrapper"><pre><code class="hljs">1、vue.js与vue.runtime.xxx.js的区别： （1）vue.js是完整版的vue，包含：vue核心+模板解析器 （2）vue.runtime.xx.js,是运行版的js，只包含核心功能，没有模板解析器2、因为vue.runtime.xxx.js没有模板解析器，所以不能使用templata配置项，需要使用rander函数接收到的createElement函数去指定具体内容3、组件中的template有专门的模板解析器，只需在main.js中创建vue实例需要使用hender函数</code></pre></div><h2 id="vue-config-js配置："><a href="#vue-config-js配置：" class="headerlink" title="vue.config.js配置："></a>vue.config.js配置：</h2><div class="hljs code-wrapper"><pre><code class="hljs">&gt;使用vue inspect &gt;output.js可以查看vue脚手架的默认配置&gt;使用vue.config.js配置，详情请见官网</code></pre></div><h2 id="ref属性"><a href="#ref属性" class="headerlink" title="ref属性"></a>ref属性</h2><div class="hljs code-wrapper"><pre><code class="hljs"> 1、被用来给元素或者子组件注册引用信息（id的替代者） 2、应用在html标签上获取真实DOM元素，应用在组件标签是组件实例对象（vc） 3、使用方式：  打标识：&lt;h1 ref=&quot;xxxx&quot;&gt;&lt;/h1&gt;或者 &lt;School ref=&quot;sch&quot;&gt;&lt;/School&gt;  获取：this.$refs.xxx</code></pre></div><h2 id="props属性"><a href="#props属性" class="headerlink" title="props属性"></a>props属性</h2><div class="hljs code-wrapper"><pre><code class="hljs">功能让组件接收外部传来的数据（1）传递数据：       &lt;demo name=&quot;xxx&quot;/&gt;（2）接收数据：       第一种方式（只接收）：       props：[&#39;name&#39;]       第二种方式限制类型：       props:&#123;         name:String       &#125;       第三种方式，限制类型+默认值设定+必要性限定;       props:&#123;         name:&#123;           type:String,        //类型           required:true,      //必要性           default:&#39;hezhixing&#39; //默认值         &#125;       &#125;备注：props是只读，vue底层会检测你对props的修改，如果进行了修改，就会发出警告    若业务需求需要改，那么请复制props的内容到data中一份，然后修改data</code></pre></div><h2 id="mixin混入"><a href="#mixin混入" class="headerlink" title="mixin混入"></a>mixin混入</h2><div class="hljs code-wrapper"><pre><code class="hljs">功能：可以把多个组件共用配置对象提出成一个混入对象使用方式：  第一步定义混入，例:    &#123;      data()&#123;.....&#125;      methods:&#123;....&#125;      .....    &#125;  第二步使用混入，例如：     （1）全局混入：Vue.mixin(xxx);     （2）局部混入：mixin:[&#39;xxx&#39;];</code></pre></div><h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><div class="hljs code-wrapper"><pre><code class="hljs">功能：用于增强Vue本质：包含一个install方法的一个对象，install的第一个参数是Vue，第二个以后的参数是插件使用者传递的数据定义插件：install(Vue)&#123;//全局过滤器Vue.filter(&#39;mySlice&#39;,function(value)&#123;  return value.slice(0,5)&#125;)//定义混入Vue.mixin(&#123;  data()&#123;    return&#123;      x:100    &#125;  &#125;&#125;)//自定义指令Vue.directive(&#39;fbind&#39;,&#123;    //指令与元素绑定时调用    bind(element,binding)&#123;      console.log(&quot;指令与元素成功绑定&quot;);      element.value=binding.value;    &#125;,    //指令所在元素被插入时调用    inserted(element,binding)&#123;      console.log(&quot;指令所在元素被成功插入&quot;);      element.focus();    &#125;,    //指令所在模板被重新解析时被调用    update(element,binding)&#123;      console.log(&quot;指令所在模板被重新解析&quot;);      element.value=binding.value;      element.focus();    &#125;, &#125;)//定义原型方法Vue.prototype.demo=()=&gt;&#123;alert(&quot;你好&quot;)&#125;&#125;使用插件：Vue.use()</code></pre></div><h2 id="scoped样式"><a href="#scoped样式" class="headerlink" title="scoped样式"></a>scoped样式</h2><div class="hljs code-wrapper"><pre><code class="hljs"> 作用：让样式在局部生效，防止冲突 写法：&lt;style scoped&gt;</code></pre></div><h2 id="总结TodoList案例"><a href="#总结TodoList案例" class="headerlink" title="总结TodoList案例"></a>总结TodoList案例</h2><div class="hljs code-wrapper"><pre><code class="hljs"> 1、组件化编码流程：    （1）拆分静态组件：组件要按功能点拆分，命名不要与html冲突    （2）实现动态组件：考虑好数据存放的位置，数据是一个组件在用，还是一些组件在用：            1）一个组件在用：放到组件自身即可            2）一些组件在用：放到他们共同的父组件身上（状态提升）    （3）实现交互：从绑定事件开始。 2、props适用于：    （1）.父组件===&gt;子组件通信    （2）.子组件===&gt;父组件通信（要求先给子一个函数） 3、使用v-model要切记：v-model绑定的值不能是props传递过来的值，因为props是不可以修改的 4、props传过来的若是对象类型的值，修改对象中的属性Vue不会报错，但不推荐这么做</code></pre></div><h2 id="浏览器本地缓存"><a href="#浏览器本地缓存" class="headerlink" title="浏览器本地缓存"></a>浏览器本地缓存</h2><div class="hljs code-wrapper"><pre><code class="hljs"> 1、存储内容大小一般是5M左右（不同浏览器不同） 2、浏览器端通过Window.sessionStorage和Window.localStorage属性来实现本地存储机制 3、相关API：     1.xxxxxStorage.setItem(&#39;msg&#39;,&#39;hello!&#39;)        该方法接收一个键和值作为参数，会把键值对添加到存储中，如果键名已存在，会更新对应的值     2.xxxxxxStorage.getItem(&#39;person&#39;);        该方法会接收一个键名作为参数，返回其对应的值     3.xxxxxxxStorage.removeItem(&#39;msg&#39;);        该方法会接收一个键名作为参数，删除其对应的值     4.xxxxxxStorage.clear()        该方法会清空存储中的所有数据 4、备注：      1.SessionStorage存储内容会随着浏览器的关闭而消失      2.LocalStorage存储内容不会会随着浏览器的关闭而消失，而需要手动清除      3.xxxxxxStorage.getItem(&#39;person&#39;)如果找不到参数，那么getter返回值为null      4.JSON.parse(null)结果为空</code></pre></div><h2 id="组件自定义事件"><a href="#组件自定义事件" class="headerlink" title="组件自定义事件"></a>组件自定义事件</h2><div class="hljs code-wrapper"><pre><code class="hljs"> 1、一种组件之间的通信方式，适用于子===&gt;父组件 2、使用场景：A是父组件，B是子组件，B想给A传递数据，那么就要在A中为B绑定自定义事件（事件的回调在A中） 3、绑定自定义事件：        1.第一种方式：在父组件中：          &lt;Student v-on:hezhixing.once=&quot;getStudetName&quot;&gt;&lt;/Student&gt;        2.第二种方式：在父组件中          &lt;Student ref=&#39;student&#39;&gt;&lt;/Student&gt;            mounted() &#123;               this.$refs.student.$on(&#39;hezhixing&#39;,(name)=&gt;&#123;                   console.log(&#39;App收到了学生名&#39;,name);                   this.studentName=name               &#125;);          &#125;, 4、触发自定义事件：this.$emit(&#39;hezhixing&#39;,this.name) //绑定一个自定义事件 5、解绑自定义事件： this.$off(&#39;hezhixing&#39;)            //解绑一个事件 6、组件上也可以绑定原生DOM事件，需要native修饰符 7、注意使用 this.$refs.student.$on(&#39;hezhixing&#39;,回调函数）时，回调要么配置在methods中，要么使用箭头函数，    否则this的指向会出现问题</code></pre></div><h2 id="全局事件总线"><a href="#全局事件总线" class="headerlink" title="全局事件总线"></a>全局事件总线</h2><div class="hljs code-wrapper"><pre><code class="hljs"> 1、一种组件间通信方式，适用于任意组件间通信 2、安装全局事件总线：      new Vue(&#123;         el:&quot;#app&quot;,         render: h =&gt;h(App),         beforeCreate()&#123;         Vue.prototype.$bus=this   //安装全局事件总线        &#125;     &#125;) 3、使用事件总线：      1.接收数据：A组件想接收数据，则在A组件给$bus绑定自定义事件，事件的回调留在A组件自身             mounted() &#123;               this.bus.$on(&#39;hello&#39;,(name)=&gt;&#123;                 console.log(&#39;school&#39;,name)               &#125;)             &#125;,             beforeDestroy() &#123;               this.$bus.$off(&#39;hello&#39;)             &#125;,      2.提供数据：            this.$bus.$emit(&#39;hello&#39;,this.name)  4、最好在beforeDestroy钩子中，用$off去解绑当前组件用到的事件</code></pre></div><h2 id="消息订阅与发布"><a href="#消息订阅与发布" class="headerlink" title="消息订阅与发布"></a>消息订阅与发布</h2><div class="hljs code-wrapper"><pre><code class="hljs">  1、一种组件间通信的方式，适用于任意组件间通信  2、使用步骤：        1、安装pubsub：npm i pubsub-js        2、引入：import pubsub from &#39;pubsub-js        3、接收数据：A组件想要接收数据，则在A组件中订阅消息，订阅的回调留在A中            mounted() &#123;              pubsub.subscribe(&#39;hello&#39;,(msgName,data)=&gt;&#123;                console.log(&#39;有人发布了订阅消息，hello的回调执行了&#39;,data)  //消息订阅              &#125;)            &#125;,        4、提供数据：  pubsub.publish(&#39;hello&#39;,666)  //消息发布        5、最好在beforeDestroy钩子中，用 pubsub.unsubscribe(&#39;hello&#39;)取消消息订阅</code></pre></div><h2 id="nextTick"><a href="#nextTick" class="headerlink" title="nextTick"></a>nextTick</h2><div class="hljs code-wrapper"><pre><code class="hljs">  1、语法：this.$nextTick(回调函数）  2、作用：在下一次DOM更新结束后执行其指定的回调。  3、什么时候用：当改变数据后，要基于更新后新的DOM某些操作时，要在nextTick所指定的回调函数中执行</code></pre></div><h2 id="Vue封装的过渡与总结"><a href="#Vue封装的过渡与总结" class="headerlink" title="Vue封装的过渡与总结"></a>Vue封装的过渡与总结</h2><div class="hljs code-wrapper"><pre><code class="hljs">  1、作用：在插入、更新或者移出DOM是，在合适的时候为元素添加样式类名   ..........</code></pre></div><h2 id="vue脚手架配置代理"><a href="#vue脚手架配置代理" class="headerlink" title="vue脚手架配置代理"></a>vue脚手架配置代理</h2><div class="hljs code-wrapper"><pre><code class="hljs">方法一：   在vue.config.js中配置：         devServer: &#123;            proxy: &#39;http://localhost:5000&#39;          &#125;,   说明：        1、优点：配置简单，请求资源时直接发送给前端（8080）即可        2、缺点：不能配置多个代理，不能灵活的控制请求是否走代理        3、工作方式：若按照上述配置代理，当请求了前端不存在的资源时，那么该请求就会转发给服务器 方法二：    在vue.config.js中配置：  devServer: &#123;    proxy: &#123;     &#39;/api1&#39;: &#123;  //匹配所有以api1开头的路径       target: &#39;http://localhost:5000&#39;,   //代理目标路径       pathRewrite:&#123;&#39;^/api1&#39;:&#39;&#39;&#125;,   //重写路径       ws: true,                   //用于支持websocket,默认为真       changeOrigin: true         //用于控制请求头中host值，默认为真     &#125;,     &#39;/api2&#39;: &#123;       target: &#39;http://localhost:5001&#39;,       pathRewrite:&#123;&#39;^/api2&#39;:&#39;&#39;&#125;,   //重写路径       ws: true,                   //用于支持websocket,默认为真       changeOrigin: true         //用于控制请求头中host值，默认为真    &#125;   &#125; &#125;       说明：    1、优点：可以配置多个代理，且可以灵活的控制请求是否走代理    2、缺点：配置繁琐，请求时必须加前缀</code></pre></div><h2 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h2><div class="hljs code-wrapper"><pre><code class="hljs"> 1、作用：让父组件可以向子组件的指定位置插入html结构，也是组件间通信的一种方式，适用于父组件与子组件通信 2、分类：默认插槽、具名插槽、作用域插槽 3、使用方式：       1.默认插槽：           父组件中： &lt;Category title=&quot;美食&quot;&gt;html结构&lt;/Category&gt;           子组件中：&lt;div class=&quot;category&quot;&gt;                    &lt;h3&gt;&#123;&#123;title&#125;&#125;分类&lt;/h3&gt;                    &lt;!-- 定义一个插槽（等待填充），未填充就使用默认值  默认插槽--&gt;                    &lt;slot&gt;我是一个默认插槽，当组件未填充时，我就会出现&lt;/slot&gt;                    &lt;/div&gt;       2.具名插槽：           父组件中： &lt;Category title=&quot;电影&quot; &gt;                      &lt;video slot=&quot;center&quot; src=&quot;http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4&quot; controls&gt;&lt;/video&gt;                       &lt;template v-slot:footer&gt;                          &lt;a href=&quot;https://www.biadu.com&quot;&gt;热门视频&lt;/a&gt;                          &lt;h4&gt;欢迎来观影&lt;/h4&gt;                       &lt;/template&gt;                     &lt;/Category&gt;           子组件中：                     &lt;slot name=&quot;center&quot;&gt;我是一个默认插槽，当组件未填充时，我就会出现1&lt;/slot&gt;                     &lt;slot name=&quot;footer&quot;&gt;我是一个默认插槽，当组件未填充时，我就会出现2&lt;/slot&gt;         3.作用域插槽              1.理解：数据在组件的自身，但根据数据的生成的结构需要组件的使用者来决定。              2.具体编码：                   父组件中： &lt;Category title=&quot;游戏&quot;&gt;                                &lt;template scope=&quot;&#123;games&#125;&quot;&gt;   //&#123;games&#125;解构赋值                               &lt;ul&gt;                                 &lt;li  v-for= &quot;(item,index) in games&quot; :key=&quot;index&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/li&gt;                               &lt;/ul&gt;                               &lt;/template&gt;                            &lt;/Category&gt;                子组件中： &lt;div class=&quot;category&quot;&gt;                              &lt;h3&gt;&#123;&#123;title&#125;&#125;分类&lt;/h3&gt;                              &lt;slot :games=&quot;games&quot;&gt;我是默认内容&lt;/slot&gt;                          &lt;/div&gt;</code></pre></div><h2 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h2><div class="hljs code-wrapper"><pre><code class="hljs">    Vuex 可以帮助我们管理共享状态，并附带了更多的概念和框架。这需要对短期和长期效益进行权衡。    如果您不打算开发大型单页应用，使用 Vuex 可能是繁琐冗余的。确实是如此——如果您的应用够简单，您最好不要使用 Vuex。    一个简单的 store 模式就足够您所需了。但是，如果您需要构建一个中大型单页应用，您很可能会考虑如何更好地在组件外部管理状态，    Vuex 将会成为自然而然的选择。项目结构 ├── index.html ├── main.js ├── api │   └── ... # 抽取出API请求 ├── components │   ├── App.vue │   └── ... └── store    ├── index.js          # 我们组装模块并导出 store 的地方    ├── actions.js        # 根级别的 action    ├── mutations.js      # 根级别的 mutation    └── modules       ├── cart.js       # 购物车模块       └── products.js   # 产品模块</code></pre></div><h2 id="getters的使用"><a href="#getters的使用" class="headerlink" title="getters的使用"></a>getters的使用</h2><div class="hljs code-wrapper"><pre><code class="hljs">  1、概念：当state中的数据需要加工后再使用时，可以使用getters加工  2、在store.js中追加getters配置      const getters=&#123;         bigSum(state)&#123;           return state.sum*10         &#125;      &#125;    //创建store,并暴露      export default new Vuex.Store(&#123;         actions,         mutations,         state,         getters      &#125;);   3、组件中读取数据：$store.getters.bigSum</code></pre></div><h2 id="mapState、mapGetters、mapMutations与mapActions"><a href="#mapState、mapGetters、mapMutations与mapActions" class="headerlink" title="mapState、mapGetters、mapMutations与mapActions"></a>mapState、mapGetters、mapMutations与mapActions</h2><div class="hljs code-wrapper"><pre><code class="hljs">    使用前要使用解构赋值引入：import &#123;mapGetters, mapState&#125; from &#39;vuex&#39;mapState方法：   用于帮助我们映射state中的数据为计算属性         computed:&#123;         //借助mapState生成计算属性，从State中读取数据（对象写法）         // ...mapState(&#123;he:&#39;sum&#39;,xuexiao:&#39;school&#39;,xueke:&#39;subject&#39;&#125;),             //借助mapState生成计算属性，从State中读取数据（数组写法）        ...mapState([&#39;sum&#39;,&#39;school&#39;,&#39;subject&#39;]),        &#125;,mapGetters方法：用于我们映射getters中的数据为计算属性          computed:&#123;            ...mapGetters(&#123;bigSum:&#39;bigSum&#39;&#125;),          &#125;,mapMutations:用于帮助我们生成与mutations对话的方法，包含$store.commit(xxx)的函数mapMutations:用于帮助我们生成与mutations对话的方法，包含$store.dispatch(xxx)的函数      methods: &#123;  // add()&#123;  //   this.$store.commit(&#39;JIA&#39;,this.n)  // &#125;,  // cut()&#123;  //   this.$store.commit(&#39;JIAN&#39;,this.n)  // &#125;,   /* *************************** */   //借助mapMutations生成对应的方法，方法中会调用commit去联系mutations(对象写法)  ...mapMutations(&#123;add:&#39;JIA&#39;,cut:&#39;JIAN&#39;&#125;),  // fnFormatNumber()&#123;  //   this.$store.dispatch(&#39;ifadd&#39;,this.n);  // &#125;,  // define()&#123;  //     this.$store.dispatch(&#39;delay&#39;,this.n)  // &#125;  ...mapActions(&#123;fnFormatNumber:&#39;ifadd&#39;,define:&#39;delay&#39;&#125;) &#125;,</code></pre></div><h2 id="模块化-命名空间"><a href="#模块化-命名空间" class="headerlink" title="模块化+命名空间"></a>模块化+命名空间</h2><div class="hljs code-wrapper"><pre><code class="hljs"> 1、目的：让代码更易维护，让多种数据分类更加明确   .......</code></pre></div><h2 id="路由（vue-router"><a href="#路由（vue-router" class="headerlink" title="路由（vue-router)"></a>路由（vue-router)</h2><div class="hljs code-wrapper"><pre><code class="hljs">  vue的一个插件库，专门用来实现SPA应用</code></pre></div><h2 id="SPA应用的理解"><a href="#SPA应用的理解" class="headerlink" title="SPA应用的理解"></a>SPA应用的理解</h2><div class="hljs code-wrapper"><pre><code class="hljs">  1.单页面应用（single page web application)  2.整个页面只有一个完整的页面  3.点击页面中的导航链接不会刷新页面，只会做页面的局部更新  4.数据需要通过ajax请求</code></pre></div><h2 id="路由的理解"><a href="#路由的理解" class="headerlink" title="路由的理解"></a>路由的理解</h2><div class="hljs code-wrapper"><pre><code class="hljs">  1、什么是路由       1.一个路由就是一组映射关系（key-value）       2.key为路径，value可能是function或者component  2、路由的分类     1.后端路由         1)理解：value是function，用于处理客户端提交的请求         2）工作过程：服务器接收到一个请求时，根据请求路径找到匹配的函数来处理请求，返回响应数据     2.前端路由：         1）理解：value是component，用于展示页面信息         2）工作过程：当浏览器的路径改变时，对应的组件就会显示</code></pre></div><h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><div class="hljs code-wrapper"><pre><code class="hljs">  1、安装vue-router，命令：npm i vue-router@3(vue3默认版本为4）  2、应用插件：vue.use(VueRouter)  3、编写router配置项：    /* 该文件创建整个应用的路由器 */    import VueRouter from &#39;vue-router&#39;;    //引入组件    import About from &#39;../components/About&#39;;    import Home from &#39;../components/Home&#39;    //创建一个路由器,并暴露    export default new VueRouter(&#123;      routes:[        &#123;          path:&#39;/About&#39;,          component:About        &#125;,        &#123;          path:&#39;/Home&#39;,          component:Home        &#125;      ]    &#125;)   4、实现切换：        &lt;!-- vue中借助router-link实现路由的切换  --&gt;        &lt;router-link class=&quot;list-group-item&quot; active-class=&quot;active&quot; to=&quot;/About&quot;&gt;About&lt;/router-link&gt;        &lt;router-link class=&quot;list-group-item&quot; active-class=&quot;active&quot; to=&quot;/Home&quot;&gt;Home&lt;/router-link&gt;   5、指定展示位置：         &lt;!-- 指定组件中的呈现位置 --&gt;           &lt;router-view&gt;此处展示什么内容，根据用户点击&lt;/router-view&gt;</code></pre></div><h2 id="路由的几个注意点"><a href="#路由的几个注意点" class="headerlink" title="路由的几个注意点"></a>路由的几个注意点</h2><div class="hljs code-wrapper"><pre><code class="hljs">  1、路由组件通常存放在pages文件夹中，一般组件通常放在components文件夹中  2、通过切换，&quot;隐藏&quot;了路由组件，默认是被销毁的，需要的时候再去挂载  3、每个组件都有自己的$route属性，里面存放自己的路由信息  4、整个应用只有一个router，可以通过组件的$router属性获取到</code></pre></div><h2 id="嵌套（多级）路由"><a href="#嵌套（多级）路由" class="headerlink" title="嵌套（多级）路由"></a>嵌套（多级）路由</h2><div class="hljs code-wrapper"><pre><code class="hljs">  1、配置路由规则，使用children配置项：        /* 该文件创建整个应用的路由器 */        import VueRouter from &#39;vue-router&#39;;        //引入组件        import About from &#39;../pages/About&#39;;        import Home from &#39;../pages/Home&#39;;        import News from &#39;../pages/News&#39;;        import Message from &#39;../pages/Message&#39;        //创建一个路由器,并暴露        export default new VueRouter(&#123;          routes:[            &#123;              path:&#39;/About&#39;,              component:About            &#125;,            //一级路由             &#123;              path:&#39;/Home&#39;,              component:Home,              children:[   //通过children配置子级路由                &#123;                  path:&#39;news&#39;,   //此处一定不要写/news，因为他会默认为你添加一个/                  component:News                &#125;,                &#123;                  path:&#39;message&#39;,                  component:Message                &#125;              ]            &#125;          ]        &#125;)    2、跳转的路径要写完整的路径：    &lt;router-link class=&quot;list-group-item&quot; active-class=&quot;active&quot; to=&quot;/Home/message&quot;&gt;Message&lt;/router-link&gt;</code></pre></div><h2 id="路由的参数传递"><a href="#路由的参数传递" class="headerlink" title="路由的参数传递"></a>路由的参数传递</h2><div class="hljs code-wrapper"><pre><code class="hljs">1、传递参数：      &lt;!-- 跳转路由并携带query参数，to的字符串写法 --&gt;    &lt;router-link :to=&quot;`/Home/message/detail?id=$&#123;item.id&#125;&amp;title=$&#123;item.title&#125;`&quot;&gt;&#123;&#123;item.title&#125;&#125;&lt;/router-link&gt;      &lt;!-- 跳转路由并携带query参数，to的对象的写法 --&gt;    &lt;router-link :to=&quot;&#123;      path:&#39;/Home/message/detail&#39;,      query:&#123;        id:item.id,        title:item.title      &#125;    &#125;&quot;&gt;&#123;&#123;item.title&#125;&#125;&lt;/router-link&gt;&amp;nbsp;&amp;nbsp;  &lt;/li&gt;2、接收参数：    &lt;ul&gt;      &lt;li&gt;消息编号:&#123;&#123;$route.query.id&#125;&#125;&lt;/li&gt;      &lt;li&gt;消息标题:&#123;&#123;$route.query.title&#125;&#125;&lt;/li&gt;    &lt;/ul&gt;</code></pre></div><h2 id="命名路由"><a href="#命名路由" class="headerlink" title="命名路由"></a>命名路由</h2><div class="hljs code-wrapper"><pre><code class="hljs"> 1、命名路由的作用：简化路由的跳转 2、如何使用：      在路由配置中添加name属性       routes:[          &#123;            name:&#39;guanyu&#39;,            path:&#39;/About&#39;,            component:About          &#125;,    直接使用名字跳转： &lt;router-link :to=&quot;&#123;name:&#39;guanyu&#39;&#125;&quot;&gt;About&lt;/router-link&gt;</code></pre></div><h2 id="路由中的params参数"><a href="#路由中的params参数" class="headerlink" title="路由中的params参数"></a>路由中的params参数</h2><div class="hljs code-wrapper"><pre><code class="hljs">  1、配置路由，声明接收params参数   &#123;      path:&#39;message&#39;,      component:Message,      children:[        &#123;          name:&#39;xiangqing&#39;,          path:&#39;detail/:id/:title&#39;,  //使用占位符声明接收params参数          component:Detail        &#125;      ]    &#125;  2、传递参数：       &lt;li v-for=&quot;item in messageList&quot; :key=&quot;item.id&quot;&gt;        // 跳转路由并携带params参数，to的字符串写法        &lt;router-link :to=&quot;`/Home/message/detail/$&#123;item.id&#125;/$&#123;item.title&#125;`&quot;&gt;&#123;&#123;item.title&#125;&#125;&lt;/router-link&gt;&amp;nbsp;&amp;nbsp;                //跳转路由并携带params参数，to的对象的写法        &lt;router-link :to=&quot;&#123;          name:&#39;xiangqing&#39;,          params:&#123;            id:item.id,            title:item.title          &#125;        &#125;&quot;&gt;&#123;&#123;item.title&#125;&#125;&lt;/router-link&gt;&amp;nbsp;&amp;nbsp;      &lt;/li&gt;  </code></pre></div><h2 id="路由的props配置"><a href="#路由的props配置" class="headerlink" title="路由的props配置"></a>路由的props配置</h2><div class="hljs code-wrapper"><pre><code class="hljs">  作用：让路由组件更加方便的收到参数：      &#123;      path:&#39;message&#39;,      component:Message,      children:[        &#123;          name:&#39;xiangqing&#39;,          path:&#39;detail/:id/:title&#39;,  //使用占位符声明接收params参数          component:Detail,          //props的第一种写法，值为对象,该对象中的所有key-value都会以props的形式传递给Detail组件          // props:&#123;a:100,b:&#39;hello&#39;&#125;          //props的第二种写法，值为布尔值,若布尔值为真，就会把该路由组件收到的所有params参数，以props以props参数的形式传递给Detail组件          // props:true,          //props的第三种写法，值为函数          props($route)&#123;            return &#123; id:$route.query.id,title:$route.query.title&#125;          &#125;        &#125;      ]    &#125;</code></pre></div><h2 id="的replace"><a href="#的replace" class="headerlink" title="的replace"></a><router-link>的replace</h2><div class="hljs code-wrapper"><pre><code class="hljs">  1、作用：控制路由跳转时操作浏览器历史记录的模式  2、浏览器的历史记录有两种写入方式：分别为push和replace，push时追加浏览器历史记录     replace是替换当前记录。路由跳转默认为push  3、如何开启：向标签中添加replace属性  &lt;router-link replace:to=&quot;&#123;name:&#39;guanyu&#39;&#125;&quot;&gt;About&lt;/router-link&gt;</code></pre></div><h2 id="编程式路由导航"><a href="#编程式路由导航" class="headerlink" title="编程式路由导航"></a>编程式路由导航</h2><div class="hljs code-wrapper"><pre><code class="hljs">  1、作用：不借助&lt;router-link&gt;实现路由跳转，让路由更加灵活  2、具体编码：    四个API：this.$router.push()、this.$router.replace()、this.$router.back()、 this.$router.go(2)    pushShow(item)&#123;    this.$router.push(&#123;      name:&#39;xiangqing&#39;,      params:&#123;        id:item.id,        title:item.title      &#125;    &#125;)  &#125;,  replaceShow(item)&#123;    this.$router.replace(&#123;      name:&#39;xiangqing&#39;,      params:&#123;        id:item.id,        title:item.title      &#125;    &#125;)  &#125; this.$router.back();  this.$router.go(2);</code></pre></div><h2 id="缓存路由组件"><a href="#缓存路由组件" class="headerlink" title="缓存路由组件"></a>缓存路由组件</h2><div class="hljs code-wrapper"><pre><code class="hljs">  1、作用：不展示的路由组件保持挂载，不销毁  2、具体编码：         &lt;!-- include属性是添加保存缓存的组件名 --&gt;          &lt;keep-alive include=&quot;News&quot;&gt;             &lt;router-view&gt;&lt;/router-view&gt;          &lt;/keep-alive&gt;         缓存多个         &lt;keep-alive include=&quot;[News,&#39;Message&#39;]&quot;&gt;             &lt;router-view&gt;&lt;/router-view&gt;          &lt;/keep-alive&gt;</code></pre></div><h2 id="两个新的生命周期钩子"><a href="#两个新的生命周期钩子" class="headerlink" title="两个新的生命周期钩子"></a>两个新的生命周期钩子</h2><div class="hljs code-wrapper"><pre><code class="hljs">  1、作用：路由组件所独有的两个钩子，用于捕获路由组件的激活状态  2、具体名字：      1.actived：路由组件被激活时触发      2.deactived：路由组件失活时触发</code></pre></div><h2 id="路由守卫"><a href="#路由守卫" class="headerlink" title="路由守卫"></a>路由守卫</h2><div class="hljs code-wrapper"><pre><code class="hljs"> 1.作用：对路由进行权限控制 2.分类：全局守卫，独享守卫、组件内守卫 3全局守卫：      //指定每一次路由切换调用函数，在初始化的时候被调用、每次路由切换之前被调用（全局前置路由守卫）      router.beforeEach((to,from,next)=&gt;&#123;        console.log(&#39;前置路由守卫&#39;,to,from);        //放行        if(to.meta.isAuth)&#123;  //控制是否需要权限          if(localStorage.getItem(&#39;school&#39;)===&#39;成都大学1&#39;)&#123;            next()          &#125;else&#123;            alert(&#39;学校名不对，无权查看&#39;)          &#125;        &#125;else&#123;          next()        &#125;      &#125;)      ////指定每一次路由切换调用函数，在初始化的时候被调用、每次路由切换之后被调用（全局后置路由守卫）      router.afterEach((to,from)=&gt;&#123;        console.log(&#39;后置路由守卫&#39;,to,from);        document.title=to.meta.title ||&#39;vue-test&#39;      &#125;)  4、独享路由守卫：        beforeEnter:(to,from,next)=&gt;&#123; //独享路由守卫          console.log(&#39;前置路由守卫&#39;,to,from);          //放行          if(to.meta.isAuth)&#123;  //控制是否需要权限            if(localStorage.getItem(&#39;school&#39;)===&#39;成都大学1&#39;)&#123;              next()            &#125;else&#123;              alert(&#39;学校名不对，无权查看&#39;)            &#125;          &#125;else&#123;            next()          &#125;      &#125;  5、组件内守卫：      //通过路由规则，进入该组件被调用      beforeRouteEnter (to, from, next) &#123;        // ...        console.log(&#39;APP---beforerouterenter&#39;);        //进入        next();        document.title=to.meta.title ||&#39;vue-test&#39;      &#125;,        //通过路由规则，离开该组件被调用      beforeRouteLeave (to, from, next) &#123;        // ...        next();              &#125;</code></pre></div><h2 id=""><a href="#" class="headerlink" title=""></a></h2>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>vue基础</tag>
      
      <tag>vue2</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vue2基础知识</title>
    <link href="/2022/05/11/vue/vue2%E5%9F%BA%E7%A1%80/"/>
    <url>/2022/05/11/vue/vue2%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h1 id="初始vue"><a href="#初始vue" class="headerlink" title="初始vue"></a>初始vue</h1><div class="hljs code-wrapper"><pre><code class="hljs">  -一个容器只能对应一个实例，一一对应的关系 -想让vue工作，就要实例化vue，且要传入一个配置对象，即挂载点 -root容器中的代码依旧符合html规范，只不过混入了一些特殊的vue语法 -root容器中的代码被称为【vue】模板 -真实的开发环境是会配合这组件一起使用 -&#123;&#123;xxxx&#125;中要写js表达式，xxx会自动读取更新# 模板指令      #插值语法            &#123;&#123;&#125;&#125;,通常使用在标签体中，即两个标签空格中  #指令语法          通常用于解析标签，（包括标签属性，标签体的内容，给标签绑定事件）          例如：v-bind:href=&quot;xxxx&quot;,xxx同时也是js表达式，简写式为 :href=&quot;xxxx&quot;,加了：就代表寻找表达式</code></pre></div><h1 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h1><div class="hljs code-wrapper"><pre><code class="hljs">   v-bind是单向绑定，将数据从data绑定到页面标签属性   v-model是双向绑定，将数据双向绑定。   v-model只能用于表单类元素中（输入类      v-bind简写为   :value=&quot;&quot;   ,v-model:value=&quot;&quot;可以简写为v-model=&quot;&quot;</code></pre></div><h1 id="el与data的两种写法"><a href="#el与data的两种写法" class="headerlink" title="el与data的两种写法"></a>el与data的两种写法</h1><div class="hljs code-wrapper"><pre><code class="hljs">#el写法   第一种：   new Vue(&#123;        el:&quot;#root&quot;        data:&#123;           name:&quot;何治兴&quot;        &#125;    &#125;)   第二种：       const v=new Vue(&#123;        data:&#123;           name:&quot;何治兴&quot;        &#125;    &#125;)    v.$mount(&quot;#root&quot;);//mount有挂载的意思</code></pre></div><p>   #data写法,用组件时，要函数式<br>       第一种对象式：<br>         new Vue({<br>            el:”#root”<br>            data:{<br>               name:”何治兴”<br>            }<br>        })<br>       第二种函数式：不能使用箭头函数，如果使用箭头函数，this就不是vue实例<br>        new Vue({<br>            el:”#root”<br>            data:function(){<br>              return{<br>                 name:”何治兴”<br>              }<br>            }<br>        })</p><h1 id="理解MVVM"><a href="#理解MVVM" class="headerlink" title="理解MVVM"></a>理解MVVM</h1><p>  #MVVM<br>    M为模型（对应data中的数据），V代表VIEW（页面模板），VM为视图模型(代表vue实例对象)</p><div class="hljs code-wrapper"><pre><code class="hljs">data数据中的属性，最后都出现在了vm身上vm身上的属性及vue原型上的所有属性，在vue模板上都可以直接使用。 可以把vm（vue实例）理解为逻辑层，data理解为数据层，v理解为视图层</code></pre></div><h1 id="Object-defineProperty"><a href="#Object-defineProperty" class="headerlink" title="Object.defineProperty"></a>Object.defineProperty</h1><div class="hljs code-wrapper"><pre><code class="hljs">使用Object.defineProperty()添加的属性不能被枚举（遍历），删除，修改Object.defineProperty()方法会传递三个参数，第一个参数是需要增加属性的对象，第二个参数是属性名，三个参数是自定义对象&#123;value：//属性的值          enumerable：//是否可遍历          writable：//是否可修改          configurable：//是否可修改          get（）&#123;&#125;     //getter          set（)&#123;&#125;      //setter          &#125;</code></pre></div><h1 id="数据代理"><a href="#数据代理" class="headerlink" title="数据代理"></a>数据代理</h1><div class="hljs code-wrapper"><pre><code class="hljs">通过一个对象代理另外一个对象数据的读写</code></pre></div><h1 id="vue中的数据代理"><a href="#vue中的数据代理" class="headerlink" title="vue中的数据代理"></a>vue中的数据代理</h1><div class="hljs code-wrapper"><pre><code class="hljs">  -创建好一个vue实例之后，vm实例将会去获取data数据，将其保存在_data中，为了书写简单    vue就做了数据代理，通过vm对象来代理data对象属性的操作     -基本原理：通过Object.defineProperty()方法将data对象中的使用属性添加到vm上，            为每一个添加到vm上的属性，都指定一个getter和setter            在getter和setter内部去操作data对应属性</code></pre></div><h1 id="事件的使用"><a href="#事件的使用" class="headerlink" title="事件的使用"></a>事件的使用</h1><div class="hljs code-wrapper"><pre><code class="hljs">  1、使用v-on：xxx或者@xxx来绑定事件，其中xxx是事件名，如@click  2、事件的回调需要配置到methods对象中，最终会在vm上  3、methods中配置的函数，不要用箭头函数，否则this就不是指向vm  4、methods中配置的函数，都是被vue管理的函数，this的指向就是vm或者组件化对象  5、@click=&quot;demo&quot;与@click=&quot;demo($event)&quot;效果一致，后者可以传参</code></pre></div><h1 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h1><div class="hljs code-wrapper"><pre><code class="hljs">   用法@click.xxx=&quot;&quot;,xxx就是修饰符 1、prevent:阻止默认事件，比如阻止超链接的跳转 ，@click.prevent=&quot;&quot;,     在js基础中的DOM 操作是e.preventDefault() 2、stop:阻止冒泡，@click.stop=&quot;&quot;（在外层添加）     在js基础中，捕获是从外向内，冒泡是从内向外，并且是先不捕获，后冒泡 3、once:只触发一次 4、capture：使用事件的捕获模式，就是说先将捕获的事件处理，不会按照冒泡顺序处理 5、self：只有是当前的DOM元素才会触发，比如在外层添加这个修饰符，那么点击里面这个，不会触发外面这个事件 6、passive：将事件的默认行为立即执行，不会等待回调函数执行完毕</code></pre></div><h1 id="键盘事件"><a href="#键盘事件" class="headerlink" title="键盘事件"></a>键盘事件</h1><div class="hljs code-wrapper"><pre><code class="hljs">  -键盘事件有keyup,keydown,keypress  -键盘事件的属性和方法keyCode该属性包含键盘中对应键位的键值                  charCode该属性包含键盘中对应键位的 Unicode 编码，仅 DOM 支持                  target发生事件的节点（包含元素），仅 DOM 支持                  srcElement发生事件的元素，仅 IE 支持                  shiftKey是否按下 Shift 键，如果按下返回 true，否则为false                  ctrlKey是否按下 Ctrl 键，如果按下返回 true，否则为false                  altKey是否按下 Alt 键，如果按下返回 true，否则为false                  metaKey是否按下 Mtea 键，如果按下返回 true，否则为false，仅 DOM 支持  -键盘别名        回车enter        上下左右：up,down,left,right        空格：space        换行：tab        注意有的键盘别名在不同键盘事件使用方法不同，注意查看文档</code></pre></div><h1 id="事件总结"><a href="#事件总结" class="headerlink" title="事件总结"></a>事件总结</h1><div class="hljs code-wrapper"><pre><code class="hljs">     修饰符可以连续写，比如@click.stop.prevent 先阻止冒泡，再阻止默认事件</code></pre></div><h1 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h1><div class="hljs code-wrapper"><pre><code class="hljs">  computed     1、定义：要用的属性不存在，要通过已有属性计算得来     2、原理：底层借助Object.defineProperty方法提供的getter和setter     3、在vue实例中要写在computed中     4、get函数什么时候会执行？           (1)当初次读取之时会执行一次，以后会调用缓存           （2）当依赖数据发生改变时，会再次被调用     5、优势：与methods实现相比，内部有缓存机制（复用），效率更高，调试更方便     6、备注：            1、计算属性会直接到vue实例中，直接读取即可            2、如果计算属性要被修改，必须写set函数去响应，且set呀要引起依赖数据的变化</code></pre></div><h1 id="事件监视"><a href="#事件监视" class="headerlink" title="事件监视"></a>事件监视</h1><div class="hljs code-wrapper"><pre><code class="hljs">    监视属性wantch       1、当监视的属性发生变化时，回调函数会立即调用，进行相关操作       2、监听的属性必须存在，才能进行监视       3、监视的两种写法             （1）写在vue实例中，传入watch配置          （2）通过vm.$watch(监视属性，监视执行语句)</code></pre></div><h1 id="深度监视"><a href="#深度监视" class="headerlink" title="深度监视"></a>深度监视</h1><div class="hljs code-wrapper"><pre><code class="hljs">   （1）vue中的watch默认不检测内部属性值的改变（一层）   （2）配置deep：true可以检测到对象内部值的改变（多层）   （3）vue自身可以检测对象内部值的改变，但vue提供的watch默认不可以   （4）使用watch时根据数据的具体结构，决定是否采用是否采用深度监视</code></pre></div><h1 id="计算属性与监视属性的区别"><a href="#计算属性与监视属性的区别" class="headerlink" title="计算属性与监视属性的区别"></a>计算属性与监视属性的区别</h1><div class="hljs code-wrapper"><pre><code class="hljs">    computed和watch之间的区别：          1、computed能完成的功能，watch都可以完成          2、watch能完成的功能，computed不一定能完成，例如：watch可以进行异步操作    两个重要的小原则：          1、所有被vue管理的函数，最好写成普通函数，这样this的指向才是vm或组件化实例对象          2、所有不被vue所管理的函数（定时器的回调函数，ajax的回调函数，promise的回调函数）。最好写成箭头函数             这样this的指向才是vm或组件化对象</code></pre></div><h1 id="样式绑定"><a href="#样式绑定" class="headerlink" title="样式绑定"></a>样式绑定</h1><div class="hljs code-wrapper"><pre><code class="hljs">     1、class样式          写法   :class=&quot;xxx&quot;,xxx可以是字符串，对象，数组                字符串写法，适用于类名不确定，要动态获取                数组的写法，适用于要绑定多个样式，但个数不确定，名字也不确定                对象的写法，适用于要绑定多个样式，但个数去掉，名字确定，但不知道用不用    2、style样式          :style=&quot;&#123;fontSize:xxx&#125;&quot;,其中xxx是动态的          :style=&quot;[a,b]&quot;,其中a，b是样式对象</code></pre></div><h1 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h1><div class="hljs code-wrapper"><pre><code class="hljs">    条件渲染有两个指令     1、v-show：           写法v-show:=&quot;表达式&quot;           适用于切换频率较高的场景           特点：不展示的DOM元素未被移出，仅仅是使用样式消失     2、v-if：           写法：              v-if=&quot;表达式&quot;              v-esle-if=&quot;表达式&quot;              v-else=&quot;表达式”           适用于切换频率较低的场景           特点：不展示的DOM元素直接被移出           注意：v-if可以和v-else-if、v-else一起使用，但要求结果不能被打断。</code></pre></div><h1 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h1><div class="hljs code-wrapper"><pre><code class="hljs">     v-for指令：           1、用于展示列表数据           2、语法v-for=&quot;(item,index) in xxx&quot; :key=&quot;xxx&quot;           3、可遍历：数组、对象、字符串、指定次数</code></pre></div><h1 id="面试题react、vue中的key有什么作用"><a href="#面试题react、vue中的key有什么作用" class="headerlink" title="面试题react、vue中的key有什么作用"></a>面试题react、vue中的key有什么作用</h1><h1 id="key的内部原理"><a href="#key的内部原理" class="headerlink" title="key的内部原理"></a>key的内部原理</h1><div class="hljs code-wrapper"><pre><code class="hljs">     1、虚拟DOM中key的作用：            key是虚拟DOM的数据标识，当数据发生改变时，vue会根据新数据生成新的虚拟DOM            随着vue进行新虚拟DOM与旧的虚拟DOM的差异比较，比较规则如下:(使用diff算法比较）     2、对比规则：           （1）旧的虚拟DOM中找到了与新的虚拟DOM相同的key：                 若虚拟DOM中的内容没变，直接使用之前的真实DOM                 若虚拟DOM中内容改变了，则生成新的真实DOM，随后替换掉页面中之前真实DOM           （2)旧的虚拟DOM未找到与新虚拟DOM相同的key                 创建真实的DOM，随后渲染到页面上     3、用index作为key可能引发的问题：            1、用数据进行：逆序添加、逆序删除等破坏顺序的操作                 会产生没有必要的真实DOM更新，===》页面效果没问题，但效率低            2、如果结构中包含输入类的DOM：                    会产生DOM的错误更新===》界面有问题     4、在开发中如何选择key             1、最好选择每条数据的唯一标识，比如id、电话号、身份证号等             2、如果不存在逆序添加、逆序删除、选择index也是没问题的</code></pre></div><h1 id="vue检测数据更新总结"><a href="#vue检测数据更新总结" class="headerlink" title="vue检测数据更新总结"></a>vue检测数据更新总结</h1><div class="hljs code-wrapper"><pre><code class="hljs">  1、vue会监视data中所有层次的数据  2、如何检测对象中的数据？       通过setter来实现监视，且要在new Vue时就要传入要检测的数据：        （1）.对象中后追加的属性，Vue默认不做响应式处理        （2）如需给后续添加的属性做响应式，请使用如下API：                Vue.set(target,&#39;property&#39;,&#39;value&#39;)               或者vm.$set(target,&#39;property&#39;,&#39;value&#39;)  3、如何检测数组中的数据        通过包裹数组更新元素的方法实现，本质就是做了两件事：          （1）调用原生方法对数组进行更新          （2）重新解析模板，进而更新页面  4、Vue中修改数组中的某个元素一定要用如下方法：         1、使用这些API：push(),pop(),shift(),unshift(),splice(),reverse(),sort()         2、Vue.set()或者vm.$set()   特别注意：Vue.set与vm.$set不能给vm或者vm的根数据添加属性（如data） </code></pre></div><h1 id="数据劫持"><a href="#数据劫持" class="headerlink" title="数据劫持"></a>数据劫持</h1><div class="hljs code-wrapper"><pre><code class="hljs">    为data添加getter与setter，对data加工，重新解析模板 </code></pre></div><h1 id="收集表单数据"><a href="#收集表单数据" class="headerlink" title="收集表单数据"></a>收集表单数据</h1><div class="hljs code-wrapper"><pre><code class="hljs">   若：&lt;input type=&quot;text&quot;&gt; :则v-model收集的是value值，用户输入的就是value值   若：&lt;input type=&quot;radio&quot;&gt;:则v-model收集的是value值，但是要给标签配置value值   若：&lt;input type=&quot;checkbox&quot;&gt;:        1、没有配置value值，v-model收集的就是checked（勾选 or 不勾选 是一个布尔值—）        2、配置了value值               但是value值为非数组，v-model收集的还是checked（勾选 or 不勾选 是一个布尔值—）             value为数组类型，v-model收集的就是value组成的数组   备注：v-model有三个修饰符          lazy：失去焦点在获取          number：输入字符串转化为有效数字          trim：输入首位空格过滤  </code></pre></div><h1 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h1><div class="hljs code-wrapper"><pre><code class="hljs">   定义：对要显示的数据进行特定的格式化后在显示（适用于一些简单的逻辑处理）   语法：         1、注册过滤器：Vue.filter(name,callback)或者new Vue（filters:&#123;&#125;)        2、使用过滤器：&#123;&#123;xxx | 过滤器名&#125;&#125;或者v-bind：属性=&quot;xxx |过滤器名&quot;   备注：        1、概率器也可以接收额外 参数、多个过滤器也可以串联        2、并没有改变原本的数据，是产生新的对应数据  </code></pre></div><h1 id="截至目前我们学过的指令"><a href="#截至目前我们学过的指令" class="headerlink" title="截至目前我们学过的指令"></a>截至目前我们学过的指令</h1><div class="hljs code-wrapper"><pre><code class="hljs">    v-bind：单向绑定解析表达式，可简写为 :xxx    xxx是属性名    v-model：双向绑定数据    v-for：遍历数组/对象/字符串    v-on:绑定事件监听    v-if：条件渲染（动态控制节点是否存在）    v-show：条件渲染    v-else：条件渲染</code></pre></div><h1 id="其他内置指令"><a href="#其他内置指令" class="headerlink" title="其他内置指令"></a>其他内置指令</h1><div class="hljs code-wrapper"><pre><code class="hljs">    v-text指令：        1、作用：向其所在的节点渲染文本内容        2、与插值语法的区别：v-text会替换掉节点的内容，&#123;&#123;xx&#125;&#125;则不会    v-html指令：         1、作用：向指定的节点渲染包含html结构的内容         2、与插值语法的区别：             （1）v-html会替换掉节点中的所有内容，&#123;&#123;xx&#125;&#125;则不会             （2）v-html可以识别html结构         3、严重注意：v-html有安全性问题              （1）在网站中动态渲染任意html是非常危险的，容易导致xxs攻击              （2）一定要在可信的内容使用v-html，永远不要用在用户提交的内容上    v-cloak指令：          1、本质上是一个特殊的属性，Vue实例创建完毕之后接管容器，会删掉v-clock属性          2、使用css配合v-cloak可以解决网速较慢时页面展示不出来&#123;&#123;xxx&#125;&#125;的问题    v-once指令：          1、v-once所在节点在第一次动态渲染，就视为静态内容了          2、以后的数据更新改变就不会引起v-once所在结构的更新，可以用于性能优化    v-pre指令：          1、跳过其所在节点的编译过程          2、可利用它跳过：没有指令语法、没有插值语法的节点，会加快编译</code></pre></div><h1 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h1><div class="hljs code-wrapper"><pre><code class="hljs">     局部指令定义语法：         new Vue(&#123;                                      new Vue(&#123;            directives:&#123;指令名：指令对象&#125;     或者            directives:&#123;指令名：回调函数&#125;          &#125;）                                            &#125;）          全局指令定义语法：         Vue.driective(指令名，回调函数）     二、配置对象常用的三个回调函数         （1）bind:指令与元素成功绑定时调用         （2）inserted：指令所在元素被插入页面时调用         （3）update：指令所在模板结构被重新调用     三、备注：         1、指令定义时不加v-，在使用时加v-         2、指令名如果是多个单词时，使用kebab-case类型定义，而不用cameLcase这种类型定义</code></pre></div><h1 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h1><div class="hljs code-wrapper"><pre><code class="hljs">   生命周期：      1、又名，生命周期回调函数、生命周期函数、生命周期钩子      2、是什么：Vue在关键时刻帮我们调用的一些特殊名称的函数      3、生命周期函数的名字不可更改，但函数的具体内容是程序员根据需求编写的      4、生命周期函数中的this指向的是vm实例对象或者组件化实例对象</code></pre></div><h1 id="生命周期函数钩子"><a href="#生命周期函数钩子" class="headerlink" title="生命周期函数钩子"></a>生命周期函数钩子</h1><div class="hljs code-wrapper"><pre><code class="hljs">   常用的生命函数钩子有：        1、mounted：发送AJAX请求、启动定时器、绑定自定义事件、订阅消息等初始化操作       2、beforedestroy：清除定时器、解绑自定义事件、取消订阅事件等收尾工作  关于销毁Vue实例       1、销毁后要借助Vue开发者工具看不到任何信息       2、销毁后的自定义事件会失效，但原生DOM依旧有效       3、一般不会在beforedestroy操作数据，因为即使操作数据，也不会触发更新数据。    </code></pre></div><h1 id="组件的概念"><a href="#组件的概念" class="headerlink" title="组件的概念"></a>组件的概念</h1><div class="hljs code-wrapper"><pre><code class="hljs">   实现应用中局部功能的代码和资源的集合</code></pre></div><h1 id="组件的使用"><a href="#组件的使用" class="headerlink" title="组件的使用"></a>组件的使用</h1><div class="hljs code-wrapper"><pre><code class="hljs">  Vue使用组件的三大步骤：       1、定义组件（创建组件）       2、注册组件       3、使用组件（写组件标签）  一、如何定义一个组件？       使用Vue.extend(options)创建，其中options和new Vue(options)传入那个options几乎一致，但也有区别            1、el不要写，--因为组件最终都要受到vm的管理，由vm中的el决定服务那个容器            2、data必须写成函数，----因为组件被复用时，数据存在引用关系。        备注：使用template可以配置组件结构   二、如何注册组件？        1、局部注册：靠new Vue的时候传入components选项        2、全局注册：Vue.component(&quot;组件名&quot;,组件）   三、编写组件标签？        例如：&lt;school&gt;&lt;/school&gt;</code></pre></div><h1 id="组件注意项"><a href="#组件注意项" class="headerlink" title="组件注意项"></a>组件注意项</h1><div class="hljs code-wrapper"><pre><code class="hljs">    1、关于组件名           如果时一个单词组成的话：               第一种写法（首字母小写）:school               第二种写法（首字母大写）：School           如果是多个单词组成：               第一种写法：my-school               第二种写法：MySchool（但是这种方法需要脚手架）           备注：             1、组件名要回避HTML中的标签名，如h2，button             2、可以在组件中使用name属性配置组件在开发者工具中的名字   2、关于组件标签          1、第一种写法：&lt;school&gt;&lt;/school&gt;          2、第二种写法：&lt;/school&gt;(但是这种不使用脚手架时，会导致此标签后续无法渲染   3、定义组件简写方式         const school=Vue.extend(options)  可简写为：const school=options          简写的原理是在注册组件时，Vue源码会进行判断，传入的对象，如果没有使用Vue.extend,就会帮程序员调用</code></pre></div><h1 id="关于VueComponent的五个点"><a href="#关于VueComponent的五个点" class="headerlink" title="关于VueComponent的五个点"></a>关于VueComponent的五个点</h1><div class="hljs code-wrapper"><pre><code class="hljs">   1、组件实质上是一个名为VueComponent的构造函数，并且不是由我们定义的，而是由Vue.extend()方法返回的（生成）   2、我们只需写&lt;school&gt;&lt;/school&gt;,Vue就会帮我们生成一个VueComponent实例对象，即Vue帮我们执行new VueComponent(options)   3、特别注意：每次调用Vue.extend,返回的都是一个全新的VueComponent   4、关于this的指向问题：           （1）组件配置中：                  data中的函数、methods中的函数、watch中的函数、computed中的函数，他们的this均是【VueComponent实例对象】           （2）new Vue（options）配置中：                  data中的函数、methods中的函数、watch中的函数、computed中的函数，他们的this均是【Vue实例对象】   5、VueComponent的实例对象，以后简称vc，（也可称之为组件实例对象）         Vue实例对象简称为vm</code></pre></div>]]></content>
    
    
    <categories>
      
      <category>vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>vue基础</tag>
      
      <tag>vue2</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>算法设计与技巧</title>
    <link href="/2022/05/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%8A%80%E5%B7%A7/"/>
    <url>/2022/05/07/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%8A%80%E5%B7%A7/</url>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>算法设计技巧是一个很广阔的话题，在我刷题过程中，我会尽量在这篇博客中更新</p><h1 id="常见的算法设计技巧"><a href="#常见的算法设计技巧" class="headerlink" title="常见的算法设计技巧"></a>常见的算法设计技巧</h1><ul><li>分而治之</li><li>贪心算法</li><li>动态规划</li><li>回溯算法</li><li>还有一些函数式编程</li></ul>]]></content>
    
    
    <categories>
      
      <category>数据结构</category>
      
    </categories>
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>数据结构</tag>
      
      <tag>算法设计与技巧</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>正则表达式</title>
    <link href="/2022/01/14/javascript/regExp/"/>
    <url>/2022/01/14/javascript/regExp/</url>
    
    <content type="html"><![CDATA[<h1 id="正则概述"><a href="#正则概述" class="headerlink" title="正则概述"></a>正则概述</h1><p>正则表达式用于定义一些字符串的规则，计算机可以根据正则表达式，来检查一个字符串是否符合规则，获得将字符串中符合内容提取出来<br>使用typeof检查正则对象，会返回object</p><h1 id="创建正则对象"><a href="#创建正则对象" class="headerlink" title="创建正则对象"></a>创建正则对象</h1><ul><li><p>使用对象创建<br>匹配模式：<br>      i：忽略大写写<br>      g：匹配全局模式<br>      ig：忽略大小写且全局匹配模式<br>      m:执行多行匹配</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> reg=<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">&quot;ab&quot;</span>,<span class="hljs-string">&quot;i&quot;</span>)<br> <span class="hljs-keyword">let</span> str=<span class="hljs-string">&quot;aBc&quot;</span><br> <span class="hljs-keyword">let</span> result=reg.<span class="hljs-title function_">test</span>(str)<br> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result)<br></code></pre></div></td></tr></table></figure></li><li><p>使用字面量创建</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> str=<span class="hljs-string">&quot;aBc&quot;</span><br><span class="hljs-keyword">let</span> reg1=<span class="hljs-regexp">/ab/i</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(reg1.<span class="hljs-title function_">test</span>(str))<br></code></pre></div></td></tr></table></figure><p>注意可以为一个正则表达式设置多个匹配模式，顺序无所谓</p><h1 id="正则进阶"><a href="#正则进阶" class="headerlink" title="正则进阶"></a>正则进阶</h1></li><li><p>需求信息：创建一个正则表达式，检查一个字符串中是否含有a或b</p></li><li><p>语法格式：使用|表示或者的意思</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">/* </span><br><span class="hljs-comment">     需求：创建一个正则表达式，检查一个字符串中是否含有a或b</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">const</span> reg=<span class="hljs-regexp">/a|b|c/</span><br><span class="hljs-keyword">let</span> str=<span class="hljs-string">&quot;aBc&quot;</span><br><span class="hljs-keyword">let</span> result=reg.<span class="hljs-title function_">test</span>(str)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result)<br></code></pre></div></td></tr></table></figure></li><li><p>那么我们如何检查一个字符串中是否含有小写字母或字母呢</p></li><li><p>这里我们就有一个需求创建一个字符表达式，检查字符串中是否含有字母</p></li><li><p>提示：常见组合：<br>     [a-z]:任意小写字母<br>     [A-Z]:任意大写字母<br>     [A-z]:任意字符<br>     [0-9]：任意数字</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> reg1=<span class="hljs-regexp">/[A-z]/</span><br><span class="hljs-keyword">let</span> str1=<span class="hljs-string">&quot;12a&quot;</span><br><span class="hljs-keyword">let</span> result1=reg1.<span class="hljs-title function_">test</span>(str1)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result1)<br></code></pre></div></td></tr></table></figure></li><li><p>需求信息：创建一个正则表达式，检查字符串中是否除了数字还有其他字母</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> reg2=<span class="hljs-regexp">/[^0-9]/</span><br><span class="hljs-keyword">let</span> str2=<span class="hljs-string">&quot;12abc&quot;</span><br><span class="hljs-keyword">let</span> result2=reg1.<span class="hljs-title function_">test</span>(str2)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result2)<br></code></pre></div></td></tr></table></figure><h1 id="正则方法"><a href="#正则方法" class="headerlink" title="正则方法"></a>正则方法</h1><p>这些正则方法其实都是字符串的方法，只不过将正则表达式作为参数。</p></li><li><p>split()方法：这个方法可以将一个字符串分为一个数组，方法中可以传递一个正则表达式作为参数，方法会根据正则表达式，来拆分字符串，并且是全局匹配</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> str = <span class="hljs-string">&quot;1a2b3c4d5e6f7&quot;</span>;<br><span class="hljs-keyword">var</span> result = str.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/[A-z]/</span>);   <br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result);<br></code></pre></div></td></tr></table></figure></li><li><p>search方法：这个方法可以搜索字符串中是否含有指定的内容，如果搜索到指定的内容，则返回第一次出现的索引，如果没有查到就返回-1，并且这个方法只会查找第一个，即使正则表达式加上了全局匹配也没用</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> str = <span class="hljs-string">&quot;hello abc hello aec afc&quot;</span>;<br><span class="hljs-keyword">var</span> result = str.<span class="hljs-title function_">search</span>(<span class="hljs-regexp">/a[bef]c/</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result);<br></code></pre></div></td></tr></table></figure></li><li><p>match()方法：可以根据正则表达式，从一个字符串中将符合条件的内容提取出来，默认情况下只要找到第一个符合要求的内容后，就会停止检索。但是我们可以向正则表达式中设置全局匹配，这样就可以匹配全部的内容</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> str = <span class="hljs-string">&quot;1a2a3a4a5e6f7A8B9C&quot;</span>;<br><span class="hljs-keyword">var</span> result = str.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/[a-z]/ig</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result);<br></code></pre></div></td></tr></table></figure></li><li><p>replce()该方法会传入两个参数，第一个为正则表达式，第二个为替换内容，将正则表达式匹配的内容替换，默认只会替换第一个，同理我们也可以设置全局匹配</p><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> str = <span class="hljs-string">&quot;1a2a3a4a5e6f7A8B9C&quot;</span>;<br><span class="hljs-keyword">var</span> result = str.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[a-z]/gi</span>, <span class="hljs-string">&quot;@_@&quot;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result);<br></code></pre></div></td></tr></table></figure><h1 id="正则量词"><a href="#正则量词" class="headerlink" title="正则量词"></a>正则量词</h1></li><li><p>通过量词可以设置一个内容出现的次数，量词只对它前边的一个内容起作用，如果有多个内容可以使用 () 括起来，常见量词如下：<br>      {n} ：正好出现n次<br>      {m,} ：出现m次及以上<br>      {m,n} ：出现m-n次<br>      + ：至少一个，相当于{1,}<br>      * ：0个或多个，相当于{0,}<br>      ? ：0个或1个，相当于{0,1}</p></li><li><p>如果我们要检查或者说判断是否以某个字符或者字符序列开头或者结尾就会使用^和$。<br>      ^ ：表示开头，注意它在[^字符序列]表达的意思不一样<br>      $ ：表示结尾</p></li><li><p>那如果我们想要检查一个字符串中是否含有.和\就会使用转义字符<br>      . ：表示.<br>      \ ：表示<br>      注意：使用构造函数时，由于它的参数是一个字符串，而\是字符串中转义字符，如果要使用\则需要使用\来代替<br><br>      除了以上两种特殊的字符，其实还有很多如下所示：<br>      \w ：任意字母、数字、<em>，相当于[A-z0-9</em>]<br>      \W ：除了字母、数字、<em>，相当于[^A-z0-9</em>]<br>      \d ：任意的数字，相当于[0-9]<br>      \D ：除了任意的数字，相当于[^0-9]<br>      \s ：空格<br>      \S ：除了空格<br>      \b ：单词边界<br>      \B ：除了单词边界</p></li></ul><h1 id="正则实例"><a href="#正则实例" class="headerlink" title="正则实例"></a>正则实例</h1><h2 id="用户正则"><a href="#用户正则" class="headerlink" title="用户正则"></a>用户正则</h2><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//⽤户名正则，4到16位（字母，数字，下划线，减号）</span><br>uPattern = <span class="hljs-regexp">/^[a-zA-Z0-9_-]&#123;4,16&#125;$/</span><br></code></pre></div></td></tr></table></figure><h2 id="密码强度正则"><a href="#密码强度正则" class="headerlink" title="密码强度正则"></a>密码强度正则</h2><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//密码强度正则，最少6位，包括⾄少1个⼤写字母，1个⼩写字母，1个数字，1个特殊字符</span><br>pPattern = <span class="hljs-regexp">/^.*(?=.&#123;6,&#125;)(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&amp;*? ]).*$/</span><br></code></pre></div></td></tr></table></figure><h2 id="手机号正则"><a href="#手机号正则" class="headerlink" title="手机号正则"></a>手机号正则</h2><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">mPattern = <span class="hljs-regexp">/^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\d&#123;8&#125;$/</span><br></code></pre></div></td></tr></table></figure><h2 id="身份证号正则"><a href="#身份证号正则" class="headerlink" title="身份证号正则"></a>身份证号正则</h2><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">cP = <span class="hljs-regexp">/^[1-9]\d&#123;5&#125;(18|19|([23]\d))\d&#123;2&#125;((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d&#123;3&#125;[0-9Xx]$/</span><br></code></pre></div></td></tr></table></figure><h2 id="车牌号正则"><a href="#车牌号正则" class="headerlink" title="车牌号正则"></a>车牌号正则</h2><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript">cPattern = <span class="hljs-regexp">/^[京津沪渝冀豫云辽⿊湘皖鲁新苏浙赣鄂桂⽢晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]&#123;1&#125;[A-Z]&#123;1&#125;[A-Z0-9]&#123;4&#125;[A-Z0-9挂学警港澳]&#123;1&#125;$/</span><br></code></pre></div></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>javascript</category>
      
    </categories>
    
    
    <tags>
      
      <tag>javascript</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
